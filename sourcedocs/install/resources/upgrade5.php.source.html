<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : MyBB 1.6.8 : /install/resources/upgrade5.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of MyBB 1.6.8</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Jun  4 13:54:24 2012 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='install/resources';
filename='upgrade5.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/install/resources/</a> -> <a href="upgrade5.php.html">upgrade5.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="upgrade5.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="upgrade5.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * MyBB 1.6</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * Copyright 2010 MyBB Group, All Rights Reserved</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * Website: http://mybb.com</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * License: http://mybb.com/about/license</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * $Id: upgrade5.php 5683 2011-11-29 15:02:41Z Tomm $</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> */</span>
<a name="l11"><span class="linenum">  11</span></a>  
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">/**</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * Upgrade Script: 1.0.x / 1.1.x</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('upgrade_detail')" href="../../_variables/upgrade_detail.html">$upgrade_detail</a> = array(
<a name="l18"><span class="linenum">  18</span></a>      &quot;revert_all_templates&quot; =&gt; 1,
<a name="l19"><span class="linenum">  19</span></a>      &quot;revert_all_themes&quot; =&gt; 1,
<a name="l20"><span class="linenum">  20</span></a>      &quot;revert_all_settings&quot; =&gt; 2,
<a name="l21"><span class="linenum">  21</span></a>      &quot;requires_deactivated_plugins&quot; =&gt; 1,
<a name="l22"><span class="linenum">  22</span></a>  );
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  @<a class="phpfunction" onClick="logFunction('set_time_limit')" href="../../_functions/set_time_limit.html" onMouseOver="phpfuncPopup(event,'set_time_limit')">set_time_limit</a>(0);
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  function <a class="function" onClick="logFunction('upgrade5_dbchanges')" href="../../_functions/upgrade5_dbchanges.html" onMouseOver="funcPopup(event,'upgrade5_dbchanges')">upgrade5_dbchanges</a>()
<a name="l27"><span class="linenum">  27</span></a>  {
<a name="l28"><span class="linenum">  28</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>, <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>;
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_header')" href="../../_functions/print_header.html" onMouseOver="funcPopup(event,'print_header')">print_header</a>(&quot;Performing Queries&quot;);
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>      echo &quot;&lt;p&gt;Performing necessary upgrade queries..&lt;/p&gt;&quot;;
<a name="l33"><span class="linenum">  33</span></a>      
<a name="l34"><span class="linenum">  34</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users CHANGE avatartype avatartype varchar(10) NOT NULL;&quot;);
<a name="l35"><span class="linenum">  35</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('totalpms', &quot;users&quot;))
<a name="l36"><span class="linenum">  36</span></a>      {
<a name="l37"><span class="linenum">  37</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP totalpms;&quot;);
<a name="l38"><span class="linenum">  38</span></a>      }
<a name="l39"><span class="linenum">  39</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users ADD totalpms int(10) NOT NULL default '0' AFTER showcodebuttons;&quot;);
<a name="l40"><span class="linenum">  40</span></a>      
<a name="l41"><span class="linenum">  41</span></a>      
<a name="l42"><span class="linenum">  42</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('newpms', &quot;users&quot;))
<a name="l43"><span class="linenum">  43</span></a>      {
<a name="l44"><span class="linenum">  44</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP newpms;&quot;);
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users ADD newpms int(10) NOT NULL default '0' AFTER totalpms;&quot;);
<a name="l47"><span class="linenum">  47</span></a>      
<a name="l48"><span class="linenum">  48</span></a>      
<a name="l49"><span class="linenum">  49</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('unreadpms', &quot;users&quot;))
<a name="l50"><span class="linenum">  50</span></a>      {
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP unreadpms;&quot;);
<a name="l52"><span class="linenum">  52</span></a>      }
<a name="l53"><span class="linenum">  53</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users ADD unreadpms int(10) NOT NULL default '0' AFTER newpms;&quot;);
<a name="l54"><span class="linenum">  54</span></a>      
<a name="l55"><span class="linenum">  55</span></a>      
<a name="l56"><span class="linenum">  56</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('showredirect', &quot;users&quot;))
<a name="l57"><span class="linenum">  57</span></a>      {
<a name="l58"><span class="linenum">  58</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP showredirect;&quot;);
<a name="l59"><span class="linenum">  59</span></a>      }
<a name="l60"><span class="linenum">  60</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users ADD showredirect char(3) NOT NULL default '' AFTER showquickreply;&quot;);
<a name="l61"><span class="linenum">  61</span></a>      
<a name="l62"><span class="linenum">  62</span></a>      
<a name="l63"><span class="linenum">  63</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('avatardimensions', &quot;users&quot;))
<a name="l64"><span class="linenum">  64</span></a>      {
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP avatardimensions;&quot;);
<a name="l66"><span class="linenum">  66</span></a>      }
<a name="l67"><span class="linenum">  67</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users ADD avatardimensions varchar(10) NOT NULL default '' AFTER avatar;&quot;);
<a name="l68"><span class="linenum">  68</span></a>      
<a name="l69"><span class="linenum">  69</span></a>      
<a name="l70"><span class="linenum">  70</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('unapprovedposts', &quot;threads&quot;))
<a name="l71"><span class="linenum">  71</span></a>      {
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads DROP unapprovedposts;&quot;);
<a name="l73"><span class="linenum">  73</span></a>      }
<a name="l74"><span class="linenum">  74</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads ADD unapprovedposts INT(10) unsigned NOT NULL default '0' AFTER visible;&quot;);
<a name="l75"><span class="linenum">  75</span></a>      
<a name="l76"><span class="linenum">  76</span></a>      
<a name="l77"><span class="linenum">  77</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('unapprovedthreads', &quot;forums&quot;))
<a name="l78"><span class="linenum">  78</span></a>      {
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP unapprovedthreads;&quot;);
<a name="l80"><span class="linenum">  80</span></a>      }
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD unapprovedthreads INT(10) unsigned NOT NULL default '0' AFTER rules;&quot;);
<a name="l82"><span class="linenum">  82</span></a>      
<a name="l83"><span class="linenum">  83</span></a>      
<a name="l84"><span class="linenum">  84</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('unapprovedposts', &quot;forums&quot;))
<a name="l85"><span class="linenum">  85</span></a>      {
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP unapprovedposts;&quot;);
<a name="l87"><span class="linenum">  87</span></a>      }
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD unapprovedposts INT(10) unsigned NOT NULL default '0' AFTER rules;&quot;);
<a name="l89"><span class="linenum">  89</span></a>      
<a name="l90"><span class="linenum">  90</span></a>      
<a name="l91"><span class="linenum">  91</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('defaultdatecut', &quot;forums&quot;))
<a name="l92"><span class="linenum">  92</span></a>      {
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP defaultdatecut;&quot;);
<a name="l94"><span class="linenum">  94</span></a>      }
<a name="l95"><span class="linenum">  95</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD defaultdatecut smallint(4) unsigned NOT NULL default '0' AFTER unapprovedposts;&quot;);
<a name="l96"><span class="linenum">  96</span></a>      
<a name="l97"><span class="linenum">  97</span></a>      
<a name="l98"><span class="linenum">  98</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('defaultsortby', &quot;forums&quot;))
<a name="l99"><span class="linenum">  99</span></a>      {
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP defaultsortby;&quot;);
<a name="l101"><span class="linenum"> 101</span></a>      }
<a name="l102"><span class="linenum"> 102</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD defaultsortby varchar(10) NOT NULL default '' AFTER defaultdatecut;&quot;);
<a name="l103"><span class="linenum"> 103</span></a>      
<a name="l104"><span class="linenum"> 104</span></a>      
<a name="l105"><span class="linenum"> 105</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('defaultsortorder', &quot;forums&quot;))
<a name="l106"><span class="linenum"> 106</span></a>      {
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP defaultsortorder;&quot;);
<a name="l108"><span class="linenum"> 108</span></a>      }
<a name="l109"><span class="linenum"> 109</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD defaultsortorder varchar(4) NOT NULL default '' AFTER defaultsortby;&quot;);
<a name="l110"><span class="linenum"> 110</span></a>      
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('lastposteruid', &quot;forums&quot;))
<a name="l113"><span class="linenum"> 113</span></a>      {
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP lastposteruid;&quot;);
<a name="l115"><span class="linenum"> 115</span></a>      }
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD lastposteruid int(10) unsigned NOT NULL default '0' AFTER lastposter;&quot;);
<a name="l117"><span class="linenum"> 117</span></a>      
<a name="l118"><span class="linenum"> 118</span></a>      
<a name="l119"><span class="linenum"> 119</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('lastpostsubject', &quot;forums&quot;))
<a name="l120"><span class="linenum"> 120</span></a>      {
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums DROP lastpostsubject;&quot;);
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forums ADD lastpostsubject varchar(120) NOT NULL default '' AFTER lastposttid&quot;);
<a name="l124"><span class="linenum"> 124</span></a>      
<a name="l125"><span class="linenum"> 125</span></a>      
<a name="l126"><span class="linenum"> 126</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('lastposteruid', &quot;threads&quot;))
<a name="l127"><span class="linenum"> 127</span></a>      {
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads DROP lastposteruid;&quot;);
<a name="l129"><span class="linenum"> 129</span></a>      }
<a name="l130"><span class="linenum"> 130</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads ADD lastposteruid int unsigned NOT NULL default '0' AFTER lastposter&quot;);
<a name="l131"><span class="linenum"> 131</span></a>      
<a name="l132"><span class="linenum"> 132</span></a>      
<a name="l133"><span class="linenum"> 133</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canmanagemembers', &quot;groupleaders&quot;))
<a name="l134"><span class="linenum"> 134</span></a>      {
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;groupleaders DROP canmanagemembers;&quot;);
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;groupleaders ADD canmanagemembers char(3) NOT NULL default '' AFTER uid;&quot;);
<a name="l138"><span class="linenum"> 138</span></a>      
<a name="l139"><span class="linenum"> 139</span></a>      
<a name="l140"><span class="linenum"> 140</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canmanagerequests', &quot;groupleaders&quot;))
<a name="l141"><span class="linenum"> 141</span></a>      {
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;groupleaders DROP canmanagerequests;&quot;);
<a name="l143"><span class="linenum"> 143</span></a>      }
<a name="l144"><span class="linenum"> 144</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;groupleaders ADD canmanagerequests char(3) NOT NULL default '' AFTER canmanagemembers;&quot;);
<a name="l145"><span class="linenum"> 145</span></a>      
<a name="l146"><span class="linenum"> 146</span></a>      
<a name="l147"><span class="linenum"> 147</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('caneditlangs', &quot;adminoptions&quot;))
<a name="l148"><span class="linenum"> 148</span></a>      {
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions DROP caneditlangs;&quot;);
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions ADD caneditlangs char(3) NOT NULL default '' AFTER canedithelp;&quot;);
<a name="l152"><span class="linenum"> 152</span></a>      
<a name="l153"><span class="linenum"> 153</span></a>      
<a name="l154"><span class="linenum"> 154</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canrundbtools', &quot;adminoptions&quot;))
<a name="l155"><span class="linenum"> 155</span></a>      {
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions DROP canrundbtools;&quot;);
<a name="l157"><span class="linenum"> 157</span></a>      }
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions ADD canrundbtools char(3) NOT NULL default ''&quot;);
<a name="l159"><span class="linenum"> 159</span></a>      
<a name="l160"><span class="linenum"> 160</span></a>      
<a name="l161"><span class="linenum"> 161</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('allowedgroups', &quot;themes&quot;))
<a name="l162"><span class="linenum"> 162</span></a>      {
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;themes DROP allowedgroups;&quot;);
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;themes ADD allowedgroups text NOT NULL AFTER extracss;&quot;);
<a name="l166"><span class="linenum"> 166</span></a>      
<a name="l167"><span class="linenum"> 167</span></a>      
<a name="l168"><span class="linenum"> 168</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canmovetononmodforum', &quot;moderators&quot;))
<a name="l169"><span class="linenum"> 169</span></a>      {
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;moderators DROP canmovetononmodforum;&quot;);
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;moderators ADD canmovetononmodforum char(3) NOT NULL default '' AFTER canmanagethreads;&quot;);
<a name="l173"><span class="linenum"> 173</span></a>      
<a name="l174"><span class="linenum"> 174</span></a>      
<a name="l175"><span class="linenum"> 175</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('csscached', &quot;themes&quot;))
<a name="l176"><span class="linenum"> 176</span></a>      {
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;themes DROP csscached;&quot;);
<a name="l178"><span class="linenum"> 178</span></a>      }
<a name="l179"><span class="linenum"> 179</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;themes ADD csscached bigint(30) NOT NULL default '0'&quot;);
<a name="l180"><span class="linenum"> 180</span></a>      
<a name="l181"><span class="linenum"> 181</span></a>      
<a name="l182"><span class="linenum"> 182</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions SET caneditlangs='yes' WHERE canrunmaint='yes'&quot;);
<a name="l183"><span class="linenum"> 183</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions SET caneditlangs='no' WHERE canrunmaint='no'&quot;);
<a name="l184"><span class="linenum"> 184</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions SET canrundbtools='yes' WHERE canrunmaint='yes'&quot;);
<a name="l185"><span class="linenum"> 185</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminoptions SET canrundbtools='no' WHERE canrunmaint='no'&quot;);
<a name="l186"><span class="linenum"> 186</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET optionscode='select\r\ninstant=Instant Activation\r\nverify=Send Email Verification\r\nrandompass=Send Random Password\r\nadmin=Administrator Activation' WHERE name = 'regtype'&quot;);
<a name="l187"><span class="linenum"> 187</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users SET totalpms='-1', newpms='-1', unreadpms='-1'&quot;);
<a name="l188"><span class="linenum"> 188</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET name='maxmessagelength' WHERE name='messagelength'&quot;);
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('build_create_table_collation')" href="../../_functions/build_create_table_collation.html" onMouseOver="funcPopup(event,'build_create_table_collation')">build_create_table_collation</a>();
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;mycode&quot;);
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;mycode (
<a name="l194"><span class="linenum"> 194</span></a>              cid int unsigned NOT NULL auto_increment,
<a name="l195"><span class="linenum"> 195</span></a>              title varchar(100) NOT NULL default '',
<a name="l196"><span class="linenum"> 196</span></a>              description text NOT NULL,
<a name="l197"><span class="linenum"> 197</span></a>              regex text NOT NULL,
<a name="l198"><span class="linenum"> 198</span></a>              replacement text NOT NULL,
<a name="l199"><span class="linenum"> 199</span></a>              active char(3) NOT NULL default '',
<a name="l200"><span class="linenum"> 200</span></a>              PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a>(cid)
<a name="l201"><span class="linenum"> 201</span></a>          ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;templategroups&quot;);
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (
<a name="l205"><span class="linenum"> 205</span></a>              gid int unsigned NOT NULL auto_increment,
<a name="l206"><span class="linenum"> 206</span></a>              prefix varchar(50) NOT NULL default '',
<a name="l207"><span class="linenum"> 207</span></a>              title varchar(100) NOT NULL default '',
<a name="l208"><span class="linenum"> 208</span></a>              PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a> (gid)
<a name="l209"><span class="linenum"> 209</span></a>              ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('1','calendar','&lt;lang:group_calendar&gt;');&quot;);
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('2','editpost','&lt;lang:group_editpost&gt;');&quot;);
<a name="l213"><span class="linenum"> 213</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('3','email','&lt;lang:group_email&gt;');&quot;);
<a name="l214"><span class="linenum"> 214</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('4','emailsubject','&lt;lang:group_emailsubject&gt;');&quot;);
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('5','forumbit','&lt;lang:group_forumbit&gt;');&quot;);
<a name="l216"><span class="linenum"> 216</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('6','forumjump','&lt;lang:group_forumjump&gt;');&quot;);
<a name="l217"><span class="linenum"> 217</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('7','forumdisplay','&lt;lang:group_forumdisplay&gt;');&quot;);
<a name="l218"><span class="linenum"> 218</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('8','index','&lt;lang:group_index&gt;');&quot;);
<a name="l219"><span class="linenum"> 219</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('9','error','&lt;lang:group_error&gt;');&quot;);
<a name="l220"><span class="linenum"> 220</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('10','memberlist','&lt;lang:group_memberlist&gt;');&quot;);
<a name="l221"><span class="linenum"> 221</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('11','multipage','&lt;lang:group_multipage&gt;');&quot;);
<a name="l222"><span class="linenum"> 222</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('12','private','&lt;lang:group_private&gt;');&quot;);
<a name="l223"><span class="linenum"> 223</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('13','portal','&lt;lang:group_portal&gt;');&quot;);
<a name="l224"><span class="linenum"> 224</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('14','postbit','&lt;lang:group_postbit&gt;');&quot;);
<a name="l225"><span class="linenum"> 225</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('15','redirect','&lt;lang:group_redirect&gt;');&quot;);
<a name="l226"><span class="linenum"> 226</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('16','showthread','&lt;lang:group_showthread&gt;');&quot;);
<a name="l227"><span class="linenum"> 227</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('17','usercp','&lt;lang:group_usercp&gt;');&quot;);
<a name="l228"><span class="linenum"> 228</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('18','online','&lt;lang:group_online&gt;');&quot;);
<a name="l229"><span class="linenum"> 229</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('19','moderation','&lt;lang:group_moderation&gt;');&quot;);
<a name="l230"><span class="linenum"> 230</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('20','nav','&lt;lang:group_nav&gt;');&quot;);
<a name="l231"><span class="linenum"> 231</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('21','search','&lt;lang:group_search&gt;');&quot;);
<a name="l232"><span class="linenum"> 232</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('22','showteam','&lt;lang:group_showteam&gt;');&quot;);
<a name="l233"><span class="linenum"> 233</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('23','reputation','&lt;lang:group_reputation&gt;');&quot;);
<a name="l234"><span class="linenum"> 234</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('24','newthread','&lt;lang:group_newthread&gt;');&quot;);
<a name="l235"><span class="linenum"> 235</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('25','newreply','&lt;lang:group_newreply&gt;');&quot;);
<a name="l236"><span class="linenum"> 236</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;INSERT INTO &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;templategroups (gid,prefix,title) <a class="function" onClick="logFunction('VALUES')" href="../../_functions/values.html" onMouseOver="funcPopup(event,'values')">VALUES</a> ('26','member','&lt;lang:group_member&gt;');&quot;);
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;searchlog&quot;);
<a name="l239"><span class="linenum"> 239</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;searchlog (
<a name="l240"><span class="linenum"> 240</span></a>            sid varchar(32) NOT NULL default '',
<a name="l241"><span class="linenum"> 241</span></a>            uid int unsigned NOT NULL default '0',
<a name="l242"><span class="linenum"> 242</span></a>            dateline bigint(30) NOT NULL default '0',
<a name="l243"><span class="linenum"> 243</span></a>            ipaddress varchar(120) NOT NULL default '',
<a name="l244"><span class="linenum"> 244</span></a>            threads text NOT NULL,
<a name="l245"><span class="linenum"> 245</span></a>            posts text NOT NULL,
<a name="l246"><span class="linenum"> 246</span></a>            searchtype varchar(10) NOT NULL default '',
<a name="l247"><span class="linenum"> 247</span></a>            resulttype varchar(10) NOT NULL default '',
<a name="l248"><span class="linenum"> 248</span></a>            querycache text NOT NULL,
<a name="l249"><span class="linenum"> 249</span></a>            keywords text NOT NULL,
<a name="l250"><span class="linenum"> 250</span></a>            PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a>  (sid)
<a name="l251"><span class="linenum"> 251</span></a>          ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET name='bannedemails' WHERE name='emailban' LIMIT 1&quot;);
<a name="l254"><span class="linenum"> 254</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET name='bannedips' WHERE name='ipban' LIMIT 1&quot;);
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;settings&quot;, &quot;value&quot;, &quot;name='bannedusernames'&quot;);
<a name="l257"><span class="linenum"> 257</span></a>      <a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="../../_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 'sid');
<a name="l258"><span class="linenum"> 258</span></a>      <a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;, <a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a>);
<a name="l259"><span class="linenum"> 259</span></a>      <a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a>);
<a name="l260"><span class="linenum"> 260</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET value='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="../../_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it8051" onMouseOver="hilite(8051)" onMouseOut="lolite()" onClick="logVariable('bannedusernames')" href="../../_variables/bannedusernames.html">$bannedusernames</a>).&quot;' WHERE name='bannedusernames'&quot;);
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;settings&quot;, &quot;value&quot;, &quot;name='bannedemails'&quot;);
<a name="l263"><span class="linenum"> 263</span></a>      <a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="../../_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 'sid');
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;, <a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a>);
<a name="l265"><span class="linenum"> 265</span></a>      <a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a>);
<a name="l266"><span class="linenum"> 266</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;settings SET value='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="../../_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it8052" onMouseOver="hilite(8052)" onMouseOut="lolite()" onClick="logVariable('bannedemails')" href="../../_variables/bannedemails.html">$bannedemails</a>).&quot;' WHERE name='bannedemails'&quot;);
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;settings&quot;, &quot;value&quot;, &quot;name='bannedips'&quot;);
<a name="l269"><span class="linenum"> 269</span></a>      <a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="../../_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 'sid');
<a name="l270"><span class="linenum"> 270</span></a>      <a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;, <a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a>);
<a name="l271"><span class="linenum"> 271</span></a>      <a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a>);
<a name="l272"><span class="linenum"> 272</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="../../_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;settings&quot;, array('value' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="../../_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it8053" onMouseOver="hilite(8053)" onMouseOut="lolite()" onClick="logVariable('bannedips')" href="../../_variables/bannedips.html">$bannedips</a>)), &quot;name='bannedips'&quot;);
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;reputation&quot;);
<a name="l275"><span class="linenum"> 275</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;reputation (
<a name="l276"><span class="linenum"> 276</span></a>        rid int unsigned NOT NULL auto_increment,
<a name="l277"><span class="linenum"> 277</span></a>        uid int unsigned NOT NULL default '0',
<a name="l278"><span class="linenum"> 278</span></a>        adduid int unsigned NOT NULL default '0',
<a name="l279"><span class="linenum"> 279</span></a>        reputation bigint(30) NOT NULL default '0',
<a name="l280"><span class="linenum"> 280</span></a>        dateline bigint(30) NOT NULL default '0',
<a name="l281"><span class="linenum"> 281</span></a>        comments text NOT NULL,
<a name="l282"><span class="linenum"> 282</span></a>        PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a>(rid)
<a name="l283"><span class="linenum"> 283</span></a>      ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;mailqueue&quot;);
<a name="l286"><span class="linenum"> 286</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;mailqueue (
<a name="l287"><span class="linenum"> 287</span></a>          mid int unsigned NOT NULL auto_increment,
<a name="l288"><span class="linenum"> 288</span></a>          mailto varchar(200) NOT NULL,
<a name="l289"><span class="linenum"> 289</span></a>          mailfrom varchar(200) NOT NULL,
<a name="l290"><span class="linenum"> 290</span></a>          subject varchar(200) NOT NULL,
<a name="l291"><span class="linenum"> 291</span></a>          message text NOT NULL,
<a name="l292"><span class="linenum"> 292</span></a>          headers text NOT NULL,
<a name="l293"><span class="linenum"> 293</span></a>          PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a>(mid)
<a name="l294"><span class="linenum"> 294</span></a>      ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="../../_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;users&quot;, array('reputation' =&gt; 0));
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="../../_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;usergroups&quot;, array('reputationpower' =&gt; 1));
<a name="l299"><span class="linenum"> 299</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="../../_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;usergroups&quot;, array('reputationpower' =&gt; 2), &quot;cancp='yes'&quot;);
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('rating', &quot;users&quot;))
<a name="l302"><span class="linenum"> 302</span></a>      {
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users DROP rating;&quot;);
<a name="l304"><span class="linenum"> 304</span></a>      }
<a name="l305"><span class="linenum"> 305</span></a>      
<a name="l306"><span class="linenum"> 306</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('attachmentcount', &quot;threads&quot;))
<a name="l307"><span class="linenum"> 307</span></a>      {
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads DROP attachmentcount;&quot;);
<a name="l309"><span class="linenum"> 309</span></a>      }
<a name="l310"><span class="linenum"> 310</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads ADD attachmentcount int(10) unsigned NOT NULL default '0'&quot;);
<a name="l311"><span class="linenum"> 311</span></a>      
<a name="l312"><span class="linenum"> 312</span></a>      
<a name="l313"><span class="linenum"> 313</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('posthash', &quot;posts&quot;))
<a name="l314"><span class="linenum"> 314</span></a>      {
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts DROP posthash;&quot;);
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts ADD posthash varchar(32) NOT NULL default '' AFTER visible&quot;);
<a name="l318"><span class="linenum"> 318</span></a>      
<a name="l319"><span class="linenum"> 319</span></a>      
<a name="l320"><span class="linenum"> 320</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;attachtypes CHANGE extension extension varchar(10) NOT NULL;&quot;);
<a name="l321"><span class="linenum"> 321</span></a>      
<a name="l322"><span class="linenum"> 322</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('deletetime', &quot;threads&quot;))
<a name="l323"><span class="linenum"> 323</span></a>      {
<a name="l324"><span class="linenum"> 324</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads DROP deletetime;&quot;);
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads ADD deletetime int(10) unsigned NOT NULL default '0' AFTER attachmentcount&quot;);
<a name="l327"><span class="linenum"> 327</span></a>      
<a name="l328"><span class="linenum"> 328</span></a>      
<a name="l329"><span class="linenum"> 329</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('loginattempts', &quot;sessions&quot;))
<a name="l330"><span class="linenum"> 330</span></a>      {
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;sessions DROP loginattempts;&quot;);
<a name="l332"><span class="linenum"> 332</span></a>      }
<a name="l333"><span class="linenum"> 333</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;sessions ADD loginattempts tinyint(2) NOT NULL default '1'&quot;);
<a name="l334"><span class="linenum"> 334</span></a>      
<a name="l335"><span class="linenum"> 335</span></a>      
<a name="l336"><span class="linenum"> 336</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('failedlogin', &quot;sessions&quot;))
<a name="l337"><span class="linenum"> 337</span></a>      {
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;sessions DROP failedlogin;&quot;);
<a name="l339"><span class="linenum"> 339</span></a>      }
<a name="l340"><span class="linenum"> 340</span></a>        <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;sessions ADD failedlogin bigint(30) NOT NULL default '0'&quot;);
<a name="l341"><span class="linenum"> 341</span></a>      
<a name="l342"><span class="linenum"> 342</span></a>      
<a name="l343"><span class="linenum"> 343</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canviewthreads', &quot;usergroups&quot;))
<a name="l344"><span class="linenum"> 344</span></a>      {
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;usergroups DROP canviewthreads;&quot;);
<a name="l346"><span class="linenum"> 346</span></a>      }
<a name="l347"><span class="linenum"> 347</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;usergroups ADD canviewthreads char(3) NOT NULL default '' AFTER canview&quot;);
<a name="l348"><span class="linenum"> 348</span></a>      
<a name="l349"><span class="linenum"> 349</span></a>      
<a name="l350"><span class="linenum"> 350</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('canviewthreads', &quot;forumpermissions&quot;))
<a name="l351"><span class="linenum"> 351</span></a>      {
<a name="l352"><span class="linenum"> 352</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forumpermissions DROP canviewthreads;&quot;);
<a name="l353"><span class="linenum"> 353</span></a>      }
<a name="l354"><span class="linenum"> 354</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forumpermissions ADD canviewthreads char(3) NOT NULL default '' AFTER canview&quot;);
<a name="l355"><span class="linenum"> 355</span></a>      
<a name="l356"><span class="linenum"> 356</span></a>      
<a name="l357"><span class="linenum"> 357</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;captcha&quot;);
<a name="l358"><span class="linenum"> 358</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;captcha (
<a name="l359"><span class="linenum"> 359</span></a>        imagehash varchar(32) NOT NULL default '',
<a name="l360"><span class="linenum"> 360</span></a>        imagestring varchar(8) NOT NULL default '',
<a name="l361"><span class="linenum"> 361</span></a>        dateline bigint(30) NOT NULL default '0'
<a name="l362"><span class="linenum"> 362</span></a>      ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('data', &quot;moderatorlog&quot;))
<a name="l365"><span class="linenum"> 365</span></a>      {
<a name="l366"><span class="linenum"> 366</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;moderatorlog DROP data;&quot;);
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;moderatorlog ADD data text NOT NULL AFTER action;&quot;);
<a name="l369"><span class="linenum"> 369</span></a>      
<a name="l370"><span class="linenum"> 370</span></a>      
<a name="l371"><span class="linenum"> 371</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;adminsessions&quot;);
<a name="l372"><span class="linenum"> 372</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;adminsessions (
<a name="l373"><span class="linenum"> 373</span></a>          sid varchar(32) NOT NULL default '',
<a name="l374"><span class="linenum"> 374</span></a>          uid int unsigned NOT NULL default '0',
<a name="l375"><span class="linenum"> 375</span></a>          loginkey varchar(50) NOT NULL default '',
<a name="l376"><span class="linenum"> 376</span></a>          ip varchar(40) NOT NULL default '',
<a name="l377"><span class="linenum"> 377</span></a>          dateline bigint(30) NOT NULL default '0',
<a name="l378"><span class="linenum"> 378</span></a>          lastactive bigint(30) NOT NULL default '0'
<a name="l379"><span class="linenum"> 379</span></a>      ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(&quot;modtools&quot;);
<a name="l382"><span class="linenum"> 382</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;CREATE TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;modtools (
<a name="l383"><span class="linenum"> 383</span></a>          tid smallint unsigned NOT NULL auto_increment,
<a name="l384"><span class="linenum"> 384</span></a>          name varchar(200) NOT NULL,
<a name="l385"><span class="linenum"> 385</span></a>          description text NOT NULL,
<a name="l386"><span class="linenum"> 386</span></a>          forums text NOT NULL,
<a name="l387"><span class="linenum"> 387</span></a>          type char(1) NOT NULL default '',
<a name="l388"><span class="linenum"> 388</span></a>          postoptions text NOT NULL,
<a name="l389"><span class="linenum"> 389</span></a>          threadoptions text NOT NULL,
<a name="l390"><span class="linenum"> 390</span></a>          PRIMARY <a class="phpfunction" onClick="logFunction('KEY')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">KEY</a> (tid)
<a name="l391"><span class="linenum"> 391</span></a>      ) ENGINE=MyISAM{<a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('collation')" href="../../_variables/collation.html">$collation</a>};&quot;);
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('field_exists')" href="../../_functions/field_exists.html" onMouseOver="funcPopup(event,'field_exists')">field_exists</a>('disporder', &quot;usergroups&quot;))
<a name="l394"><span class="linenum"> 394</span></a>      {
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;usergroups DROP disporder;&quot;);
<a name="l396"><span class="linenum"> 396</span></a>      }
<a name="l397"><span class="linenum"> 397</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;ALTER TABLE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;usergroups ADD disporder smallint(6) NOT NULL default '0' AFTER image&quot;);
<a name="l398"><span class="linenum"> 398</span></a>      
<a name="l399"><span class="linenum"> 399</span></a>      
<a name="l400"><span class="linenum"> 400</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;usergroups SET canviewthreads=canview&quot;);
<a name="l401"><span class="linenum"> 401</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('write_query')" href="../../_functions/write_query.html" onMouseOver="funcPopup(event,'write_query')">write_query</a>(&quot;UPDATE &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="../../_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;forumpermissions SET canviewthreads=canview&quot;);
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>      <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> .= &quot;Done&lt;/p&gt;&quot;;
<a name="l404"><span class="linenum"> 404</span></a>      <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> .= &quot;&lt;p&gt;Click next to continue with the upgrade process.&lt;/p&gt;&quot;;
<a name="l405"><span class="linenum"> 405</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_contents')" href="../../_functions/print_contents.html" onMouseOver="funcPopup(event,'print_contents')">print_contents</a>(<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>);
<a name="l406"><span class="linenum"> 406</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_redoconfig&quot;);
<a name="l407"><span class="linenum"> 407</span></a>  }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  function <a class="function" onClick="logFunction('upgrade5_redoconfig')" href="../../_functions/upgrade5_redoconfig.html" onMouseOver="funcPopup(event,'upgrade5_redoconfig')">upgrade5_redoconfig</a>()
<a name="l410"><span class="linenum"> 410</span></a>  {
<a name="l411"><span class="linenum"> 411</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>, <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>, <a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>;
<a name="l412"><span class="linenum"> 412</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_header')" href="../../_functions/print_header.html" onMouseOver="funcPopup(event,'print_header')">print_header</a>(&quot;Rewriting config.php&quot;);
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>      <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a> = 0;
<a name="l415"><span class="linenum"> 415</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="../../_variables/input.html">input</a>['username'] != '' &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="../../_variables/input.html">input</a>['uid'])
<a name="l416"><span class="linenum"> 416</span></a>      {
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;users&quot;, &quot;uid&quot;, &quot;username='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="../../_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="../../_variables/input.html">input</a>['username']).&quot;'&quot;);
<a name="l418"><span class="linenum"> 418</span></a>          <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="../../_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, &quot;uid&quot;);
<a name="l419"><span class="linenum"> 419</span></a>          if(!<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a>)
<a name="l420"><span class="linenum"> 420</span></a>          {
<a name="l421"><span class="linenum"> 421</span></a>              echo &quot;&lt;p&gt;&lt;span style=\&quot;color: red; font-weight: bold;\&quot;&gt;The username you entered could not be found.&lt;/span&gt;&lt;br /&gt;Please ensure you corectly enter a valid username.&lt;/p&gt;&quot;;
<a name="l422"><span class="linenum"> 422</span></a>          }
<a name="l423"><span class="linenum"> 423</span></a>      }
<a name="l424"><span class="linenum"> 424</span></a>      else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="../../_variables/input.html">input</a>['uid'])
<a name="l425"><span class="linenum"> 425</span></a>      {
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="../../_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="../../_variables/input.html">input</a>['uid'];
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      if(!<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a>)
<a name="l430"><span class="linenum"> 430</span></a>      {
<a name="l431"><span class="linenum"> 431</span></a>          echo &quot;&lt;p&gt;Please enter your primary administrator username. The user ID of the username you enter here will be written in to the new configuration file which will prevent this account from being banned, edited or deleted.&lt;/p&gt;&quot;;
<a name="l432"><span class="linenum"> 432</span></a>          echo &quot;&lt;p&gt;Username:&lt;/p&gt;&quot;;
<a name="l433"><span class="linenum"> 433</span></a>          echo &quot;&lt;p&gt;&lt;input type=\&quot;text\&quot; name=\&quot;username\&quot; value=\&quot;\&quot; /&gt;&quot;;
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_redoconfig&quot;);
<a name="l435"><span class="linenum"> 435</span></a>          exit;
<a name="l436"><span class="linenum"> 436</span></a>      }
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>      <a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('fh')" href="../../_variables/fh.html">$fh</a> = @fopen(<a class="constant" onClick="logConstant('MYBB_ROOT')" href="../../_constants/MYBB_ROOT.html" onMouseOver="constPopup(event,'MYBB_ROOT')">MYBB_ROOT</a>.&quot;inc/config.php&quot;, &quot;w&quot;);
<a name="l439"><span class="linenum"> 439</span></a>      if(!<a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('fh')" href="../../_variables/fh.html">$fh</a>)
<a name="l440"><span class="linenum"> 440</span></a>      {
<a name="l441"><span class="linenum"> 441</span></a>          echo &quot;&lt;p&gt;&lt;span style=\&quot;color: red; font-weight: bold;\&quot;&gt;Unable to open inc/config.php&lt;/span&gt;&lt;br /&gt;Before the upgrade process can continue, you need to changes the permissions of inc/config.php so it is writable.&lt;/p&gt;&lt;input type=\&quot;hidden\&quot; name=\&quot;uid\&quot; value=\&quot;{<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a>}\&quot; /&gt;&quot;;
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_redoconfig&quot;);
<a name="l443"><span class="linenum"> 443</span></a>          exit;
<a name="l444"><span class="linenum"> 444</span></a>      }
<a name="l445"><span class="linenum"> 445</span></a>      
<a name="l446"><span class="linenum"> 446</span></a>      if(!<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['admindir'])
<a name="l447"><span class="linenum"> 447</span></a>      {
<a name="l448"><span class="linenum"> 448</span></a>          <a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['admindir'] = &quot;admin&quot;;
<a name="l449"><span class="linenum"> 449</span></a>      }
<a name="l450"><span class="linenum"> 450</span></a>      
<a name="l451"><span class="linenum"> 451</span></a>      if(!<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['cachestore'])
<a name="l452"><span class="linenum"> 452</span></a>      {
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['cachestore'] = &quot;db&quot;;
<a name="l454"><span class="linenum"> 454</span></a>      }
<a name="l455"><span class="linenum"> 455</span></a>      <a class="var it2948" onMouseOver="hilite(2948)" onMouseOut="lolite()" onClick="logVariable('configdata')" href="../../_variables/configdata.html">$configdata</a> = &quot;&lt;?php
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">/**</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment"> * Database configuration</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment"> */</span>
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['dbtype'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['type']}';
<a name="l461"><span class="linenum"> 461</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['hostname'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['hostname']}';
<a name="l462"><span class="linenum"> 462</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['username'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['username']}';
<a name="l463"><span class="linenum"> 463</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['password'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['password']}';
<a name="l464"><span class="linenum"> 464</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['database']}';
<a name="l465"><span class="linenum"> 465</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['table_prefix'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['database']['table_prefix']}';
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">/**</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment"> * Admin CP directory</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment"> *  For security reasons, it is recommended you</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment"> *  rename your Admin CP directory. You then need</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment"> *  to adjust the value below to point to the</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment"> *  new directory.</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment"> */</span>
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['admin_dir'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['admindir']}';
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">/**</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"> * Hide all Admin CP links</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> *  If you wish to hide all Admin CP links</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> *  on the front end of the board after</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> *  renaming your Admin CP directory, set this</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> *  to 1.</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> */</span>
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['hide_admin_links'] = 0;
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">/**</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> * Data-cache configuration</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment"> *  The data cache is a temporary cache</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment"> *  of the most commonly accessed data in MyBB.</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment"> *  By default, the database is used to store this data.</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment"> *</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment"> *  If you wish to use the file system (cache/ directory)</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment"> *  you can change the value below to 'files' from 'db'.</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment"> */</span>
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['cache_store'] = '{<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['cachestore']}';
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">/**</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment"> * Super Administrators</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment"> *  A comma separated list of user IDs who cannot</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment"> *  be edited, deleted or banned in the Admin CP.</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment"> *  The administrator permissions for these users</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment"> *  cannot be altered either.</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment"> */</span>
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  \<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>['super_admins'] = '{<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="../../_variables/uid.html">$uid</a>}';
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>  ?&quot;.&quot;&gt;&quot;;
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('fh')" href="../../_variables/fh.html">$fh</a>, <a class="var it2948" onMouseOver="hilite(2948)" onMouseOut="lolite()" onClick="logVariable('configdata')" href="../../_variables/configdata.html">$configdata</a>);
<a name="l512"><span class="linenum"> 512</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('fh')" href="../../_variables/fh.html">$fh</a>);
<a name="l513"><span class="linenum"> 513</span></a>      echo &quot;&lt;p&gt;The configuration file has successfully been rewritten.&lt;/p&gt;&quot;;
<a name="l514"><span class="linenum"> 514</span></a>      echo &quot;&lt;p&gt;Click next to continue with the upgrade process.&lt;/p&gt;&quot;;
<a name="l515"><span class="linenum"> 515</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_lastposts&quot;);
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>  }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  function <a class="function" onClick="logFunction('upgrade5_lastposts')" href="../../_functions/upgrade5_lastposts.html" onMouseOver="funcPopup(event,'upgrade5_lastposts')">upgrade5_lastposts</a>()
<a name="l520"><span class="linenum"> 520</span></a>  {
<a name="l521"><span class="linenum"> 521</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>, <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l522"><span class="linenum"> 522</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_header')" href="../../_functions/print_header.html" onMouseOver="funcPopup(event,'print_header')">print_header</a>(&quot;Rebuilding Last Post Columns&quot;);
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>      if(!<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>['tpp'])
<a name="l525"><span class="linenum"> 525</span></a>      {
<a name="l526"><span class="linenum"> 526</span></a>          echo &quot;&lt;p&gt;The next step in the upgrade process involves rebuilding the last post information for every thread in your forum. Below, please enter the number of threads to process per page.&lt;/p&gt;&quot;;
<a name="l527"><span class="linenum"> 527</span></a>          echo &quot;&lt;p&gt;&lt;strong&gt;Threads Per Page:&lt;/strong&gt; &lt;input type=\&quot;text\&quot; size=\&quot;3\&quot; value=\&quot;200\&quot; name=\&quot;tpp\&quot; /&gt;&lt;/p&gt;&quot;;
<a name="l528"><span class="linenum"> 528</span></a>          echo &quot;&lt;p&gt;Once you're ready, press next to begin the rebuild process.&lt;/p&gt;&quot;;
<a name="l529"><span class="linenum"> 529</span></a>          <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_lastposts&quot;);
<a name="l530"><span class="linenum"> 530</span></a>      }
<a name="l531"><span class="linenum"> 531</span></a>      else
<a name="l532"><span class="linenum"> 532</span></a>      {
<a name="l533"><span class="linenum"> 533</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../../inc/functions_rebuild.php.html" onMouseOver="reqPopup(event, 'functions_rebuild.php', '../../inc/functions_rebuild.php')"> MYBB_ROOT.&quot;inc/functions_rebuild.php&quot;</a>;
<a name="l534"><span class="linenum"> 534</span></a>          
<a name="l535"><span class="linenum"> 535</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;threads&quot;, &quot;<a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) as num_threads&quot;, &quot;closed NOT LIKE 'moved|%'&quot;);
<a name="l536"><span class="linenum"> 536</span></a>          <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('num_threads')" href="../../_variables/num_threads.html">$num_threads</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="../../_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 'num_threads');
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it3936" onMouseOver="hilite(3936)" onMouseOut="lolite()" onClick="logVariable('tpp')" href="../../_variables/tpp.html">$tpp</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>['tpp']);
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it303" onMouseOver="hilite(303)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>['start']);
<a name="l539"><span class="linenum"> 539</span></a>          <a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a> = <a class="var it303" onMouseOver="hilite(303)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>+<a class="var it3936" onMouseOver="hilite(3936)" onMouseOut="lolite()" onClick="logVariable('tpp')" href="../../_variables/tpp.html">$tpp</a>;
<a name="l540"><span class="linenum"> 540</span></a>          if(<a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a> &gt; <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('num_threads')" href="../../_variables/num_threads.html">$num_threads</a>)
<a name="l541"><span class="linenum"> 541</span></a>          {
<a name="l542"><span class="linenum"> 542</span></a>              <a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a> = <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('num_threads')" href="../../_variables/num_threads.html">$num_threads</a>;
<a name="l543"><span class="linenum"> 543</span></a>          }
<a name="l544"><span class="linenum"> 544</span></a>          echo &quot;&lt;p&gt;Updating {<a class="var it303" onMouseOver="hilite(303)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>} to {<a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>} of {<a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('num_threads')" href="../../_variables/num_threads.html">$num_threads</a>}...&lt;/p&gt;&quot;;
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;threads&quot;, &quot;tid, firstpost&quot;, &quot;closed NOT LIKE 'moved|%'&quot;, array(&quot;order_by&quot; =&gt; &quot;tid&quot;, &quot;order_dir&quot; =&gt; &quot;asc&quot;, &quot;limit&quot; =&gt; <a class="var it3936" onMouseOver="hilite(3936)" onMouseOut="lolite()" onClick="logVariable('tpp')" href="../../_variables/tpp.html">$tpp</a>, &quot;limit_start&quot; =&gt; <a class="var it303" onMouseOver="hilite(303)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>));
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>          while(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="../../_variables/thread.html">$thread</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="../../_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>))
<a name="l549"><span class="linenum"> 549</span></a>          {
<a name="l550"><span class="linenum"> 550</span></a>              <a class="function" onClick="logFunction('rebuild_thread_counters')" href="../../_functions/rebuild_thread_counters.html" onMouseOver="funcPopup(event,'rebuild_thread_counters')">rebuild_thread_counters</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="../../_variables/thread.html">$thread</a>['tid']);
<a name="l551"><span class="linenum"> 551</span></a>              if(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="../../_variables/thread.html">$thread</a>['firstpost'] == 0)
<a name="l552"><span class="linenum"> 552</span></a>              {
<a name="l553"><span class="linenum"> 553</span></a>                  <a class="function" onClick="logFunction('update_first_post')" href="../../_functions/update_first_post.html" onMouseOver="funcPopup(event,'update_first_post')">update_first_post</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="../../_variables/thread.html">$thread</a>['tid']);
<a name="l554"><span class="linenum"> 554</span></a>              }
<a name="l555"><span class="linenum"> 555</span></a>          }
<a name="l556"><span class="linenum"> 556</span></a>          echo &quot;&lt;p&gt;Done&lt;/p&gt;&quot;;
<a name="l557"><span class="linenum"> 557</span></a>          if(<a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a> &gt;= <a class="var it1673" onMouseOver="hilite(1673)" onMouseOut="lolite()" onClick="logVariable('num_threads')" href="../../_variables/num_threads.html">$num_threads</a>)
<a name="l558"><span class="linenum"> 558</span></a>          {
<a name="l559"><span class="linenum"> 559</span></a>              echo &quot;&lt;p&gt;The rebuild process has completed successfully. Click next to continue with the upgrade.&quot;;
<a name="l560"><span class="linenum"> 560</span></a>              <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_forumlastposts&quot;);
<a name="l561"><span class="linenum"> 561</span></a>          }
<a name="l562"><span class="linenum"> 562</span></a>          else
<a name="l563"><span class="linenum"> 563</span></a>          {
<a name="l564"><span class="linenum"> 564</span></a>              echo &quot;&lt;p&gt;Click Next to continue with the build process.&lt;/p&gt;&quot;;
<a name="l565"><span class="linenum"> 565</span></a>              echo &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;tpp\&quot; value=\&quot;{<a class="var it3936" onMouseOver="hilite(3936)" onMouseOut="lolite()" onClick="logVariable('tpp')" href="../../_variables/tpp.html">$tpp</a>}\&quot; /&gt;&quot;;
<a name="l566"><span class="linenum"> 566</span></a>              echo &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;start\&quot; value=\&quot;{<a class="var it1389" onMouseOver="hilite(1389)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>}\&quot; /&gt;&quot;;
<a name="l567"><span class="linenum"> 567</span></a>              <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_lastposts&quot;);
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>      }
<a name="l570"><span class="linenum"> 570</span></a>  }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>  function <a class="function" onClick="logFunction('upgrade5_forumlastposts')" href="../../_functions/upgrade5_forumlastposts.html" onMouseOver="funcPopup(event,'upgrade5_forumlastposts')">upgrade5_forumlastposts</a>()
<a name="l573"><span class="linenum"> 573</span></a>  {
<a name="l574"><span class="linenum"> 574</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>, <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l575"><span class="linenum"> 575</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_header')" href="../../_functions/print_header.html" onMouseOver="funcPopup(event,'print_header')">print_header</a>(&quot;Rebuilding Forum Last Posts&quot;);
<a name="l576"><span class="linenum"> 576</span></a>      echo &quot;&lt;p&gt;Rebuilding last post information for forums..&lt;/p&gt;&quot;;
<a name="l577"><span class="linenum"> 577</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="../../_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;forums&quot;, &quot;fid&quot;);
<a name="l578"><span class="linenum"> 578</span></a>      while(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="../../_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>))
<a name="l579"><span class="linenum"> 579</span></a>      {
<a name="l580"><span class="linenum"> 580</span></a>          <a class="function" onClick="logFunction('update_forum_lastpost')" href="../../_functions/update_forum_lastpost.html" onMouseOver="funcPopup(event,'update_forum_lastpost')">update_forum_lastpost</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>['fid']);
<a name="l581"><span class="linenum"> 581</span></a>      }
<a name="l582"><span class="linenum"> 582</span></a>      echo &quot;&lt;p&gt;Done&quot;;
<a name="l583"><span class="linenum"> 583</span></a>      echo &quot;&lt;p&gt;Click next to continue with the upgrade process.&lt;/p&gt;&quot;;
<a name="l584"><span class="linenum"> 584</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_indexes&quot;);
<a name="l585"><span class="linenum"> 585</span></a>  }
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>  function <a class="function" onClick="logFunction('upgrade5_indexes')" href="../../_functions/upgrade5_indexes.html" onMouseOver="funcPopup(event,'upgrade5_indexes')">upgrade5_indexes</a>()
<a name="l588"><span class="linenum"> 588</span></a>  {
<a name="l589"><span class="linenum"> 589</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>, <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_header')" href="../../_functions/print_header.html" onMouseOver="funcPopup(event,'print_header')">print_header</a>(&quot;Indexing&quot;);
<a name="l592"><span class="linenum"> 592</span></a>      echo &quot;&lt;p&gt;Checking and creating fulltext database indexes..&lt;/p&gt;&quot;;
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('is_fulltext')" href="../../_functions/is_fulltext.html" onMouseOver="funcPopup(event,'is_fulltext')">is_fulltext</a>(&quot;threads&quot;, &quot;subject&quot;))
<a name="l596"><span class="linenum"> 596</span></a>      {
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_index')" href="../../_functions/drop_index.html" onMouseOver="funcPopup(event,'drop_index')">drop_index</a>(&quot;threads&quot;, &quot;subject&quot;);
<a name="l598"><span class="linenum"> 598</span></a>      }
<a name="l599"><span class="linenum"> 599</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('is_fulltext')" href="../../_functions/is_fulltext.html" onMouseOver="funcPopup(event,'is_fulltext')">is_fulltext</a>(&quot;threads&quot;, &quot;subject_2&quot;))
<a name="l600"><span class="linenum"> 600</span></a>      {
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('drop_index')" href="../../_functions/drop_index.html" onMouseOver="funcPopup(event,'drop_index')">drop_index</a>(&quot;threads&quot;, &quot;subject_2&quot;);
<a name="l602"><span class="linenum"> 602</span></a>      }
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('supports_fulltext')" href="../../_functions/supports_fulltext.html" onMouseOver="funcPopup(event,'supports_fulltext')">supports_fulltext</a>(&quot;threads&quot;))
<a name="l605"><span class="linenum"> 605</span></a>      {
<a name="l606"><span class="linenum"> 606</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('create_fulltext_index')" href="../../_functions/create_fulltext_index.html" onMouseOver="funcPopup(event,'create_fulltext_index')">create_fulltext_index</a>(&quot;threads&quot;, &quot;subject&quot;);
<a name="l607"><span class="linenum"> 607</span></a>      }
<a name="l608"><span class="linenum"> 608</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('supports_fulltext_boolean')" href="../../_functions/supports_fulltext_boolean.html" onMouseOver="funcPopup(event,'supports_fulltext_boolean')">supports_fulltext_boolean</a>(&quot;posts&quot;))
<a name="l609"><span class="linenum"> 609</span></a>      {
<a name="l610"><span class="linenum"> 610</span></a>          if(!<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('is_fulltext')" href="../../_functions/is_fulltext.html" onMouseOver="funcPopup(event,'is_fulltext')">is_fulltext</a>(&quot;posts&quot;, &quot;message&quot;))
<a name="l611"><span class="linenum"> 611</span></a>          {
<a name="l612"><span class="linenum"> 612</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="../../_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('create_fulltext_index')" href="../../_functions/create_fulltext_index.html" onMouseOver="funcPopup(event,'create_fulltext_index')">create_fulltext_index</a>(&quot;posts&quot;, &quot;message&quot;);
<a name="l613"><span class="linenum"> 613</span></a>          }
<a name="l614"><span class="linenum"> 614</span></a>      }
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>      <a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> .= &quot;Click next to continue with the upgrade process.&lt;/p&gt;&quot;;
<a name="l617"><span class="linenum"> 617</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_contents')" href="../../_functions/print_contents.html" onMouseOver="funcPopup(event,'print_contents')">print_contents</a>(<a class="var it367" onMouseOver="hilite(367)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>);
<a name="l618"><span class="linenum"> 618</span></a>      <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('print_footer')" href="../../_functions/print_footer.html" onMouseOver="funcPopup(event,'print_footer')">print_footer</a>(&quot;5_done&quot;);
<a name="l619"><span class="linenum"> 619</span></a>  }
<a name="l620"><span class="linenum"> 620</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'update_forum_lastpost': ['update_forum_lastpost', 'Update the last post information for a specific forum ', [['inc','functions.php',2024]], 5],
'upgrade5_dbchanges': ['upgrade5_dbchanges', '', [['install/resources','upgrade5.php',26]], 0],
'drop_table': ['drop_table', 'Drop an table with the specified table ', [['inc','db_sqlite.php',899],['inc','db_mysql.php',1079],['inc','db_mysqli.php',1075],['inc','db_pgsql.php',1147]], 54],
'rebuild_thread_counters': ['rebuild_thread_counters', 'Completely rebuild the counters for a particular thread (useful if they become out of sync) ', [['inc','functions_rebuild.php',113]], 3],
'print_contents': ['print_contents', '', [['install/resources','output.php',98]], 59],
'build_create_table_collation': ['build_create_table_collation', 'Fetch a character set/collation string for use with CREATE TABLE statements. Uses current DB encoding ', [['inc','db_sqlite.php',1282],['inc','db_mysql.php',1317],['inc','db_mysqli.php',1313],['inc','db_pgsql.php',1406]], 8],
'write_query': ['write_query', 'Execute a write query on the database ', [['inc','db_sqlite.php',264],['inc','db_mysql.php',322],['inc','db_mysqli.php',331],['inc','db_pgsql.php',332]], 1133],
'create_fulltext_index': ['create_fulltext_index', 'Creates a fulltext index on the specified column in the specified table with optional index name. ', [['inc','db_sqlite.php',865],['inc','db_mysql.php',1050],['inc','db_mysqli.php',1052],['inc','db_pgsql.php',1095]], 7],
'drop_index': ['drop_index', 'Drop an index with the specified name from the specified table ', [['inc','db_sqlite.php',877],['inc','db_mysql.php',1065],['inc','db_mysqli.php',1064],['inc','db_pgsql.php',1107]], 2],
'values': ['values', '', [['jscripts','prototype.js',275],['jscripts','prototype.js',1245]], 588],
'upgrade5_lastposts': ['upgrade5_lastposts', '', [['install/resources','upgrade5.php',519]], 0],
'is_fulltext': ['is_fulltext', 'Returns whether or not the table contains a fulltext index. ', [['inc','db_sqlite.php',830],['inc','db_mysql.php',951],['inc','db_mysqli.php',960],['inc','db_pgsql.php',1060]], 7],
'upgrade5_forumlastposts': ['upgrade5_forumlastposts', '', [['install/resources','upgrade5.php',572]], 0],
'upgrade5_indexes': ['upgrade5_indexes', '', [['install/resources','upgrade5.php',587]], 0],
'field_exists': ['field_exists', 'Check if a field exists in a database. ', [['inc','db_sqlite.php',513],['inc','db_mysql.php',631],['inc','db_mysqli.php',639],['inc','db_pgsql.php',635]], 214],
'fetch_field': ['fetch_field', 'Return a specific field from a query. ', [['inc','db_sqlite.php',289],['inc','db_mysql.php',423],['inc','db_mysqli.php',432],['inc','db_pgsql.php',414]], 258],
'supports_fulltext_boolean': ['supports_fulltext_boolean', 'Returns whether or not this database engine supports boolean fulltext matching. ', [['inc','db_sqlite.php',854],['inc','db_mysql.php',1033],['inc','db_mysqli.php',1008],['inc','db_pgsql.php',1084]], 7],
'simple_select': ['simple_select', 'Performs a simple select query. ', [['inc','db_sqlite.php',563],['inc','db_mysql.php',674],['inc','db_mysqli.php',684],['inc','db_pgsql.php',677]], 1010],
'print_header': ['print_header', '', [['install/resources','output.php',20]], 78],
'escape_string': ['escape_string', 'Escape a string ', [['inc','db_sqlite.php',717],['inc','db_pdo.php',207],['inc','db_mysql.php',839],['inc','db_mysqli.php',848],['inc','db_pgsql.php',843]], 901],
'fetch_array': ['fetch_array', 'Return a result array for a query. ', [['inc','db_sqlite.php',276],['inc','db_pdo.php',75],['inc','db_mysql.php',410],['inc','db_mysqli.php',419],['inc','db_pgsql.php',401]], 965],
'update_query': ['update_query', 'Build an update query from an array. ', [['inc','db_sqlite.php',658],['inc','db_mysql.php',763],['inc','db_mysqli.php',778],['inc','db_pgsql.php',779]], 445],
'update_first_post': ['update_first_post', 'Updates the first posts in a thread. ', [['inc','functions.php',4387]], 5],
'print_footer': ['print_footer', '', [['install/resources','output.php',118]], 89],
'supports_fulltext': ['supports_fulltext', 'Returns whether or not this database engine supports fulltext indexing. ', [['inc','db_sqlite.php',842],['inc','db_mysql.php',979],['inc','db_mysqli.php',988],['inc','db_pgsql.php',1072]], 8],
'upgrade5_redoconfig': ['upgrade5_redoconfig', '', [['install/resources','upgrade5.php',409]], 0],
'explode': ['explode', '', [], 340],
'key': ['key', '', [], 173],
'fclose': ['fclose', '', [], 44],
'count': ['count', '', [], 499],
'fwrite': ['fwrite', '', [], 34],
'intval': ['intval', '', [], 1305],
'set_time_limit': ['set_time_limit', '', [], 31],
'implode': ['implode', '', [], 346]};
CLASS_DATA={
};
CONST_DATA={
'MYBB_ROOT': ['MYBB_ROOT', '', [['install','upgrade.php',27],['inc','init.php',48],['install','index.php',29]], 466],
'TABLE_PREFIX': ['TABLE_PREFIX', '', [['inc','functions.php',180],['install','upgrade.php',92],['inc','init.php',138],['install','index.php',2246]], 1488]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Jun  4 13:54:24 2012</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
