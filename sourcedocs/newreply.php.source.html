<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : MyBB 1.6.8 : /newreply.php source</title>
    <link rel="stylesheet" href="sample.css" type="text/css">
    <link rel="stylesheet" href="sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of MyBB 1.6.8</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Jun  4 13:54:24 2012 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='';
subdir='';
filename='newreply.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/</a> -> <a href="newreply.php.html">newreply.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="newreply.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="newreply.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * MyBB 1.6</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * Copyright 2010 MyBB Group, All Rights Reserved</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * Website: http://mybb.com</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * License: http://mybb.com/about/license</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * $Id: newreply.php 5775 2012-04-19 11:03:38Z Tomm $</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> */</span>
<a name="l11"><span class="linenum">  11</span></a>  
<a name="l12"><span class="linenum">  12</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('IN_MYBB')" href="_constants/IN_MYBB.html" onMouseOver="constPopup(event,'IN_MYBB')">IN_MYBB</a>&quot;, 1);
<a name="l13"><span class="linenum">  13</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('THIS_SCRIPT')" href="_constants/THIS_SCRIPT.html" onMouseOver="constPopup(event,'THIS_SCRIPT')">THIS_SCRIPT</a>', '<a class="filename" href="newreply.php.html">newreply.php</a>');
<a name="l14"><span class="linenum">  14</span></a>  
<a name="l15"><span class="linenum">  15</span></a>  <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('templatelist')" href="_variables/templatelist.html">$templatelist</a> = &quot;newreply,previewpost,error_invalidforum,error_invalidthread,redirect_threadposted,loginbox,changeuserbox,posticons,newreply_threadreview,forumrules,attachments,newreply_threadreview_post,forumdisplay_rules,forumdisplay_rules_link&quot;;
<a name="l16"><span class="linenum">  16</span></a>  <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('templatelist')" href="_variables/templatelist.html">$templatelist</a> .= &quot;,smilieinsert,smilieinsert_getmore,codebuttons,post_attachments_new,post_attachments,post_savedraftbutton,newreply_modoptions,newreply_threadreview_more,newreply_disablesmilies,postbit_online,postbit_find,postbit_pm,postbit_www,postbit_email,postbit_reputation,postbit_warninglevel,postbit_author_user,postbit_edit,postbit_quickdelete,postbit_inlinecheck,postbit_posturl,postbit_quote,postbit_multiquote,postbit_report,postbit_ignored,postbit,post_subscription_method&quot;;
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="keyword">require_once</span> <a class="filename" href="global.php.html" onMouseOver="reqPopup(event, 'global.php', 'global.php')"> &quot;./global.php&quot;</a>;
<a name="l19"><span class="linenum">  19</span></a>  <span class="keyword">require_once</span> <a class="filename" href="inc/functions_post.php.html" onMouseOver="reqPopup(event, 'functions_post.php', 'inc/functions_post.php')"> MYBB_ROOT.&quot;inc/functions_post.php&quot;</a>;
<a name="l20"><span class="linenum">  20</span></a>  <span class="keyword">require_once</span> <a class="filename" href="inc/functions_user.php.html" onMouseOver="reqPopup(event, 'functions_user.php', 'inc/functions_user.php')"> MYBB_ROOT.&quot;inc/functions_user.php&quot;</a>;
<a name="l21"><span class="linenum">  21</span></a>  <span class="keyword">require_once</span> <a class="filename" href="inc/class_parser.php.html" onMouseOver="reqPopup(event, 'class_parser.php', 'inc/class_parser.php')"> MYBB_ROOT.&quot;inc/class_parser.php&quot;</a>;
<a name="l22"><span class="linenum">  22</span></a>  <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a> = <span class="keyword">new </span><a class="class" onClick="logClass('postParser')" href="_classes/postparser.html" onMouseOver="classPopup(event,'postparser')">postParser</a>;
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">// Load global language phrases</span>
<a name="l25"><span class="linenum">  25</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('load')" href="_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(&quot;newreply&quot;);
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">// Get the pid and tid and replyto from the input.</span>
<a name="l28"><span class="linenum">  28</span></a>  <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a> = <a class="var it1029" onMouseOver="hilite(1029)" onMouseOut="lolite()" onClick="logVariable('replyto')" href="_variables/replyto.html">$replyto</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'];
<a name="l29"><span class="linenum">  29</span></a>  <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid'];
<a name="l30"><span class="linenum">  30</span></a>  if(isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['replyto']))
<a name="l31"><span class="linenum">  31</span></a>  {
<a name="l32"><span class="linenum">  32</span></a>      <a class="var it1029" onMouseOver="hilite(1029)" onMouseOut="lolite()" onClick="logVariable('replyto')" href="_variables/replyto.html">$replyto</a> = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['replyto']);    
<a name="l33"><span class="linenum">  33</span></a>  }
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">// AJAX quick reply?</span>
<a name="l36"><span class="linenum">  36</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['ajax'])
<a name="l37"><span class="linenum">  37</span></a>  {
<a name="l38"><span class="linenum">  38</span></a>      <a class="function" onClick="logFunction('unset')" href="_functions/unset.html" onMouseOver="funcPopup(event,'unset')">unset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost']);
<a name="l39"><span class="linenum">  39</span></a>  }
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// Edit a draft post.</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="var it1030" onMouseOver="hilite(1030)" onMouseOut="lolite()" onClick="logVariable('draft_pid')" href="_variables/draft_pid.html">$draft_pid</a> = 0;
<a name="l43"><span class="linenum">  43</span></a>  <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('editdraftpid')" href="_variables/editdraftpid.html">$editdraftpid</a> = '';
<a name="l44"><span class="linenum">  44</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot; &amp;&amp; <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>)
<a name="l45"><span class="linenum">  45</span></a>  {
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('options')" href="_variables/options.html">$options</a> = array(
<a name="l47"><span class="linenum">  47</span></a>          &quot;limit&quot; =&gt; 1
<a name="l48"><span class="linenum">  48</span></a>      );
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;*&quot;, &quot;pid='&quot;.<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>.&quot;'&quot;, <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('options')" href="_variables/options.html">$options</a>);
<a name="l50"><span class="linenum">  50</span></a>      <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l51"><span class="linenum">  51</span></a>      if(!<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'])
<a name="l52"><span class="linenum">  52</span></a>      {
<a name="l53"><span class="linenum">  53</span></a>          <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidpost')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidpost.html">error_invalidpost</a>);
<a name="l54"><span class="linenum">  54</span></a>      }
<a name="l55"><span class="linenum">  55</span></a>      else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] != <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['uid'])
<a name="l56"><span class="linenum">  56</span></a>      {
<a name="l57"><span class="linenum">  57</span></a>          <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_post_noperms')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_post_noperms.html">error_post_noperms</a>);
<a name="l58"><span class="linenum">  58</span></a>      }
<a name="l59"><span class="linenum">  59</span></a>      <a class="var it1030" onMouseOver="hilite(1030)" onMouseOut="lolite()" onClick="logVariable('draft_pid')" href="_variables/draft_pid.html">$draft_pid</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'];
<a name="l60"><span class="linenum">  60</span></a>      <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['tid'];
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('editdraftpid')" href="_variables/editdraftpid.html">$editdraftpid</a> = &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;pid\&quot; value=\&quot;<a class="var it1030" onMouseOver="hilite(1030)" onMouseOut="lolite()" onClick="logVariable('draft_pid')" href="_variables/draft_pid.html">$draft_pid</a>\&quot; /&gt;&quot;;
<a name="l62"><span class="linenum">  62</span></a>  }
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">// Set up $thread and $forum for later use.</span>
<a name="l65"><span class="linenum">  65</span></a>  <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('options')" href="_variables/options.html">$options</a> = array(
<a name="l66"><span class="linenum">  66</span></a>      &quot;limit&quot; =&gt; 1
<a name="l67"><span class="linenum">  67</span></a>  );
<a name="l68"><span class="linenum">  68</span></a>  <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;threads&quot;, &quot;*&quot;, &quot;tid='&quot;.<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>.&quot;'&quot;);
<a name="l69"><span class="linenum">  69</span></a>  if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('num_rows')" href="_functions/num_rows.html" onMouseOver="funcPopup(event,'num_rows')">num_rows</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>) == 0)
<a name="l70"><span class="linenum">  70</span></a>  {
<a name="l71"><span class="linenum">  71</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidthread')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidthread.html">error_invalidthread</a>);
<a name="l72"><span class="linenum">  72</span></a>  }
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l75"><span class="linenum">  75</span></a>  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a> = <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['fid'];
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">// Get forum info</span>
<a name="l78"><span class="linenum">  78</span></a>  <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a> = <a class="function" onClick="logFunction('get_forum')" href="_functions/get_forum.html" onMouseOver="funcPopup(event,'get_forum')">get_forum</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>);
<a name="l79"><span class="linenum">  79</span></a>  if(!<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>)
<a name="l80"><span class="linenum">  80</span></a>  {
<a name="l81"><span class="linenum">  81</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidforum')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidforum.html">error_invalidforum</a>);
<a name="l82"><span class="linenum">  82</span></a>  }
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">// Make navigation</span>
<a name="l85"><span class="linenum">  85</span></a>  <a class="function" onClick="logFunction('build_forum_breadcrumb')" href="_functions/build_forum_breadcrumb.html" onMouseOver="funcPopup(event,'build_forum_breadcrumb')">build_forum_breadcrumb</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>);
<a name="l86"><span class="linenum">  86</span></a>  <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject'] = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject']);
<a name="l87"><span class="linenum">  87</span></a>  <a class="function" onClick="logFunction('add_breadcrumb')" href="_functions/add_breadcrumb.html" onMouseOver="funcPopup(event,'add_breadcrumb')">add_breadcrumb</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject'], <a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid']));
<a name="l88"><span class="linenum">  88</span></a>  <a class="function" onClick="logFunction('add_breadcrumb')" href="_functions/add_breadcrumb.html" onMouseOver="funcPopup(event,'add_breadcrumb')">add_breadcrumb</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('nav_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/nav_newreply.html">nav_newreply</a>);
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>  <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a> = <a class="function" onClick="logFunction('forum_permissions')" href="_functions/forum_permissions.html" onMouseOver="funcPopup(event,'forum_permissions')">forum_permissions</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">// See if everything is valid up to here.</span>
<a name="l93"><span class="linenum">  93</span></a>  if(isset(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>) &amp;&amp; ((<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['visible'] == 0 &amp;&amp; !<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>)) || <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['visible'] == 0))
<a name="l94"><span class="linenum">  94</span></a>  {
<a name="l95"><span class="linenum">  95</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidpost')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidpost.html">error_invalidpost</a>);
<a name="l96"><span class="linenum">  96</span></a>  }
<a name="l97"><span class="linenum">  97</span></a>  if((<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['visible'] == 0 &amp;&amp; !<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>)) || <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['visible'] &lt; 0)
<a name="l98"><span class="linenum">  98</span></a>  {
<a name="l99"><span class="linenum">  99</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidthread')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidthread.html">error_invalidthread</a>);
<a name="l100"><span class="linenum"> 100</span></a>  }
<a name="l101"><span class="linenum"> 101</span></a>  if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['open'] == 0 || <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['type'] != &quot;f&quot;)
<a name="l102"><span class="linenum"> 102</span></a>  {
<a name="l103"><span class="linenum"> 103</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_closedinvalidforum')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_closedinvalidforum.html">error_closedinvalidforum</a>);
<a name="l104"><span class="linenum"> 104</span></a>  }
<a name="l105"><span class="linenum"> 105</span></a>  if(<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canview'] == 0 || <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canpostreplys'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['suspendposting'] == 1)
<a name="l106"><span class="linenum"> 106</span></a>  {
<a name="l107"><span class="linenum"> 107</span></a>      <a class="function" onClick="logFunction('error_no_permission')" href="_functions/error_no_permission.html" onMouseOver="funcPopup(event,'error_no_permission')">error_no_permission</a>();
<a name="l108"><span class="linenum"> 108</span></a>  }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  if(<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canonlyviewownthreads'] == 1 &amp;&amp; <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['uid'] != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l111"><span class="linenum"> 111</span></a>  {
<a name="l112"><span class="linenum"> 112</span></a>      <a class="function" onClick="logFunction('error_no_permission')" href="_functions/error_no_permission.html" onMouseOver="funcPopup(event,'error_no_permission')">error_no_permission</a>();
<a name="l113"><span class="linenum"> 113</span></a>  }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">// Coming from quick reply? Set some defaults</span>
<a name="l116"><span class="linenum"> 116</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['method'] == &quot;quickreply&quot;)
<a name="l117"><span class="linenum"> 117</span></a>  {
<a name="l118"><span class="linenum"> 118</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['subscriptionmethod'] == 1)
<a name="l119"><span class="linenum"> 119</span></a>      {
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['subscriptionmethod'] = &quot;none&quot;;
<a name="l121"><span class="linenum"> 121</span></a>      }
<a name="l122"><span class="linenum"> 122</span></a>      else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['subscriptionmethod'] == 2)
<a name="l123"><span class="linenum"> 123</span></a>      {
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['subscriptionmethod'] = &quot;instant&quot;;
<a name="l125"><span class="linenum"> 125</span></a>      }
<a name="l126"><span class="linenum"> 126</span></a>  }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">// Check if this forum is password protected and we have a valid password</span>
<a name="l129"><span class="linenum"> 129</span></a>  <a class="function" onClick="logFunction('check_forum_password')" href="_functions/check_forum_password.html" onMouseOver="funcPopup(event,'check_forum_password')">check_forum_password</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid']);
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bbcodeinserter'] != 0 &amp;&amp; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowmycode'] != 0 &amp;&amp; (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['showcodebuttons'] != 0))
<a name="l132"><span class="linenum"> 132</span></a>  {
<a name="l133"><span class="linenum"> 133</span></a>      <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('codebuttons')" href="_variables/codebuttons.html">$codebuttons</a> = <a class="function" onClick="logFunction('build_mycode_inserter')" href="_functions/build_mycode_inserter.html" onMouseOver="funcPopup(event,'build_mycode_inserter')">build_mycode_inserter</a>();
<a name="l134"><span class="linenum"> 134</span></a>      if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowsmilies'] != 0)
<a name="l135"><span class="linenum"> 135</span></a>      {
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it149" onMouseOver="hilite(149)" onMouseOut="lolite()" onClick="logVariable('smilieinserter')" href="_variables/smilieinserter.html">$smilieinserter</a> = <a class="function" onClick="logFunction('build_clickable_smilies')" href="_functions/build_clickable_smilies.html" onMouseOver="funcPopup(event,'build_clickable_smilies')">build_clickable_smilies</a>();
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">// Display a login box or change user box?</span>
<a name="l141"><span class="linenum"> 141</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] != 0)
<a name="l142"><span class="linenum"> 142</span></a>  {
<a name="l143"><span class="linenum"> 143</span></a>      eval(&quot;\<a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('loginbox')" href="_variables/loginbox.html">$loginbox</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;changeuserbox&quot;).&quot;\&quot;;&quot;);
<a name="l144"><span class="linenum"> 144</span></a>  }
<a name="l145"><span class="linenum"> 145</span></a>  else
<a name="l146"><span class="linenum"> 146</span></a>  {
<a name="l147"><span class="linenum"> 147</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;do_newreply&quot;)
<a name="l148"><span class="linenum"> 148</span></a>      {
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = '';
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>      else
<a name="l152"><span class="linenum"> 152</span></a>      {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username']);
<a name="l154"><span class="linenum"> 154</span></a>      }
<a name="l155"><span class="linenum"> 155</span></a>      eval(&quot;\<a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('loginbox')" href="_variables/loginbox.html">$loginbox</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;loginbox&quot;).&quot;\&quot;;&quot;);
<a name="l156"><span class="linenum"> 156</span></a>  }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">// Check to see if the thread is closed, and if the user is a mod.</span>
<a name="l159"><span class="linenum"> 159</span></a>  if(!<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>, &quot;caneditposts&quot;))
<a name="l160"><span class="linenum"> 160</span></a>  {
<a name="l161"><span class="linenum"> 161</span></a>      if(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['closed'] == 1)
<a name="l162"><span class="linenum"> 162</span></a>      {
<a name="l163"><span class="linenum"> 163</span></a>          <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_threadclosed')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_threadclosed.html">redirect_threadclosed</a>);
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>  }
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">// Is the currently logged in user a moderator of this forum?</span>
<a name="l168"><span class="linenum"> 168</span></a>  if(<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>))
<a name="l169"><span class="linenum"> 169</span></a>  {
<a name="l170"><span class="linenum"> 170</span></a>      <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> = true;
<a name="l171"><span class="linenum"> 171</span></a>  }
<a name="l172"><span class="linenum"> 172</span></a>  else
<a name="l173"><span class="linenum"> 173</span></a>  {
<a name="l174"><span class="linenum"> 174</span></a>      <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> = false;
<a name="l175"><span class="linenum"> 175</span></a>  }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">// No weird actions allowed, show new reply form if no regular action.</span>
<a name="l178"><span class="linenum"> 178</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;do_newreply&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;editdraft&quot;)
<a name="l179"><span class="linenum"> 179</span></a>  {
<a name="l180"><span class="linenum"> 180</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l181"><span class="linenum"> 181</span></a>  }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">// Even if we are previewing, still show the new reply form.</span>
<a name="l184"><span class="linenum"> 184</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'])
<a name="l185"><span class="linenum"> 185</span></a>  {
<a name="l186"><span class="linenum"> 186</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l187"><span class="linenum"> 187</span></a>  }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  if((<a class="function" onClick="logFunction('empty')" href="_functions/empty.html" onMouseOver="funcPopup(event,'empty')">empty</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="_variables/_POST.html">$_POST</a>) &amp;&amp; <a class="function" onClick="logFunction('empty')" href="_functions/empty.html" onMouseOver="funcPopup(event,'empty')">empty</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('_FILES')" href="_variables/_FILES.html">$_FILES</a>)) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['processed'] == '1')
<a name="l190"><span class="linenum"> 190</span></a>  {
<a name="l191"><span class="linenum"> 191</span></a>      <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_cannot_upload_php_post')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_cannot_upload_php_post.html">error_cannot_upload_php_post</a>);
<a name="l192"><span class="linenum"> 192</span></a>  }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['attachmentaid'] &amp;&amp; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['newattachment'] || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['updateattachment'] || (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;do_newreply&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['submit'] &amp;&amp; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('_FILES')" href="_variables/_FILES.html">$_FILES</a>['attachment'])))
<a name="l195"><span class="linenum"> 195</span></a>  {
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">    // Verify incoming POST request</span>
<a name="l197"><span class="linenum"> 197</span></a>      <a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key']);
<a name="l198"><span class="linenum"> 198</span></a>      
<a name="l199"><span class="linenum"> 199</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot; || (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid']))
<a name="l200"><span class="linenum"> 200</span></a>      {
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;pid='{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}'&quot;;
<a name="l202"><span class="linenum"> 202</span></a>      }
<a name="l203"><span class="linenum"> 203</span></a>      else
<a name="l204"><span class="linenum"> 204</span></a>      {
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;posthash='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']).&quot;'&quot;;
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;<a class="phpfunction" onClick="logFunction('COUNT')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(aid) as numattachs&quot;, <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a>);
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('attachcount')" href="_variables/attachcount.html">$attachcount</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>, &quot;numattachs&quot;);
<a name="l209"><span class="linenum"> 209</span></a>      
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">    // If there's an attachment, check it and upload it</span>
<a name="l211"><span class="linenum"> 211</span></a>      if(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('_FILES')" href="_variables/_FILES.html">$_FILES</a>['attachment']['size'] &gt; 0 &amp;&amp; <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canpostattachments'] != 0 &amp;&amp; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxattachments'] == 0 || <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('attachcount')" href="_variables/attachcount.html">$attachcount</a> &lt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxattachments']))
<a name="l212"><span class="linenum"> 212</span></a>      {
<a name="l213"><span class="linenum"> 213</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/functions_upload.php.html" onMouseOver="reqPopup(event, 'functions_upload.php', 'inc/functions_upload.php')"> MYBB_ROOT.&quot;inc/functions_upload.php&quot;</a>;
<a name="l214"><span class="linenum"> 214</span></a>          
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('update_attachment')" href="_variables/update_attachment.html">$update_attachment</a> = false;
<a name="l216"><span class="linenum"> 216</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['updateattachment'])
<a name="l217"><span class="linenum"> 217</span></a>          {
<a name="l218"><span class="linenum"> 218</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('update_attachment')" href="_variables/update_attachment.html">$update_attachment</a> = true;
<a name="l219"><span class="linenum"> 219</span></a>          }
<a name="l220"><span class="linenum"> 220</span></a>          <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('attachedfile')" href="_variables/attachedfile.html">$attachedfile</a> = <a class="function" onClick="logFunction('upload_attachment')" href="_functions/upload_attachment.html" onMouseOver="funcPopup(event,'upload_attachment')">upload_attachment</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('_FILES')" href="_variables/_FILES.html">$_FILES</a>['attachment'], <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('update_attachment')" href="_variables/update_attachment.html">$update_attachment</a>);
<a name="l221"><span class="linenum"> 221</span></a>      }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>      if(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('attachedfile')" href="_variables/attachedfile.html">$attachedfile</a>['error'])
<a name="l224"><span class="linenum"> 224</span></a>      {
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a>[] = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('attachedfile')" href="_variables/attachedfile.html">$attachedfile</a>['error'];
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l227"><span class="linenum"> 227</span></a>      }
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['submit'])
<a name="l230"><span class="linenum"> 230</span></a>      {
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('editdraftpid')" href="_variables/editdraftpid.html">$editdraftpid</a> = &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;pid\&quot; value=\&quot;<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>\&quot; /&gt;&quot;;
<a name="l232"><span class="linenum"> 232</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l233"><span class="linenum"> 233</span></a>      }
<a name="l234"><span class="linenum"> 234</span></a>  }
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">// Remove an attachment.</span>
<a name="l237"><span class="linenum"> 237</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['attachmentaid'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['attachmentact'] == &quot;remove&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash'])
<a name="l238"><span class="linenum"> 238</span></a>  {
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">    // Verify incoming POST request</span>
<a name="l240"><span class="linenum"> 240</span></a>      <a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key']);
<a name="l241"><span class="linenum"> 241</span></a>      
<a name="l242"><span class="linenum"> 242</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/functions_upload.php.html" onMouseOver="reqPopup(event, 'functions_upload.php', 'inc/functions_upload.php')"> MYBB_ROOT.&quot;inc/functions_upload.php&quot;</a>;
<a name="l243"><span class="linenum"> 243</span></a>      <a class="function" onClick="logFunction('remove_attachment')" href="_functions/remove_attachment.html" onMouseOver="funcPopup(event,'remove_attachment')">remove_attachment</a>(0, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['attachmentaid']);
<a name="l244"><span class="linenum"> 244</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['submit'])
<a name="l245"><span class="linenum"> 245</span></a>      {
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('editdraftpid')" href="_variables/editdraftpid.html">$editdraftpid</a> = &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;pid\&quot; value=\&quot;<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>\&quot; /&gt;&quot;;
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">// Setup our posthash for managing attachments.</span>
<a name="l252"><span class="linenum"> 252</span></a>  if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;editdraft&quot;)
<a name="l253"><span class="linenum"> 253</span></a>  {
<a name="l254"><span class="linenum"> 254</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash'] = md5(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'].<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].<a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>());
<a name="l255"><span class="linenum"> 255</span></a>  }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  <a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> = &quot;&quot;;
<a name="l258"><span class="linenum"> 258</span></a>  <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('hide_captcha')" href="_variables/hide_captcha.html">$hide_captcha</a> = false;
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">// Check the maximum posts per day for this user</span>
<a name="l261"><span class="linenum"> 261</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxposts'] &gt; 0 &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>['cancp'] != 1)
<a name="l262"><span class="linenum"> 262</span></a>  {
<a name="l263"><span class="linenum"> 263</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('daycut')" href="_variables/daycut.html">$daycut</a> = <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>-60*60*24;
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;<a class="phpfunction" onClick="logFunction('COUNT')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) AS posts_today&quot;, &quot;uid='{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid']}' AND visible='1' AND dateline&gt;{<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('daycut')" href="_variables/daycut.html">$daycut</a>}&quot;);
<a name="l265"><span class="linenum"> 265</span></a>      <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('post_count')" href="_variables/post_count.html">$post_count</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>, &quot;posts_today&quot;);
<a name="l266"><span class="linenum"> 266</span></a>      if(<a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('post_count')" href="_variables/post_count.html">$post_count</a> &gt;= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxposts'])
<a name="l267"><span class="linenum"> 267</span></a>      {
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_maxposts')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_maxposts.html">error_maxposts</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_maxposts')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_maxposts.html">error_maxposts</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxposts']);
<a name="l269"><span class="linenum"> 269</span></a>          <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_maxposts')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_maxposts.html">error_maxposts</a>);
<a name="l270"><span class="linenum"> 270</span></a>      }
<a name="l271"><span class="linenum"> 271</span></a>  }
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;do_newreply&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('request_method')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/request_method.html">request_method</a> == &quot;post&quot;)
<a name="l274"><span class="linenum"> 274</span></a>  {
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    // Verify incoming POST request</span>
<a name="l276"><span class="linenum"> 276</span></a>      <a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key']);
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="_variables/plugins.html">$plugins</a>-&gt;<a class="function" onClick="logFunction('run_hooks')" href="_functions/run_hooks.html" onMouseOver="funcPopup(event,'run_hooks')">run_hooks</a>(&quot;newreply_do_newreply_start&quot;);
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">    // If this isn't a logged in user, then we need to do some special validation.</span>
<a name="l281"><span class="linenum"> 281</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] == 0)
<a name="l282"><span class="linenum"> 282</span></a>      {
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username']);
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">        // Check if username exists.</span>
<a name="l286"><span class="linenum"> 286</span></a>          if(<a class="function" onClick="logFunction('username_exists')" href="_functions/username_exists.html" onMouseOver="funcPopup(event,'username_exists')">username_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username']))
<a name="l287"><span class="linenum"> 287</span></a>          {
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">            // If it does and no password is given throw back &quot;username is taken&quot;</span>
<a name="l289"><span class="linenum"> 289</span></a>              if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['password'])
<a name="l290"><span class="linenum"> 290</span></a>              {
<a name="l291"><span class="linenum"> 291</span></a>                  <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_usernametaken')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_usernametaken.html">error_usernametaken</a>);
<a name="l292"><span class="linenum"> 292</span></a>              }
<a name="l293"><span class="linenum"> 293</span></a>              
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">            // Checks to make sure the user can login; they haven't had too many tries at logging in.</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">            // Is a fatal call if user has had too many tries</span>
<a name="l296"><span class="linenum"> 296</span></a>              <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('logins')" href="_variables/logins.html">$logins</a> = <a class="function" onClick="logFunction('login_attempt_check')" href="_functions/login_attempt_check.html" onMouseOver="funcPopup(event,'login_attempt_check')">login_attempt_check</a>();        
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">            // If the user specified a password but it is wrong, throw back invalid password.</span>
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a> = <a class="function" onClick="logFunction('validate_password_from_username')" href="_functions/validate_password_from_username.html" onMouseOver="funcPopup(event,'validate_password_from_username')">validate_password_from_username</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['password']);
<a name="l300"><span class="linenum"> 300</span></a>              if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l301"><span class="linenum"> 301</span></a>              {
<a name="l302"><span class="linenum"> 302</span></a>                  <a class="function" onClick="logFunction('my_setcookie')" href="_functions/my_setcookie.html" onMouseOver="funcPopup(event,'my_setcookie')">my_setcookie</a>('loginattempts', <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('logins')" href="_variables/logins.html">$logins</a> + 1);
<a name="l303"><span class="linenum"> 303</span></a>                  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;users&quot;, array('loginattempts' =&gt; 'loginattempts+1'), &quot;LOWER(username) = '&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'])).&quot;'&quot;, 1, true);
<a name="l304"><span class="linenum"> 304</span></a>                  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['failedlogintext'] == 1)
<a name="l305"><span class="linenum"> 305</span></a>                  {
<a name="l306"><span class="linenum"> 306</span></a>                      <a class="var it827" onMouseOver="hilite(827)" onMouseOut="lolite()" onClick="logVariable('login_text')" href="_variables/login_text.html">$login_text</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('failed_login_again')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/failed_login_again.html">failed_login_again</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['failedlogincount'] - <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('logins')" href="_variables/logins.html">$logins</a>);
<a name="l307"><span class="linenum"> 307</span></a>                  }        
<a name="l308"><span class="linenum"> 308</span></a>                  <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_invalidpassword')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_invalidpassword.html">error_invalidpassword</a>.<a class="var it827" onMouseOver="hilite(827)" onMouseOut="lolite()" onClick="logVariable('login_text')" href="_variables/login_text.html">$login_text</a>);
<a name="l309"><span class="linenum"> 309</span></a>              }
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">            // Otherwise they've logged in successfully.</span>
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'] = <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'];
<a name="l313"><span class="linenum"> 313</span></a>              <a class="function" onClick="logFunction('my_setcookie')" href="_functions/my_setcookie.html" onMouseOver="funcPopup(event,'my_setcookie')">my_setcookie</a>(&quot;mybbuser&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].&quot;_&quot;.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['loginkey'], null, true);
<a name="l314"><span class="linenum"> 314</span></a>              <a class="function" onClick="logFunction('my_setcookie')" href="_functions/my_setcookie.html" onMouseOver="funcPopup(event,'my_setcookie')">my_setcookie</a>('loginattempts', 1);
<a name="l315"><span class="linenum"> 315</span></a>              
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">            // Update the session to contain their user ID</span>
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it1040" onMouseOver="hilite(1040)" onMouseOut="lolite()" onClick="logVariable('updated_session')" href="_variables/updated_session.html">$updated_session</a> = array(
<a name="l318"><span class="linenum"> 318</span></a>                  &quot;uid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'],
<a name="l319"><span class="linenum"> 319</span></a>              );
<a name="l320"><span class="linenum"> 320</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;sessions&quot;, <a class="var it1040" onMouseOver="hilite(1040)" onMouseOut="lolite()" onClick="logVariable('updated_session')" href="_variables/updated_session.html">$updated_session</a>, &quot;sid='{<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('session')" href="_variables/session.html">$session</a>-&gt;<a onClick="logVariable('sid')" class="var it8059" onMouseOver="hilite(8059)" onMouseOut="lolite()" href="_variables/sid.html">sid</a>}'&quot;);
<a name="l321"><span class="linenum"> 321</span></a>  
<a name="l322"><span class="linenum"> 322</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('update_query')" href="_functions/update_query.html" onMouseOver="funcPopup(event,'update_query')">update_query</a>(&quot;users&quot;, array(&quot;loginattempts&quot; =&gt; 1), &quot;uid='{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid']}'&quot;);
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">            // Set uid and username</span>
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'];
<a name="l326"><span class="linenum"> 326</span></a>              <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'];
<a name="l327"><span class="linenum"> 327</span></a>              
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">            // Check if this user is allowed to post here</span>
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a> = &amp;<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="_variables/groupscache.html">$groupscache</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['usergroup']];
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a> = <a class="function" onClick="logFunction('forum_permissions')" href="_functions/forum_permissions.html" onMouseOver="funcPopup(event,'forum_permissions')">forum_permissions</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>);
<a name="l331"><span class="linenum"> 331</span></a>              if(<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canview'] == 0 || <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canpostreplys'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['suspendposting'] == 1)
<a name="l332"><span class="linenum"> 332</span></a>              {
<a name="l333"><span class="linenum"> 333</span></a>                  <a class="function" onClick="logFunction('error_no_permission')" href="_functions/error_no_permission.html" onMouseOver="funcPopup(event,'error_no_permission')">error_no_permission</a>();
<a name="l334"><span class="linenum"> 334</span></a>              }
<a name="l335"><span class="linenum"> 335</span></a>          }
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">        // This username does not exist.</span>
<a name="l337"><span class="linenum"> 337</span></a>          else
<a name="l338"><span class="linenum"> 338</span></a>          {
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">            // If they didn't specify a username then give them &quot;Guest&quot;</span>
<a name="l340"><span class="linenum"> 340</span></a>              if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'])
<a name="l341"><span class="linenum"> 341</span></a>              {
<a name="l342"><span class="linenum"> 342</span></a>                  <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('guest')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/guest.html">guest</a>;
<a name="l343"><span class="linenum"> 343</span></a>              }
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">            // Otherwise use the name they specified.</span>
<a name="l345"><span class="linenum"> 345</span></a>              else
<a name="l346"><span class="linenum"> 346</span></a>              {
<a name="l347"><span class="linenum"> 347</span></a>                  <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username']);
<a name="l348"><span class="linenum"> 348</span></a>              }
<a name="l349"><span class="linenum"> 349</span></a>              <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a> = 0;
<a name="l350"><span class="linenum"> 350</span></a>          }
<a name="l351"><span class="linenum"> 351</span></a>      }
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">    // This user is logged in.</span>
<a name="l353"><span class="linenum"> 353</span></a>      else
<a name="l354"><span class="linenum"> 354</span></a>      {
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'];
<a name="l356"><span class="linenum"> 356</span></a>          <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'];
<a name="l357"><span class="linenum"> 357</span></a>      }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">    // Attempt to see if this post is a duplicate or not</span>
<a name="l360"><span class="linenum"> 360</span></a>      if(<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a> &gt; 0)
<a name="l361"><span class="linenum"> 361</span></a>      {
<a name="l362"><span class="linenum"> 362</span></a>          <a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('user_check')" href="_variables/user_check.html">$user_check</a> = &quot;p.uid='{<a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a>}'&quot;;
<a name="l363"><span class="linenum"> 363</span></a>      }
<a name="l364"><span class="linenum"> 364</span></a>      else
<a name="l365"><span class="linenum"> 365</span></a>      {
<a name="l366"><span class="linenum"> 366</span></a>          <a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('user_check')" href="_variables/user_check.html">$user_check</a> = &quot;p.ipaddress='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('session')" href="_variables/session.html">$session</a>-&gt;<a onClick="logVariable('ipaddress')" class="var it8059" onMouseOver="hilite(8059)" onMouseOut="lolite()" href="_variables/ipaddress.html">ipaddress</a>).&quot;'&quot;;
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['savedraft'])
<a name="l369"><span class="linenum"> 369</span></a>      {
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts p&quot;, &quot;p.pid, p.visible&quot;, &quot;{<a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('user_check')" href="_variables/user_check.html">$user_check</a>} AND p.tid='{<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid']}' AND p.subject='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject']).&quot;' AND p.message='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['message']).&quot;' AND p.posthash='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']).&quot;' AND p.visible != '-2'&quot;);
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('duplicate_check')" href="_variables/duplicate_check.html">$duplicate_check</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>, &quot;pid&quot;);
<a name="l372"><span class="linenum"> 372</span></a>          if(<a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('duplicate_check')" href="_variables/duplicate_check.html">$duplicate_check</a>)
<a name="l373"><span class="linenum"> 373</span></a>          {
<a name="l374"><span class="linenum"> 374</span></a>              <a class="function" onClick="logFunction('error')" href="_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('error_post_already_submitted')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/error_post_already_submitted.html">error_post_already_submitted</a>);
<a name="l375"><span class="linenum"> 375</span></a>          }
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">    // Set up posthandler.</span>
<a name="l379"><span class="linenum"> 379</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/datahandlers/post.php.html" onMouseOver="reqPopup(event, 'post.php', 'inc/datahandlers/post.php')"> MYBB_ROOT.&quot;inc/datahandlers/post.php&quot;</a>;
<a name="l380"><span class="linenum"> 380</span></a>      <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PostDataHandler')" href="_classes/postdatahandler.html" onMouseOver="classPopup(event,'postdatahandler')">PostDataHandler</a>(&quot;insert&quot;);
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">    // Set the post data that came from the input to the $post array.</span>
<a name="l383"><span class="linenum"> 383</span></a>      <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = array(
<a name="l384"><span class="linenum"> 384</span></a>          &quot;tid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid'],
<a name="l385"><span class="linenum"> 385</span></a>          &quot;replyto&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['replyto'],
<a name="l386"><span class="linenum"> 386</span></a>          &quot;fid&quot; =&gt; <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['fid'],
<a name="l387"><span class="linenum"> 387</span></a>          &quot;subject&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject'],
<a name="l388"><span class="linenum"> 388</span></a>          &quot;icon&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon'],
<a name="l389"><span class="linenum"> 389</span></a>          &quot;uid&quot; =&gt; <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a>,
<a name="l390"><span class="linenum"> 390</span></a>          &quot;username&quot; =&gt; <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>,
<a name="l391"><span class="linenum"> 391</span></a>          &quot;message&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['message'],
<a name="l392"><span class="linenum"> 392</span></a>          &quot;ipaddress&quot; =&gt; <a class="function" onClick="logFunction('get_ip')" href="_functions/get_ip.html" onMouseOver="funcPopup(event,'get_ip')">get_ip</a>(),
<a name="l393"><span class="linenum"> 393</span></a>          &quot;posthash&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']
<a name="l394"><span class="linenum"> 394</span></a>      );
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l397"><span class="linenum"> 397</span></a>      {
<a name="l398"><span class="linenum"> 398</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'];
<a name="l399"><span class="linenum"> 399</span></a>      }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">    // Are we saving a draft post?</span>
<a name="l402"><span class="linenum"> 402</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['savedraft'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l403"><span class="linenum"> 403</span></a>      {
<a name="l404"><span class="linenum"> 404</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['savedraft'] = 1;
<a name="l405"><span class="linenum"> 405</span></a>      }
<a name="l406"><span class="linenum"> 406</span></a>      else
<a name="l407"><span class="linenum"> 407</span></a>      {
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['savedraft'] = 0;
<a name="l409"><span class="linenum"> 409</span></a>      }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">    // Set up the post options from the input.</span>
<a name="l412"><span class="linenum"> 412</span></a>      <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['options'] = array(
<a name="l413"><span class="linenum"> 413</span></a>          &quot;signature&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['signature'],
<a name="l414"><span class="linenum"> 414</span></a>          &quot;subscriptionmethod&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['subscriptionmethod'],
<a name="l415"><span class="linenum"> 415</span></a>          &quot;disablesmilies&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['disablesmilies']
<a name="l416"><span class="linenum"> 416</span></a>      );
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">    // Apply moderation options if we have them</span>
<a name="l419"><span class="linenum"> 419</span></a>      <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['modoptions'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['modoptions'];
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">    // Now let the post handler do all the hard work.</span>
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('valid_post')" href="_variables/valid_post.html">$valid_post</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('validate_post')" href="_functions/validate_post.html" onMouseOver="funcPopup(event,'validate_post')">validate_post</a>();
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>      <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = array();
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">    // Fetch friendly error messages if this is an invalid post</span>
<a name="l428"><span class="linenum"> 428</span></a>      if(!<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('valid_post')" href="_variables/valid_post.html">$valid_post</a>)
<a name="l429"><span class="linenum"> 429</span></a>      {
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('get_friendly_errors')" href="_functions/get_friendly_errors.html" onMouseOver="funcPopup(event,'get_friendly_errors')">get_friendly_errors</a>();
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>      
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">    // Mark thread as read</span>
<a name="l434"><span class="linenum"> 434</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/functions_indicators.php.html" onMouseOver="reqPopup(event, 'functions_indicators.php', 'inc/functions_indicators.php')"> MYBB_ROOT.&quot;inc/functions_indicators.php&quot;</a>;
<a name="l435"><span class="linenum"> 435</span></a>      <a class="function" onClick="logFunction('mark_thread_read')" href="_functions/mark_thread_read.html" onMouseOver="funcPopup(event,'mark_thread_read')">mark_thread_read</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>, <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>);
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">    // Check captcha image</span>
<a name="l438"><span class="linenum"> 438</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['captchaimage'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l439"><span class="linenum"> 439</span></a>      {
<a name="l440"><span class="linenum"> 440</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/class_captcha.php.html" onMouseOver="reqPopup(event, 'class_captcha.php', 'inc/class_captcha.php')"> MYBB_ROOT.'inc/class_captcha.php'</a>;
<a name="l441"><span class="linenum"> 441</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a> = <span class="keyword">new </span><a class="class" onClick="logClass('captcha')" href="_classes/captcha.html" onMouseOver="classPopup(event,'captcha')">captcha</a>(false, &quot;post_captcha&quot;);
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>          if(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a class="function" onClick="logFunction('validate_captcha')" href="_functions/validate_captcha.html" onMouseOver="funcPopup(event,'validate_captcha')">validate_captcha</a>() == false)
<a name="l444"><span class="linenum"> 444</span></a>          {
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">            // CAPTCHA validation failed</span>
<a name="l446"><span class="linenum"> 446</span></a>              foreach(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a class="function" onClick="logFunction('get_errors')" href="_functions/get_errors.html" onMouseOver="funcPopup(event,'get_errors')">get_errors</a>() as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('error')" href="_variables/error.html">$error</a>)
<a name="l447"><span class="linenum"> 447</span></a>              {
<a name="l448"><span class="linenum"> 448</span></a>                  <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>[] = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('error')" href="_variables/error.html">$error</a>;
<a name="l449"><span class="linenum"> 449</span></a>              }
<a name="l450"><span class="linenum"> 450</span></a>          }
<a name="l451"><span class="linenum"> 451</span></a>          else
<a name="l452"><span class="linenum"> 452</span></a>          {
<a name="l453"><span class="linenum"> 453</span></a>              <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('hide_captcha')" href="_variables/hide_captcha.html">$hide_captcha</a> = true;
<a name="l454"><span class="linenum"> 454</span></a>          }
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['ajax'])
<a name="l457"><span class="linenum"> 457</span></a>          {
<a name="l458"><span class="linenum"> 458</span></a>              if(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a onClick="logVariable('type')" class="var it8061" onMouseOver="hilite(8061)" onMouseOut="lolite()" href="_variables/type.html">type</a> == 1)
<a name="l459"><span class="linenum"> 459</span></a>              {
<a name="l460"><span class="linenum"> 460</span></a>                  <a class="var it1046" onMouseOver="hilite(1046)" onMouseOut="lolite()" onClick="logVariable('randomstr')" href="_variables/randomstr.html">$randomstr</a> = <a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>(5);
<a name="l461"><span class="linenum"> 461</span></a>                  <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a> = md5(<a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>(12));
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>                  <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('imagearray')" href="_variables/imagearray.html">$imagearray</a> = array(
<a name="l464"><span class="linenum"> 464</span></a>                      &quot;imagehash&quot; =&gt; <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>,
<a name="l465"><span class="linenum"> 465</span></a>                      &quot;imagestring&quot; =&gt; <a class="var it1046" onMouseOver="hilite(1046)" onMouseOut="lolite()" onClick="logVariable('randomstr')" href="_variables/randomstr.html">$randomstr</a>,
<a name="l466"><span class="linenum"> 466</span></a>                      &quot;dateline&quot; =&gt; <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>
<a name="l467"><span class="linenum"> 467</span></a>                  );
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>                  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('insert_query')" href="_functions/insert_query.html" onMouseOver="funcPopup(event,'insert_query')">insert_query</a>(&quot;captcha&quot;, <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('imagearray')" href="_variables/imagearray.html">$imagearray</a>);
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/html; charset={<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset']}&quot;);
<a name="l472"><span class="linenum"> 472</span></a>                  echo &quot;&lt;captcha&gt;<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>&quot;;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>                  if(<a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('hide_captcha')" href="_variables/hide_captcha.html">$hide_captcha</a>)
<a name="l475"><span class="linenum"> 475</span></a>                  {
<a name="l476"><span class="linenum"> 476</span></a>                      echo &quot;|<a class="var it1046" onMouseOver="hilite(1046)" onMouseOut="lolite()" onClick="logVariable('randomstr')" href="_variables/randomstr.html">$randomstr</a>&quot;;
<a name="l477"><span class="linenum"> 477</span></a>                  }
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>                  echo &quot;&lt;/captcha&gt;&quot;;
<a name="l480"><span class="linenum"> 480</span></a>              }
<a name="l481"><span class="linenum"> 481</span></a>              else if(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a onClick="logVariable('type')" class="var it8061" onMouseOver="hilite(8061)" onMouseOut="lolite()" href="_variables/type.html">type</a> == 2)
<a name="l482"><span class="linenum"> 482</span></a>              {
<a name="l483"><span class="linenum"> 483</span></a>                  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/html; charset={<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset']}&quot;);
<a name="l484"><span class="linenum"> 484</span></a>                  echo &quot;&lt;captcha&gt;reload&lt;/captcha&gt;&quot;;
<a name="l485"><span class="linenum"> 485</span></a>              }
<a name="l486"><span class="linenum"> 486</span></a>          }
<a name="l487"><span class="linenum"> 487</span></a>      }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">    // One or more errors returned, fetch error list and throw to newreply page</span>
<a name="l490"><span class="linenum"> 490</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>) &gt; 0)
<a name="l491"><span class="linenum"> 491</span></a>      {
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> = <a class="function" onClick="logFunction('inline_error')" href="_functions/inline_error.html" onMouseOver="funcPopup(event,'inline_error')">inline_error</a>(<a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>);
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] = &quot;newreply&quot;;
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>      else
<a name="l496"><span class="linenum"> 496</span></a>      {
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('postinfo')" href="_variables/postinfo.html">$postinfo</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('insert_post')" href="_functions/insert_post.html" onMouseOver="funcPopup(event,'insert_post')">insert_post</a>();
<a name="l498"><span class="linenum"> 498</span></a>          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a> = <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('postinfo')" href="_variables/postinfo.html">$postinfo</a>['pid'];
<a name="l499"><span class="linenum"> 499</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> = <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('postinfo')" href="_variables/postinfo.html">$postinfo</a>['visible'];
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">        // Deciding the fate</span>
<a name="l502"><span class="linenum"> 502</span></a>          if(<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> == -2)
<a name="l503"><span class="linenum"> 503</span></a>          {
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">            // Draft post</span>
<a name="l505"><span class="linenum"> 505</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply.html">redirect_newreply</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('draft_saved')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/draft_saved.html">draft_saved</a>;
<a name="l506"><span class="linenum"> 506</span></a>              <a class="var it180" onMouseOver="hilite(180)" onMouseOut="lolite()" onClick="logVariable('url')" href="_variables/url.html">$url</a> = &quot;usercp.php?action=drafts&quot;;
<a name="l507"><span class="linenum"> 507</span></a>          }
<a name="l508"><span class="linenum"> 508</span></a>          elseif(<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> == 1)
<a name="l509"><span class="linenum"> 509</span></a>          {
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">            // Visible post</span>
<a name="l511"><span class="linenum"> 511</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply.html">redirect_newreply</a> .= <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply_post')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply_post.html">redirect_newreply_post</a>;
<a name="l512"><span class="linenum"> 512</span></a>              <a class="var it180" onMouseOver="hilite(180)" onMouseOut="lolite()" onClick="logVariable('url')" href="_variables/url.html">$url</a> = <a class="function" onClick="logFunction('get_post_link')" href="_functions/get_post_link.html" onMouseOver="funcPopup(event,'get_post_link')">get_post_link</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>, <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>).&quot;#pid{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}&quot;;
<a name="l513"><span class="linenum"> 513</span></a>          }
<a name="l514"><span class="linenum"> 514</span></a>          else
<a name="l515"><span class="linenum"> 515</span></a>          {
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">            // Moderated post</span>
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply.html">redirect_newreply</a> .= '&lt;br /&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply_moderation')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply_moderation.html">redirect_newreply_moderation</a>;
<a name="l518"><span class="linenum"> 518</span></a>              <a class="var it180" onMouseOver="hilite(180)" onMouseOut="lolite()" onClick="logVariable('url')" href="_variables/url.html">$url</a> = <a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>);
<a name="l519"><span class="linenum"> 519</span></a>          }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">        // Mark any quoted posts so they're no longer selected - attempts to maintain those which weren't selected</span>
<a name="l522"><span class="linenum"> 522</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quoted_ids'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>['multiquote'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['multiquote'] != 0)
<a name="l523"><span class="linenum"> 523</span></a>          {
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">            // We quoted all posts - remove the entire cookie</span>
<a name="l525"><span class="linenum"> 525</span></a>              if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quoted_ids'] == &quot;all&quot;)
<a name="l526"><span class="linenum"> 526</span></a>              {
<a name="l527"><span class="linenum"> 527</span></a>                  <a class="function" onClick="logFunction('my_unsetcookie')" href="_functions/my_unsetcookie.html" onMouseOver="funcPopup(event,'my_unsetcookie')">my_unsetcookie</a>(&quot;multiquote&quot;);
<a name="l528"><span class="linenum"> 528</span></a>              }
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">            // Only quoted a few - attempt to remove them from the cookie</span>
<a name="l530"><span class="linenum"> 530</span></a>              else
<a name="l531"><span class="linenum"> 531</span></a>              {
<a name="l532"><span class="linenum"> 532</span></a>                  <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;|&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quoted_ids']);
<a name="l533"><span class="linenum"> 533</span></a>                  <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a> = <a class="phpfunction" onClick="logFunction('explode')" href="_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;|&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>['multiquote']);
<a name="l534"><span class="linenum"> 534</span></a>                  if(<a class="phpfunction" onClick="logFunction('is_array')" href="_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a>))
<a name="l535"><span class="linenum"> 535</span></a>                  {
<a name="l536"><span class="linenum"> 536</span></a>                      foreach(<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a> as <a class="var it359" onMouseOver="hilite(359)" onMouseOut="lolite()" onClick="logVariable('key')" href="_variables/key.html">$key</a> =&gt; <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('quoteid')" href="_variables/quoteid.html">$quoteid</a>)
<a name="l537"><span class="linenum"> 537</span></a>                      {
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">                        // If this ID was quoted, remove it from the multiquote list</span>
<a name="l539"><span class="linenum"> 539</span></a>                          if(<a class="phpfunction" onClick="logFunction('in_array')" href="_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('quoteid')" href="_variables/quoteid.html">$quoteid</a>, <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a>))
<a name="l540"><span class="linenum"> 540</span></a>                          {
<a name="l541"><span class="linenum"> 541</span></a>                              <a class="function" onClick="logFunction('unset')" href="_functions/unset.html" onMouseOver="funcPopup(event,'unset')">unset</a>(<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a>[<a class="var it359" onMouseOver="hilite(359)" onMouseOut="lolite()" onClick="logVariable('key')" href="_variables/key.html">$key</a>]);
<a name="l542"><span class="linenum"> 542</span></a>                          }
<a name="l543"><span class="linenum"> 543</span></a>                      }
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">                    // Still have an array - set the new cookie</span>
<a name="l545"><span class="linenum"> 545</span></a>                      if(<a class="phpfunction" onClick="logFunction('is_array')" href="_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a>))
<a name="l546"><span class="linenum"> 546</span></a>                      {
<a name="l547"><span class="linenum"> 547</span></a>                          <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('new_multiquote')" href="_variables/new_multiquote.html">$new_multiquote</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('multiquote')" href="_variables/multiquote.html">$multiquote</a>);
<a name="l548"><span class="linenum"> 548</span></a>                          <a class="function" onClick="logFunction('my_setcookie')" href="_functions/my_setcookie.html" onMouseOver="funcPopup(event,'my_setcookie')">my_setcookie</a>(&quot;multiquote&quot;, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('new_multiquote')" href="_variables/new_multiquote.html">$new_multiquote</a>);
<a name="l549"><span class="linenum"> 549</span></a>                      }
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">                    // Otherwise, unset it</span>
<a name="l551"><span class="linenum"> 551</span></a>                      else
<a name="l552"><span class="linenum"> 552</span></a>                      {
<a name="l553"><span class="linenum"> 553</span></a>                          <a class="function" onClick="logFunction('my_unsetcookie')" href="_functions/my_unsetcookie.html" onMouseOver="funcPopup(event,'my_unsetcookie')">my_unsetcookie</a>(&quot;multiquote&quot;);
<a name="l554"><span class="linenum"> 554</span></a>                      }
<a name="l555"><span class="linenum"> 555</span></a>                  }
<a name="l556"><span class="linenum"> 556</span></a>              }
<a name="l557"><span class="linenum"> 557</span></a>          }
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="_variables/plugins.html">$plugins</a>-&gt;<a class="function" onClick="logFunction('run_hooks')" href="_functions/run_hooks.html" onMouseOver="funcPopup(event,'run_hooks')">run_hooks</a>(&quot;newreply_do_newreply_end&quot;);
<a name="l560"><span class="linenum"> 560</span></a>          
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">        // This was a post made via the ajax quick reply - we need to do some special things here</span>
<a name="l562"><span class="linenum"> 562</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['ajax'])
<a name="l563"><span class="linenum"> 563</span></a>          {
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">            // Visible post</span>
<a name="l565"><span class="linenum"> 565</span></a>              if(<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> == 1)
<a name="l566"><span class="linenum"> 566</span></a>              {
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">                // Set post counter</span>
<a name="l568"><span class="linenum"> 568</span></a>                  if(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> == true)
<a name="l569"><span class="linenum"> 569</span></a>                  {
<a name="l570"><span class="linenum"> 570</span></a>                      <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a> = <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['replies'] + <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['unapprovedposts'] + 1;
<a name="l571"><span class="linenum"> 571</span></a>                  }
<a name="l572"><span class="linenum"> 572</span></a>                  else
<a name="l573"><span class="linenum"> 573</span></a>                  {
<a name="l574"><span class="linenum"> 574</span></a>                      <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a> = <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['replies'] + 1;
<a name="l575"><span class="linenum"> 575</span></a>                  }
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">                // Was there a new post since we hit the quick reply button?</span>
<a name="l578"><span class="linenum"> 578</span></a>                  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['lastpid'])
<a name="l579"><span class="linenum"> 579</span></a>                  {
<a name="l580"><span class="linenum"> 580</span></a>                      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;pid&quot;, &quot;tid = '{<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>}' AND pid != '{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}'&quot;, array(&quot;order_by&quot; =&gt; &quot;pid&quot;, &quot;order_dir&quot; =&gt; &quot;desc&quot;));
<a name="l581"><span class="linenum"> 581</span></a>                      <a class="var it848" onMouseOver="hilite(848)" onMouseOut="lolite()" onClick="logVariable('new_post')" href="_variables/new_post.html">$new_post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l582"><span class="linenum"> 582</span></a>                      if(<a class="var it848" onMouseOver="hilite(848)" onMouseOut="lolite()" onClick="logVariable('new_post')" href="_variables/new_post.html">$new_post</a>['pid'] != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['lastpid'])
<a name="l583"><span class="linenum"> 583</span></a>                      {
<a name="l584"><span class="linenum"> 584</span></a>                          <a class="function" onClick="logFunction('redirect')" href="_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>, 0, &quot;lastpost&quot;));
<a name="l585"><span class="linenum"> 585</span></a>                      }
<a name="l586"><span class="linenum"> 586</span></a>                  }
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">                // Lets see if this post is on the same page as the one we're viewing or not</span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">                // if it isn't, redirect us</span>
<a name="l590"><span class="linenum"> 590</span></a>                  if(<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="_variables/perpage.html">$perpage</a> &gt; 0 &amp;&amp; ((<a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a>) % <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="_variables/perpage.html">$perpage</a>) == 0)
<a name="l591"><span class="linenum"> 591</span></a>                  {
<a name="l592"><span class="linenum"> 592</span></a>                      <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('post_page')" href="_variables/post_page.html">$post_page</a> = (<a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a>) / <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage'];
<a name="l593"><span class="linenum"> 593</span></a>                  }
<a name="l594"><span class="linenum"> 594</span></a>                  else
<a name="l595"><span class="linenum"> 595</span></a>                  {
<a name="l596"><span class="linenum"> 596</span></a>                      <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('post_page')" href="_variables/post_page.html">$post_page</a> = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>((<a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a>) / <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage']) + 1;
<a name="l597"><span class="linenum"> 597</span></a>                  }
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>                  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['from_page'] &amp;&amp; <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('post_page')" href="_variables/post_page.html">$post_page</a> &gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['from_page'])
<a name="l600"><span class="linenum"> 600</span></a>                  {
<a name="l601"><span class="linenum"> 601</span></a>                      <a class="function" onClick="logFunction('redirect')" href="_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>, 0, &quot;lastpost&quot;));
<a name="l602"><span class="linenum"> 602</span></a>                      exit;
<a name="l603"><span class="linenum"> 603</span></a>                  }
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">                // Return the post HTML and display it inline</span>
<a name="l606"><span class="linenum"> 606</span></a>                  <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('query')" href="_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;
<a name="l607"><span class="linenum"> 607</span></a>                      SELECT u.*, u.username AS userusername, p.*, f.*, eu.username AS editusername
<a name="l608"><span class="linenum"> 608</span></a>                      FROM &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts p
<a name="l609"><span class="linenum"> 609</span></a>                      LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users u <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.uid=p.uid)
<a name="l610"><span class="linenum"> 610</span></a>                      LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;userfields f <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (f.ufid=u.uid)
<a name="l611"><span class="linenum"> 611</span></a>                      LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users eu <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (eu.uid=p.edituid)
<a name="l612"><span class="linenum"> 612</span></a>                      WHERE p.pid='{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}'
<a name="l613"><span class="linenum"> 613</span></a>                  &quot;);
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">                // Now lets fetch all of the attachments for this post</span>
<a name="l617"><span class="linenum"> 617</span></a>                  <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;*&quot;, &quot;pid='{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}'&quot;);
<a name="l618"><span class="linenum"> 618</span></a>                  while(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l619"><span class="linenum"> 619</span></a>                  {
<a name="l620"><span class="linenum"> 620</span></a>                      <a class="var it214" onMouseOver="hilite(214)" onMouseOut="lolite()" onClick="logVariable('attachcache')" href="_variables/attachcache.html">$attachcache</a>[<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['pid']][<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['aid']] = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>;
<a name="l621"><span class="linenum"> 621</span></a>                  }
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">                // Establish altbg - may seem like this is backwards, but build_postbit reverses it</span>
<a name="l624"><span class="linenum"> 624</span></a>                  if((<a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('postcounter')" href="_variables/postcounter.html">$postcounter</a> - <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage']) % 2 != 0)
<a name="l625"><span class="linenum"> 625</span></a>                  {
<a name="l626"><span class="linenum"> 626</span></a>                      <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow1&quot;;
<a name="l627"><span class="linenum"> 627</span></a>                  }
<a name="l628"><span class="linenum"> 628</span></a>                  else
<a name="l629"><span class="linenum"> 629</span></a>                  {
<a name="l630"><span class="linenum"> 630</span></a>                      <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow2&quot;;
<a name="l631"><span class="linenum"> 631</span></a>                  }
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>                  <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a> = &quot;UTF-8&quot;;
<a name="l634"><span class="linenum"> 634</span></a>                  if(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset'])
<a name="l635"><span class="linenum"> 635</span></a>                  {
<a name="l636"><span class="linenum"> 636</span></a>                      <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset'];
<a name="l637"><span class="linenum"> 637</span></a>                  }
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="inc/functions_post.php.html" onMouseOver="reqPopup(event, 'functions_post.php', 'inc/functions_post.php')"> MYBB_ROOT.&quot;inc/functions_post.php&quot;</a>;
<a name="l640"><span class="linenum"> 640</span></a>                  <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'];
<a name="l641"><span class="linenum"> 641</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="function" onClick="logFunction('build_postbit')" href="_functions/build_postbit.html" onMouseOver="funcPopup(event,'build_postbit')">build_postbit</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>                  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l644"><span class="linenum"> 644</span></a>                  echo <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>;
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">                // Build a new posthash incase the user wishes to quick reply again</span>
<a name="l647"><span class="linenum"> 647</span></a>                  <a class="var it1057" onMouseOver="hilite(1057)" onMouseOut="lolite()" onClick="logVariable('new_posthash')" href="_variables/new_posthash.html">$new_posthash</a> = md5(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].<a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>());
<a name="l648"><span class="linenum"> 648</span></a>                  echo &quot;&lt;script type=\&quot;text/javascript\&quot;&gt;\n&quot;; 
<a name="l649"><span class="linenum"> 649</span></a>                  echo &quot;var hash = document.getElementById('posthash'); if(hash) { hash.value = '{<a class="var it1057" onMouseOver="hilite(1057)" onMouseOut="lolite()" onClick="logVariable('new_posthash')" href="_variables/new_posthash.html">$new_posthash</a>}'; }\n&quot;;
<a name="l650"><span class="linenum"> 650</span></a>                  echo &quot;if(typeof(inlineModeration) != 'undefined') { Event.<a class="function" onClick="logFunction('observe')" href="_functions/observe.html" onMouseOver="funcPopup(event,'observe')">observe</a>($('inlinemod_{<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>}'), 'click', inlineModeration.checkItem); }\n&quot;;
<a name="l651"><span class="linenum"> 651</span></a>                  echo &quot;&lt;/script&gt;\n&quot;; 
<a name="l652"><span class="linenum"> 652</span></a>                  exit;                
<a name="l653"><span class="linenum"> 653</span></a>              }
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">            // Post is in the moderation queue</span>
<a name="l655"><span class="linenum"> 655</span></a>              else
<a name="l656"><span class="linenum"> 656</span></a>              {
<a name="l657"><span class="linenum"> 657</span></a>                  <a class="function" onClick="logFunction('redirect')" href="_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>, 0, &quot;lastpost&quot;), <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply_moderation')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply_moderation.html">redirect_newreply_moderation</a>);
<a name="l658"><span class="linenum"> 658</span></a>                  exit;
<a name="l659"><span class="linenum"> 659</span></a>              }
<a name="l660"><span class="linenum"> 660</span></a>          }
<a name="l661"><span class="linenum"> 661</span></a>          else
<a name="l662"><span class="linenum"> 662</span></a>          {
<a name="l663"><span class="linenum"> 663</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply.html">redirect_newreply</a> .= <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_return_thread')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_return_thread.html">redirect_return_thread</a>, <a class="function" onClick="logFunction('get_forum_link')" href="_functions/get_forum_link.html" onMouseOver="funcPopup(event,'get_forum_link')">get_forum_link</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>)); 
<a name="l664"><span class="linenum"> 664</span></a>              <a class="function" onClick="logFunction('redirect')" href="_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it180" onMouseOver="hilite(180)" onMouseOut="lolite()" onClick="logVariable('url')" href="_variables/url.html">$url</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('redirect_newreply')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/redirect_newreply.html">redirect_newreply</a>); 
<a name="l665"><span class="linenum"> 665</span></a>              exit;
<a name="l666"><span class="linenum"> 666</span></a>          }
<a name="l667"><span class="linenum"> 667</span></a>      }
<a name="l668"><span class="linenum"> 668</span></a>  }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">// Show the newreply form.</span>
<a name="l671"><span class="linenum"> 671</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;newreply&quot; || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot;)
<a name="l672"><span class="linenum"> 672</span></a>  {
<a name="l673"><span class="linenum"> 673</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="_variables/plugins.html">$plugins</a>-&gt;<a class="function" onClick="logFunction('run_hooks')" href="_functions/run_hooks.html" onMouseOver="funcPopup(event,'run_hooks')">run_hooks</a>(&quot;newreply_start&quot;);
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>      <a class="var it1059" onMouseOver="hilite(1059)" onMouseOut="lolite()" onClick="logVariable('quote_ids')" href="_variables/quote_ids.html">$quote_ids</a> = '';
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">    // If this isn't a preview and we're not editing a draft, then handle quoted posts</span>
<a name="l677"><span class="linenum"> 677</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'] &amp;&amp; !<a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;editdraft&quot; &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['attachmentaid'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['newattachment'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['updateattachment'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['rem'])
<a name="l678"><span class="linenum"> 678</span></a>      {
<a name="l679"><span class="linenum"> 679</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = '';
<a name="l680"><span class="linenum"> 680</span></a>          <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a> = array();
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">        // Handle multiquote</span>
<a name="l682"><span class="linenum"> 682</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>['multiquote'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['multiquote'] != 0)
<a name="l683"><span class="linenum"> 683</span></a>          {
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it1061" onMouseOver="hilite(1061)" onMouseOut="lolite()" onClick="logVariable('multiquoted')" href="_variables/multiquoted.html">$multiquoted</a> = <a class="phpfunction" onClick="logFunction('explode')" href="_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;|&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>['multiquote']);
<a name="l685"><span class="linenum"> 685</span></a>              foreach(<a class="var it1061" onMouseOver="hilite(1061)" onMouseOut="lolite()" onClick="logVariable('multiquoted')" href="_variables/multiquoted.html">$multiquoted</a> as <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>)
<a name="l686"><span class="linenum"> 686</span></a>              {
<a name="l687"><span class="linenum"> 687</span></a>                  <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>[<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>] = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l688"><span class="linenum"> 688</span></a>              }
<a name="l689"><span class="linenum"> 689</span></a>          }
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">        // Handle incoming 'quote' button</span>
<a name="l691"><span class="linenum"> 691</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l692"><span class="linenum"> 692</span></a>          {
<a name="l693"><span class="linenum"> 693</span></a>              <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid']] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'];
<a name="l694"><span class="linenum"> 694</span></a>          }
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">        // Quoting more than one post - fetch them</span>
<a name="l697"><span class="linenum"> 697</span></a>          if(<a class="phpfunction" onClick="logFunction('count')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>) &gt; 0)
<a name="l698"><span class="linenum"> 698</span></a>          {
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('external_quotes')" href="_variables/external_quotes.html">$external_quotes</a> = 0;
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>);
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a> = <a class="function" onClick="logFunction('get_unviewable_forums')" href="_functions/get_unviewable_forums.html" onMouseOver="funcPopup(event,'get_unviewable_forums')">get_unviewable_forums</a>();
<a name="l702"><span class="linenum"> 702</span></a>              if(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>)
<a name="l703"><span class="linenum"> 703</span></a>              {
<a name="l704"><span class="linenum"> 704</span></a>                  <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a> = &quot;AND t.fid NOT IN ({<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>})&quot;;
<a name="l705"><span class="linenum"> 705</span></a>              }
<a name="l706"><span class="linenum"> 706</span></a>              if(<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>))
<a name="l707"><span class="linenum"> 707</span></a>              {
<a name="l708"><span class="linenum"> 708</span></a>                  <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('visible_where')" href="_variables/visible_where.html">$visible_where</a> = &quot;AND p.visible != 2&quot;;
<a name="l709"><span class="linenum"> 709</span></a>              }
<a name="l710"><span class="linenum"> 710</span></a>              else
<a name="l711"><span class="linenum"> 711</span></a>              {
<a name="l712"><span class="linenum"> 712</span></a>                  <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('visible_where')" href="_variables/visible_where.html">$visible_where</a> = &quot;AND p.visible &gt; 0&quot;;
<a name="l713"><span class="linenum"> 713</span></a>              }
<a name="l714"><span class="linenum"> 714</span></a>              
<a name="l715"><span class="linenum"> 715</span></a>              <span class="keyword">require_once</span> <a class="filename" href="inc/functions_posting.php.html" onMouseOver="reqPopup(event, 'functions_posting.php', 'inc/functions_posting.php')"> MYBB_ROOT.&quot;inc/functions_posting.php&quot;</a>;
<a name="l716"><span class="linenum"> 716</span></a>              <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('query')" href="_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;
<a name="l717"><span class="linenum"> 717</span></a>                  SELECT p.subject, p.message, p.pid, p.tid, p.username, p.dateline, u.username AS userusername
<a name="l718"><span class="linenum"> 718</span></a>                  FROM &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts p
<a name="l719"><span class="linenum"> 719</span></a>                  LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads t <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (t.tid=p.tid)
<a name="l720"><span class="linenum"> 720</span></a>                  LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users u <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.uid=p.uid)
<a name="l721"><span class="linenum"> 721</span></a>                  WHERE p.pid IN (<a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>) {<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>} {<a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('visible_where')" href="_variables/visible_where.html">$visible_where</a>}
<a name="l722"><span class="linenum"> 722</span></a>              &quot;);
<a name="l723"><span class="linenum"> 723</span></a>              <a class="var it1065" onMouseOver="hilite(1065)" onMouseOut="lolite()" onClick="logVariable('load_all')" href="_variables/load_all.html">$load_all</a> = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['load_all_quotes']);
<a name="l724"><span class="linenum"> 724</span></a>              while(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l725"><span class="linenum"> 725</span></a>              {
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">                // Only show messages for the current thread</span>
<a name="l727"><span class="linenum"> 727</span></a>                  if(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['tid'] == <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a> || <a class="var it1065" onMouseOver="hilite(1065)" onMouseOut="lolite()" onClick="logVariable('load_all')" href="_variables/load_all.html">$load_all</a> == 1)
<a name="l728"><span class="linenum"> 728</span></a>                  {
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">                    // If this post was the post for which a quote button was clicked, set the subject</span>
<a name="l730"><span class="linenum"> 730</span></a>                      if(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a> == <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['pid'])
<a name="l731"><span class="linenum"> 731</span></a>                      {
<a name="l732"><span class="linenum"> 732</span></a>                          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('#RE:\s?#i', '', <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['subject']);
<a name="l733"><span class="linenum"> 733</span></a>                          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = &quot;RE: &quot;.<a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>;
<a name="l734"><span class="linenum"> 734</span></a>                      }
<a name="l735"><span class="linenum"> 735</span></a>                      <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> .= <a class="function" onClick="logFunction('parse_quoted_message')" href="_functions/parse_quoted_message.html" onMouseOver="funcPopup(event,'parse_quoted_message')">parse_quoted_message</a>(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>);
<a name="l736"><span class="linenum"> 736</span></a>                      <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a>[] = <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['pid'];
<a name="l737"><span class="linenum"> 737</span></a>                  }
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">                // Count the rest</span>
<a name="l739"><span class="linenum"> 739</span></a>                  else
<a name="l740"><span class="linenum"> 740</span></a>                  {
<a name="l741"><span class="linenum"> 741</span></a>                      ++<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('external_quotes')" href="_variables/external_quotes.html">$external_quotes</a>;
<a name="l742"><span class="linenum"> 742</span></a>                  }
<a name="l743"><span class="linenum"> 743</span></a>              }
<a name="l744"><span class="linenum"> 744</span></a>              if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxquotedepth'] != '0')
<a name="l745"><span class="linenum"> 745</span></a>              {
<a name="l746"><span class="linenum"> 746</span></a>                  <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="function" onClick="logFunction('remove_message_quotes')" href="_functions/remove_message_quotes.html" onMouseOver="funcPopup(event,'remove_message_quotes')">remove_message_quotes</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>);
<a name="l747"><span class="linenum"> 747</span></a>              }
<a name="l748"><span class="linenum"> 748</span></a>              if(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('external_quotes')" href="_variables/external_quotes.html">$external_quotes</a> &gt; 0)
<a name="l749"><span class="linenum"> 749</span></a>              {
<a name="l750"><span class="linenum"> 750</span></a>                  if(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('external_quotes')" href="_variables/external_quotes.html">$external_quotes</a> == 1)
<a name="l751"><span class="linenum"> 751</span></a>                  {
<a name="l752"><span class="linenum"> 752</span></a>                      <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('multiquote_text')" href="_variables/multiquote_text.html">$multiquote_text</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external_one')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external_one.html">multiquote_external_one</a>;
<a name="l753"><span class="linenum"> 753</span></a>                      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('multiquote_deselect')" href="_variables/multiquote_deselect.html">$multiquote_deselect</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external_one_deselect')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external_one_deselect.html">multiquote_external_one_deselect</a>;
<a name="l754"><span class="linenum"> 754</span></a>                      <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('multiquote_quote')" href="_variables/multiquote_quote.html">$multiquote_quote</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external_one_quote')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external_one_quote.html">multiquote_external_one_quote</a>;
<a name="l755"><span class="linenum"> 755</span></a>                  }
<a name="l756"><span class="linenum"> 756</span></a>                  else
<a name="l757"><span class="linenum"> 757</span></a>                  {
<a name="l758"><span class="linenum"> 758</span></a>                      <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('multiquote_text')" href="_variables/multiquote_text.html">$multiquote_text</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external.html">multiquote_external</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('external_quotes')" href="_variables/external_quotes.html">$external_quotes</a>);
<a name="l759"><span class="linenum"> 759</span></a>                      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('multiquote_deselect')" href="_variables/multiquote_deselect.html">$multiquote_deselect</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external_deselect')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external_deselect.html">multiquote_external_deselect</a>;
<a name="l760"><span class="linenum"> 760</span></a>                      <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('multiquote_quote')" href="_variables/multiquote_quote.html">$multiquote_quote</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('multiquote_external_quote')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/multiquote_external_quote.html">multiquote_external_quote</a>;
<a name="l761"><span class="linenum"> 761</span></a>                  }
<a name="l762"><span class="linenum"> 762</span></a>                  eval(&quot;\<a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('multiquote_external')" href="_variables/multiquote_external.html">$multiquote_external</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_multiquote_external&quot;).&quot;\&quot;;&quot;);
<a name="l763"><span class="linenum"> 763</span></a>              }
<a name="l764"><span class="linenum"> 764</span></a>              if(<a class="phpfunction" onClick="logFunction('count')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a>) &gt; 0)
<a name="l765"><span class="linenum"> 765</span></a>              {
<a name="l766"><span class="linenum"> 766</span></a>                  <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;|&quot;, <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a>);
<a name="l767"><span class="linenum"> 767</span></a>              }
<a name="l768"><span class="linenum"> 768</span></a>          }
<a name="l769"><span class="linenum"> 769</span></a>      }
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quoted_ids'])
<a name="l772"><span class="linenum"> 772</span></a>      {
<a name="l773"><span class="linenum"> 773</span></a>          <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('quoted_ids')" href="_variables/quoted_ids.html">$quoted_ids</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quoted_ids']);
<a name="l774"><span class="linenum"> 774</span></a>      }
<a name="l775"><span class="linenum"> 775</span></a>  
<a name="l776"><span class="linenum"> 776</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'])
<a name="l777"><span class="linenum"> 777</span></a>      {
<a name="l778"><span class="linenum"> 778</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('previewmessage')" href="_variables/previewmessage.html">$previewmessage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['message'];
<a name="l779"><span class="linenum"> 779</span></a>      }
<a name="l780"><span class="linenum"> 780</span></a>      if(!<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>)
<a name="l781"><span class="linenum"> 781</span></a>      {
<a name="l782"><span class="linenum"> 782</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['message'];
<a name="l783"><span class="linenum"> 783</span></a>      }
<a name="l784"><span class="linenum"> 784</span></a>      <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>);
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">    // Set up the post options.</span>
<a name="l787"><span class="linenum"> 787</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'] || <a class="var it205" onMouseOver="hilite(205)" onMouseOut="lolite()" onClick="logVariable('maximageserror')" href="_variables/maximageserror.html">$maximageserror</a> || <a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> != '')
<a name="l788"><span class="linenum"> 788</span></a>      {
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions'];
<a name="l790"><span class="linenum"> 790</span></a>          if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['signature'] == 1)
<a name="l791"><span class="linenum"> 791</span></a>          {
<a name="l792"><span class="linenum"> 792</span></a>              <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('postoptionschecked')" href="_variables/postoptionschecked.html">$postoptionschecked</a>['signature'] = &quot; checked=\&quot;checked\&quot;&quot;;
<a name="l793"><span class="linenum"> 793</span></a>          }
<a name="l794"><span class="linenum"> 794</span></a>          if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['subscriptionmethod'] == &quot;none&quot;)
<a name="l795"><span class="linenum"> 795</span></a>          {
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_none')" href="_variables/postoptions_subscriptionmethod_none.html">$postoptions_subscriptionmethod_none</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l797"><span class="linenum"> 797</span></a>          }
<a name="l798"><span class="linenum"> 798</span></a>          else if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['subscriptionmethod'] == &quot;instant&quot;)
<a name="l799"><span class="linenum"> 799</span></a>          {
<a name="l800"><span class="linenum"> 800</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_instant')" href="_variables/postoptions_subscriptionmethod_instant.html">$postoptions_subscriptionmethod_instant</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l801"><span class="linenum"> 801</span></a>          }
<a name="l802"><span class="linenum"> 802</span></a>          else
<a name="l803"><span class="linenum"> 803</span></a>          {
<a name="l804"><span class="linenum"> 804</span></a>              <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_dont')" href="_variables/postoptions_subscriptionmethod_dont.html">$postoptions_subscriptionmethod_dont</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l805"><span class="linenum"> 805</span></a>          }
<a name="l806"><span class="linenum"> 806</span></a>          if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['disablesmilies'] == 1)
<a name="l807"><span class="linenum"> 807</span></a>          {
<a name="l808"><span class="linenum"> 808</span></a>              <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('postoptionschecked')" href="_variables/postoptionschecked.html">$postoptionschecked</a>['disablesmilies'] = &quot; checked=\&quot;checked\&quot;&quot;;
<a name="l809"><span class="linenum"> 809</span></a>          }
<a name="l810"><span class="linenum"> 810</span></a>          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject'];
<a name="l811"><span class="linenum"> 811</span></a>      }
<a name="l812"><span class="linenum"> 812</span></a>      elseif(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l813"><span class="linenum"> 813</span></a>      {
<a name="l814"><span class="linenum"> 814</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message']);
<a name="l815"><span class="linenum"> 815</span></a>          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['subject'];
<a name="l816"><span class="linenum"> 816</span></a>          if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['includesig'] != 0)
<a name="l817"><span class="linenum"> 817</span></a>          {
<a name="l818"><span class="linenum"> 818</span></a>              <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('postoptionschecked')" href="_variables/postoptionschecked.html">$postoptionschecked</a>['signature'] = &quot; checked=\&quot;checked\&quot;&quot;;
<a name="l819"><span class="linenum"> 819</span></a>          }
<a name="l820"><span class="linenum"> 820</span></a>          if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['smilieoff'] == 1)
<a name="l821"><span class="linenum"> 821</span></a>          {
<a name="l822"><span class="linenum"> 822</span></a>              <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('postoptionschecked')" href="_variables/postoptionschecked.html">$postoptionschecked</a>['disablesmilies'] = &quot; checked=\&quot;checked\&quot;&quot;;
<a name="l823"><span class="linenum"> 823</span></a>          }
<a name="l824"><span class="linenum"> 824</span></a>          if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['subscriptionmethod'] == &quot;none&quot;)
<a name="l825"><span class="linenum"> 825</span></a>          {
<a name="l826"><span class="linenum"> 826</span></a>              <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_none')" href="_variables/postoptions_subscriptionmethod_none.html">$postoptions_subscriptionmethod_none</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l827"><span class="linenum"> 827</span></a>          }
<a name="l828"><span class="linenum"> 828</span></a>          else if(<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['subscriptionmethod'] == &quot;instant&quot;)
<a name="l829"><span class="linenum"> 829</span></a>          {
<a name="l830"><span class="linenum"> 830</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_instant')" href="_variables/postoptions_subscriptionmethod_instant.html">$postoptions_subscriptionmethod_instant</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l831"><span class="linenum"> 831</span></a>          }
<a name="l832"><span class="linenum"> 832</span></a>          else
<a name="l833"><span class="linenum"> 833</span></a>          {
<a name="l834"><span class="linenum"> 834</span></a>              <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_dont')" href="_variables/postoptions_subscriptionmethod_dont.html">$postoptions_subscriptionmethod_dont</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l835"><span class="linenum"> 835</span></a>          }
<a name="l836"><span class="linenum"> 836</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon'] = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['icon'];
<a name="l837"><span class="linenum"> 837</span></a>      }
<a name="l838"><span class="linenum"> 838</span></a>      else
<a name="l839"><span class="linenum"> 839</span></a>      {
<a name="l840"><span class="linenum"> 840</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['signature'] != '')
<a name="l841"><span class="linenum"> 841</span></a>          {
<a name="l842"><span class="linenum"> 842</span></a>              <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('postoptionschecked')" href="_variables/postoptionschecked.html">$postoptionschecked</a>['signature'] = &quot; checked=\&quot;checked\&quot;&quot;;
<a name="l843"><span class="linenum"> 843</span></a>          }
<a name="l844"><span class="linenum"> 844</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['subscriptionmethod'] ==  1)
<a name="l845"><span class="linenum"> 845</span></a>          {
<a name="l846"><span class="linenum"> 846</span></a>              <a class="var it211" onMouseOver="hilite(211)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_none')" href="_variables/postoptions_subscriptionmethod_none.html">$postoptions_subscriptionmethod_none</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l847"><span class="linenum"> 847</span></a>          }
<a name="l848"><span class="linenum"> 848</span></a>          else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['subscriptionmethod'] == 2)
<a name="l849"><span class="linenum"> 849</span></a>          {
<a name="l850"><span class="linenum"> 850</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_instant')" href="_variables/postoptions_subscriptionmethod_instant.html">$postoptions_subscriptionmethod_instant</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l851"><span class="linenum"> 851</span></a>          }
<a name="l852"><span class="linenum"> 852</span></a>          else
<a name="l853"><span class="linenum"> 853</span></a>          {
<a name="l854"><span class="linenum"> 854</span></a>              <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('postoptions_subscriptionmethod_dont')" href="_variables/postoptions_subscriptionmethod_dont.html">$postoptions_subscriptionmethod_dont</a> = &quot;checked=\&quot;checked\&quot;&quot;;
<a name="l855"><span class="linenum"> 855</span></a>          }
<a name="l856"><span class="linenum"> 856</span></a>      }
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>      if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowpicons'] != 0)
<a name="l859"><span class="linenum"> 859</span></a>      {
<a name="l860"><span class="linenum"> 860</span></a>          <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('posticons')" href="_variables/posticons.html">$posticons</a> = <a class="function" onClick="logFunction('get_post_icons')" href="_functions/get_post_icons.html" onMouseOver="funcPopup(event,'get_post_icons')">get_post_icons</a>();
<a name="l861"><span class="linenum"> 861</span></a>      }
<a name="l862"><span class="linenum"> 862</span></a>  
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">    // No subject, but post info?</span>
<a name="l864"><span class="linenum"> 864</span></a>      if(!<a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject'])
<a name="l865"><span class="linenum"> 865</span></a>      {
<a name="l866"><span class="linenum"> 866</span></a>          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject'];
<a name="l867"><span class="linenum"> 867</span></a>      }
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">    // Preview a post that was written.</span>
<a name="l870"><span class="linenum"> 870</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'])
<a name="l871"><span class="linenum"> 871</span></a>      {
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">        // Set up posthandler.</span>
<a name="l873"><span class="linenum"> 873</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/datahandlers/post.php.html" onMouseOver="reqPopup(event, 'post.php', 'inc/datahandlers/post.php')"> MYBB_ROOT.&quot;inc/datahandlers/post.php&quot;</a>;
<a name="l874"><span class="linenum"> 874</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PostDataHandler')" href="_classes/postdatahandler.html" onMouseOver="classPopup(event,'postdatahandler')">PostDataHandler</a>(&quot;insert&quot;);
<a name="l875"><span class="linenum"> 875</span></a>      
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">        // Set the post data that came from the input to the $post array.</span>
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = array(
<a name="l878"><span class="linenum"> 878</span></a>              &quot;tid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid'],
<a name="l879"><span class="linenum"> 879</span></a>              &quot;replyto&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['replyto'],
<a name="l880"><span class="linenum"> 880</span></a>              &quot;fid&quot; =&gt; <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['fid'],
<a name="l881"><span class="linenum"> 881</span></a>              &quot;subject&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['subject'],
<a name="l882"><span class="linenum"> 882</span></a>              &quot;icon&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon'],
<a name="l883"><span class="linenum"> 883</span></a>              &quot;uid&quot; =&gt; <a class="var it239" onMouseOver="hilite(239)" onMouseOut="lolite()" onClick="logVariable('uid')" href="_variables/uid.html">$uid</a>,
<a name="l884"><span class="linenum"> 884</span></a>              &quot;username&quot; =&gt; <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>,
<a name="l885"><span class="linenum"> 885</span></a>              &quot;message&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['message'],
<a name="l886"><span class="linenum"> 886</span></a>              &quot;ipaddress&quot; =&gt; <a class="function" onClick="logFunction('get_ip')" href="_functions/get_ip.html" onMouseOver="funcPopup(event,'get_ip')">get_ip</a>(),
<a name="l887"><span class="linenum"> 887</span></a>              &quot;posthash&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']
<a name="l888"><span class="linenum"> 888</span></a>          );
<a name="l889"><span class="linenum"> 889</span></a>      
<a name="l890"><span class="linenum"> 890</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l891"><span class="linenum"> 891</span></a>          {
<a name="l892"><span class="linenum"> 892</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'];
<a name="l893"><span class="linenum"> 893</span></a>          }
<a name="l894"><span class="linenum"> 894</span></a>          
<a name="l895"><span class="linenum"> 895</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l896"><span class="linenum"> 896</span></a>  
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">        // Now let the post handler do all the hard work.</span>
<a name="l898"><span class="linenum"> 898</span></a>          <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('valid_post')" href="_variables/valid_post.html">$valid_post</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('verify_message')" href="_functions/verify_message.html" onMouseOver="funcPopup(event,'verify_message')">verify_message</a>();
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('valid_subject')" href="_variables/valid_subject.html">$valid_subject</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('verify_subject')" href="_functions/verify_subject.html" onMouseOver="funcPopup(event,'verify_subject')">verify_subject</a>();
<a name="l900"><span class="linenum"> 900</span></a>      
<a name="l901"><span class="linenum"> 901</span></a>          <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = array();
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">        // Fetch friendly error messages if this is an invalid post</span>
<a name="l903"><span class="linenum"> 903</span></a>          if(!<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('valid_post')" href="_variables/valid_post.html">$valid_post</a> || !<a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('valid_subject')" href="_variables/valid_subject.html">$valid_subject</a>)
<a name="l904"><span class="linenum"> 904</span></a>          {
<a name="l905"><span class="linenum"> 905</span></a>              <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('get_friendly_errors')" href="_functions/get_friendly_errors.html" onMouseOver="funcPopup(event,'get_friendly_errors')">get_friendly_errors</a>();
<a name="l906"><span class="linenum"> 906</span></a>          }
<a name="l907"><span class="linenum"> 907</span></a>          
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">        // One or more errors returned, fetch error list and throw to newreply page</span>
<a name="l909"><span class="linenum"> 909</span></a>          if(<a class="phpfunction" onClick="logFunction('count')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>) &gt; 0)
<a name="l910"><span class="linenum"> 910</span></a>          {
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> = <a class="function" onClick="logFunction('inline_error')" href="_functions/inline_error.html" onMouseOver="funcPopup(event,'inline_error')">inline_error</a>(<a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>);
<a name="l912"><span class="linenum"> 912</span></a>          }
<a name="l913"><span class="linenum"> 913</span></a>          else
<a name="l914"><span class="linenum"> 914</span></a>          {        
<a name="l915"><span class="linenum"> 915</span></a>              <a class="var it1059" onMouseOver="hilite(1059)" onMouseOut="lolite()" onClick="logVariable('quote_ids')" href="_variables/quote_ids.html">$quote_ids</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['quote_ids']);
<a name="l916"><span class="linenum"> 916</span></a>              if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'])
<a name="l917"><span class="linenum"> 917</span></a>              {
<a name="l918"><span class="linenum"> 918</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('guest')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/guest.html">guest</a>;
<a name="l919"><span class="linenum"> 919</span></a>              }
<a name="l920"><span class="linenum"> 920</span></a>              if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l921"><span class="linenum"> 921</span></a>              {
<a name="l922"><span class="linenum"> 922</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a> = <a class="function" onClick="logFunction('validate_password_from_username')" href="_functions/validate_password_from_username.html" onMouseOver="funcPopup(event,'validate_password_from_username')">validate_password_from_username</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['password']);
<a name="l923"><span class="linenum"> 923</span></a>              }
<a name="l924"><span class="linenum"> 924</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon'] = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon']);
<a name="l925"><span class="linenum"> 925</span></a>              <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('query')" href="_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;
<a name="l926"><span class="linenum"> 926</span></a>                  SELECT u.*, f.*
<a name="l927"><span class="linenum"> 927</span></a>                  FROM &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users u
<a name="l928"><span class="linenum"> 928</span></a>                  LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;userfields f <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (f.ufid=u.uid)
<a name="l929"><span class="linenum"> 929</span></a>                  WHERE u.uid='&quot;.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].&quot;'
<a name="l930"><span class="linenum"> 930</span></a>              &quot;);
<a name="l931"><span class="linenum"> 931</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l932"><span class="linenum"> 932</span></a>              if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] || !<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'])
<a name="l933"><span class="linenum"> 933</span></a>              {
<a name="l934"><span class="linenum"> 934</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['username'];
<a name="l935"><span class="linenum"> 935</span></a>              }
<a name="l936"><span class="linenum"> 936</span></a>              else
<a name="l937"><span class="linenum"> 937</span></a>              {
<a name="l938"><span class="linenum"> 938</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['userusername'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'];
<a name="l939"><span class="linenum"> 939</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'];
<a name="l940"><span class="linenum"> 940</span></a>              }
<a name="l941"><span class="linenum"> 941</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'] = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('previewmessage')" href="_variables/previewmessage.html">$previewmessage</a>;
<a name="l942"><span class="linenum"> 942</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['subject'] = <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>;
<a name="l943"><span class="linenum"> 943</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['icon'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['icon'];
<a name="l944"><span class="linenum"> 944</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['smilieoff'] = <a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('postoptions')" href="_variables/postoptions.html">$postoptions</a>['disablesmilies'];
<a name="l945"><span class="linenum"> 945</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['dateline'] = <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>;
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['includesig'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['postoptions']['signature'];
<a name="l947"><span class="linenum"> 947</span></a>              if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['includesig'] != 1)
<a name="l948"><span class="linenum"> 948</span></a>              {
<a name="l949"><span class="linenum"> 949</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['includesig'] = 0;
<a name="l950"><span class="linenum"> 950</span></a>              }
<a name="l951"><span class="linenum"> 951</span></a>      
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">            // Fetch attachments assigned to this post.</span>
<a name="l953"><span class="linenum"> 953</span></a>              if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l954"><span class="linenum"> 954</span></a>              {
<a name="l955"><span class="linenum"> 955</span></a>                  <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;pid='&quot;.<a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid']).&quot;'&quot;;
<a name="l956"><span class="linenum"> 956</span></a>              }
<a name="l957"><span class="linenum"> 957</span></a>              else
<a name="l958"><span class="linenum"> 958</span></a>              {
<a name="l959"><span class="linenum"> 959</span></a>                  <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;posthash='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']).&quot;'&quot;;
<a name="l960"><span class="linenum"> 960</span></a>              }
<a name="l961"><span class="linenum"> 961</span></a>      
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;*&quot;, <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a>);
<a name="l963"><span class="linenum"> 963</span></a>              while(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l964"><span class="linenum"> 964</span></a>              {
<a name="l965"><span class="linenum"> 965</span></a>                  <a class="var it214" onMouseOver="hilite(214)" onMouseOut="lolite()" onClick="logVariable('attachcache')" href="_variables/attachcache.html">$attachcache</a>[0][<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['aid']] = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>;
<a name="l966"><span class="linenum"> 966</span></a>              }
<a name="l967"><span class="linenum"> 967</span></a>      
<a name="l968"><span class="linenum"> 968</span></a>              <a class="var it215" onMouseOver="hilite(215)" onMouseOut="lolite()" onClick="logVariable('postbit')" href="_variables/postbit.html">$postbit</a> = <a class="function" onClick="logFunction('build_postbit')" href="_functions/build_postbit.html" onMouseOver="funcPopup(event,'build_postbit')">build_postbit</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>, 1);
<a name="l969"><span class="linenum"> 969</span></a>              eval(&quot;\<a class="var it216" onMouseOver="hilite(216)" onMouseOut="lolite()" onClick="logVariable('preview')" href="_variables/preview.html">$preview</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;previewpost&quot;).&quot;\&quot;;&quot;);
<a name="l970"><span class="linenum"> 970</span></a>          }
<a name="l971"><span class="linenum"> 971</span></a>      }
<a name="l972"><span class="linenum"> 972</span></a>      <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>);
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>      if(!<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a> &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'])
<a name="l975"><span class="linenum"> 975</span></a>      {
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = &quot;RE: &quot; . <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject'];
<a name="l977"><span class="linenum"> 977</span></a>      }
<a name="l978"><span class="linenum"> 978</span></a>  
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment">    // Setup a unique posthash for attachment management</span>
<a name="l980"><span class="linenum"> 980</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash'] &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] != &quot;editdraft&quot;)
<a name="l981"><span class="linenum"> 981</span></a>      {
<a name="l982"><span class="linenum"> 982</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('posthash')" href="_variables/posthash.html">$posthash</a> = md5(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].<a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>());
<a name="l983"><span class="linenum"> 983</span></a>      }
<a name="l984"><span class="linenum"> 984</span></a>      elseif(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot;)
<a name="l985"><span class="linenum"> 985</span></a>      {
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">        // Drafts have posthashes, too...</span>
<a name="l987"><span class="linenum"> 987</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('posthash')" href="_variables/posthash.html">$posthash</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['posthash']);
<a name="l988"><span class="linenum"> 988</span></a>      }
<a name="l989"><span class="linenum"> 989</span></a>      else
<a name="l990"><span class="linenum"> 990</span></a>      {
<a name="l991"><span class="linenum"> 991</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('posthash')" href="_variables/posthash.html">$posthash</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['posthash']);
<a name="l992"><span class="linenum"> 992</span></a>      }
<a name="l993"><span class="linenum"> 993</span></a>  
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">    // Do we have attachment errors?</span>
<a name="l995"><span class="linenum"> 995</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a>) &gt; 0)
<a name="l996"><span class="linenum"> 996</span></a>      {
<a name="l997"><span class="linenum"> 997</span></a>          <a class="var it1035" onMouseOver="hilite(1035)" onMouseOut="lolite()" onClick="logVariable('reply_errors')" href="_variables/reply_errors.html">$reply_errors</a> = <a class="function" onClick="logFunction('inline_error')" href="_functions/inline_error.html" onMouseOver="funcPopup(event,'inline_error')">inline_error</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a>);
<a name="l998"><span class="linenum"> 998</span></a>      }
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">    // Get a listing of the current attachments.</span>
<a name="l1001"><span class="linenum">1001</span></a>      if(<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['canpostattachments'] != 0)
<a name="l1002"><span class="linenum">1002</span></a>      {
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('attachcount')" href="_variables/attachcount.html">$attachcount</a> = 0;
<a name="l1004"><span class="linenum">1004</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;editdraft&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l1005"><span class="linenum">1005</span></a>          {
<a name="l1006"><span class="linenum">1006</span></a>              <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;pid='<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('pid')" href="_variables/pid.html">$pid</a>'&quot;;
<a name="l1007"><span class="linenum">1007</span></a>          }
<a name="l1008"><span class="linenum">1008</span></a>          else
<a name="l1009"><span class="linenum">1009</span></a>          {
<a name="l1010"><span class="linenum">1010</span></a>              <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a> = &quot;posthash='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('posthash')" href="_variables/posthash.html">$posthash</a>).&quot;'&quot;;
<a name="l1011"><span class="linenum">1011</span></a>          }
<a name="l1012"><span class="linenum">1012</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="_variables/attachments.html">$attachments</a> = '';
<a name="l1013"><span class="linenum">1013</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;*&quot;, <a class="var it1034" onMouseOver="hilite(1034)" onMouseOut="lolite()" onClick="logVariable('attachwhere')" href="_variables/attachwhere.html">$attachwhere</a>);
<a name="l1014"><span class="linenum">1014</span></a>          while(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l1015"><span class="linenum">1015</span></a>          {
<a name="l1016"><span class="linenum">1016</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['size'] = <a class="function" onClick="logFunction('get_friendly_size')" href="_functions/get_friendly_size.html" onMouseOver="funcPopup(event,'get_friendly_size')">get_friendly_size</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['filesize']);
<a name="l1017"><span class="linenum">1017</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['icon'] = <a class="function" onClick="logFunction('get_attachment_icon')" href="_functions/get_attachment_icon.html" onMouseOver="funcPopup(event,'get_attachment_icon')">get_attachment_icon</a>(<a class="function" onClick="logFunction('get_extension')" href="_functions/get_extension.html" onMouseOver="funcPopup(event,'get_extension')">get_extension</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['filename']));
<a name="l1018"><span class="linenum">1018</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['filename'] = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['filename']);
<a name="l1019"><span class="linenum">1019</span></a>              
<a name="l1020"><span class="linenum">1020</span></a>              if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bbcodeinserter'] != 0 &amp;&amp; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowmycode'] != 0 &amp;&amp; (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['showcodebuttons'] != 0))
<a name="l1021"><span class="linenum">1021</span></a>              {
<a name="l1022"><span class="linenum">1022</span></a>                  eval(&quot;\<a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('postinsert')" href="_variables/postinsert.html">$postinsert</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_attachments_attachment_postinsert&quot;).&quot;\&quot;;&quot;);
<a name="l1023"><span class="linenum">1023</span></a>              }
<a name="l1024"><span class="linenum">1024</span></a>              <a class="var it194" onMouseOver="hilite(194)" onMouseOut="lolite()" onClick="logVariable('attach_mod_options')" href="_variables/attach_mod_options.html">$attach_mod_options</a> = '';
<a name="l1025"><span class="linenum">1025</span></a>              if(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['visible'] != 1)
<a name="l1026"><span class="linenum">1026</span></a>              {
<a name="l1027"><span class="linenum">1027</span></a>                  eval(&quot;\<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="_variables/attachments.html">$attachments</a> .= \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_attachments_attachment_unapproved&quot;).&quot;\&quot;;&quot;);
<a name="l1028"><span class="linenum">1028</span></a>              }
<a name="l1029"><span class="linenum">1029</span></a>              else
<a name="l1030"><span class="linenum">1030</span></a>              {
<a name="l1031"><span class="linenum">1031</span></a>                  eval(&quot;\<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="_variables/attachments.html">$attachments</a> .= \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_attachments_attachment&quot;).&quot;\&quot;;&quot;);
<a name="l1032"><span class="linenum">1032</span></a>              }
<a name="l1033"><span class="linenum">1033</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('attachcount')" href="_variables/attachcount.html">$attachcount</a>++;
<a name="l1034"><span class="linenum">1034</span></a>          }
<a name="l1035"><span class="linenum">1035</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;SUM(filesize) AS ausage&quot;, &quot;uid='&quot;.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'].&quot;'&quot;);
<a name="l1036"><span class="linenum">1036</span></a>          <a class="var it196" onMouseOver="hilite(196)" onMouseOut="lolite()" onClick="logVariable('usage')" href="_variables/usage.html">$usage</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l1037"><span class="linenum">1037</span></a>          if(<a class="var it196" onMouseOver="hilite(196)" onMouseOut="lolite()" onClick="logVariable('usage')" href="_variables/usage.html">$usage</a>['ausage'] &gt; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>['attachquota']*1024) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>['attachquota'] != 0)
<a name="l1038"><span class="linenum">1038</span></a>          {
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('noshowattach')" href="_variables/noshowattach.html">$noshowattach</a> = 1;
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>['attachquota'] == 0)
<a name="l1042"><span class="linenum">1042</span></a>          {
<a name="l1043"><span class="linenum">1043</span></a>              <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('friendlyquota')" href="_variables/friendlyquota.html">$friendlyquota</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('unlimited')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/unlimited.html">unlimited</a>;
<a name="l1044"><span class="linenum">1044</span></a>          }
<a name="l1045"><span class="linenum">1045</span></a>          else
<a name="l1046"><span class="linenum">1046</span></a>          {
<a name="l1047"><span class="linenum">1047</span></a>              <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('friendlyquota')" href="_variables/friendlyquota.html">$friendlyquota</a> = <a class="function" onClick="logFunction('get_friendly_size')" href="_functions/get_friendly_size.html" onMouseOver="funcPopup(event,'get_friendly_size')">get_friendly_size</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>['attachquota']*1024);
<a name="l1048"><span class="linenum">1048</span></a>          }
<a name="l1049"><span class="linenum">1049</span></a>          <a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('friendlyusage')" href="_variables/friendlyusage.html">$friendlyusage</a> = <a class="function" onClick="logFunction('get_friendly_size')" href="_functions/get_friendly_size.html" onMouseOver="funcPopup(event,'get_friendly_size')">get_friendly_size</a>(<a class="var it196" onMouseOver="hilite(196)" onMouseOut="lolite()" onClick="logVariable('usage')" href="_variables/usage.html">$usage</a>['ausage']);
<a name="l1050"><span class="linenum">1050</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('attach_quota')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/attach_quota.html">attach_quota</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('attach_quota')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/attach_quota.html">attach_quota</a>, <a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('friendlyusage')" href="_variables/friendlyusage.html">$friendlyusage</a>, <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('friendlyquota')" href="_variables/friendlyquota.html">$friendlyquota</a>);
<a name="l1051"><span class="linenum">1051</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxattachments'] == 0 || (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxattachments'] != 0 &amp;&amp; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('attachcount')" href="_variables/attachcount.html">$attachcount</a> &lt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxattachments']) &amp;&amp; !<a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('noshowattach')" href="_variables/noshowattach.html">$noshowattach</a>)
<a name="l1052"><span class="linenum">1052</span></a>          {
<a name="l1053"><span class="linenum">1053</span></a>              eval(&quot;\<a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('newattach')" href="_variables/newattach.html">$newattach</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_attachments_new&quot;).&quot;\&quot;;&quot;);
<a name="l1054"><span class="linenum">1054</span></a>          }
<a name="l1055"><span class="linenum">1055</span></a>          eval(&quot;\<a class="var it204" onMouseOver="hilite(204)" onMouseOut="lolite()" onClick="logVariable('attachbox')" href="_variables/attachbox.html">$attachbox</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_attachments&quot;).&quot;\&quot;;&quot;);
<a name="l1056"><span class="linenum">1056</span></a>      }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">    // If the user is logged in, provide a save draft button.</span>
<a name="l1059"><span class="linenum">1059</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l1060"><span class="linenum">1060</span></a>      {
<a name="l1061"><span class="linenum">1061</span></a>          eval(&quot;\<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('savedraftbutton')" href="_variables/savedraftbutton.html">$savedraftbutton</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_savedraftbutton&quot;, 1, 0).&quot;\&quot;;&quot;);
<a name="l1062"><span class="linenum">1062</span></a>      }
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">    // Show captcha image for guests if enabled</span>
<a name="l1065"><span class="linenum">1065</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['captchaimage'] &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'])
<a name="l1066"><span class="linenum">1066</span></a>      {
<a name="l1067"><span class="linenum">1067</span></a>          <a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('correct')" href="_variables/correct.html">$correct</a> = false;
<a name="l1068"><span class="linenum">1068</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/class_captcha.php.html" onMouseOver="reqPopup(event, 'class_captcha.php', 'inc/class_captcha.php')"> MYBB_ROOT.'inc/class_captcha.php'</a>;
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['previewpost'] || <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('hide_captcha')" href="_variables/hide_captcha.html">$hide_captcha</a> == true)
<a name="l1071"><span class="linenum">1071</span></a>          {
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">            // If previewing a post - check their current captcha input - if correct, hide the captcha input area</span>
<a name="l1073"><span class="linenum">1073</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a> = <span class="keyword">new </span><a class="class" onClick="logClass('captcha')" href="_classes/captcha.html" onMouseOver="classPopup(event,'captcha')">captcha</a>;
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>              if(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a class="function" onClick="logFunction('validate_captcha')" href="_functions/validate_captcha.html" onMouseOver="funcPopup(event,'validate_captcha')">validate_captcha</a>() == true)
<a name="l1076"><span class="linenum">1076</span></a>              {
<a name="l1077"><span class="linenum">1077</span></a>                  <a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('correct')" href="_variables/correct.html">$correct</a> = true;
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">                // Generate a hidden list of items for our captcha</span>
<a name="l1080"><span class="linenum">1080</span></a>                  <a class="var it1079" onMouseOver="hilite(1079)" onMouseOut="lolite()" onClick="logVariable('captcha')" href="_variables/captcha.html">$captcha</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a class="function" onClick="logFunction('build_hidden_captcha')" href="_functions/build_hidden_captcha.html" onMouseOver="funcPopup(event,'build_hidden_captcha')">build_hidden_captcha</a>();
<a name="l1081"><span class="linenum">1081</span></a>              }
<a name="l1082"><span class="linenum">1082</span></a>          }
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>          if(!<a class="var it1078" onMouseOver="hilite(1078)" onMouseOut="lolite()" onClick="logVariable('correct')" href="_variables/correct.html">$correct</a>)
<a name="l1085"><span class="linenum">1085</span></a>          {
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a> = <span class="keyword">new </span><a class="class" onClick="logClass('captcha')" href="_classes/captcha.html" onMouseOver="classPopup(event,'captcha')">captcha</a>(true, &quot;post_captcha&quot;);
<a name="l1087"><span class="linenum">1087</span></a>  
<a name="l1088"><span class="linenum">1088</span></a>              if(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a onClick="logVariable('html')" class="var it8061" onMouseOver="hilite(8061)" onMouseOut="lolite()" href="_variables/html.html">html</a>)
<a name="l1089"><span class="linenum">1089</span></a>              {
<a name="l1090"><span class="linenum">1090</span></a>                  <a class="var it1079" onMouseOver="hilite(1079)" onMouseOut="lolite()" onClick="logVariable('captcha')" href="_variables/captcha.html">$captcha</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('post_captcha')" href="_variables/post_captcha.html">$post_captcha</a>-&gt;<a onClick="logVariable('html')" class="var it8061" onMouseOver="hilite(8061)" onMouseOut="lolite()" href="_variables/html.html">html</a>;
<a name="l1091"><span class="linenum">1091</span></a>              }
<a name="l1092"><span class="linenum">1092</span></a>          }
<a name="l1093"><span class="linenum">1093</span></a>      }
<a name="l1094"><span class="linenum">1094</span></a>  
<a name="l1095"><span class="linenum">1095</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['threadreview'] != 0)
<a name="l1096"><span class="linenum">1096</span></a>      {
<a name="l1097"><span class="linenum">1097</span></a>          if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage'])
<a name="l1098"><span class="linenum">1098</span></a>          {
<a name="l1099"><span class="linenum">1099</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postperpage'] = 20;
<a name="l1100"><span class="linenum">1100</span></a>          }
<a name="l1101"><span class="linenum">1101</span></a>          
<a name="l1102"><span class="linenum">1102</span></a>          if(<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>))
<a name="l1103"><span class="linenum">1103</span></a>          {
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="_variables/visibility.html">$visibility</a> = &quot;(visible='1' OR visible='0')&quot;;
<a name="l1105"><span class="linenum">1105</span></a>          }
<a name="l1106"><span class="linenum">1106</span></a>          else
<a name="l1107"><span class="linenum">1107</span></a>          {
<a name="l1108"><span class="linenum">1108</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="_variables/visibility.html">$visibility</a> = &quot;visible='1'&quot;;
<a name="l1109"><span class="linenum">1109</span></a>          }
<a name="l1110"><span class="linenum">1110</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;<a class="phpfunction" onClick="logFunction('COUNT')" href="_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(pid) AS post_count&quot;, &quot;tid='{<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>}' AND {<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="_variables/visibility.html">$visibility</a>}&quot;);
<a name="l1111"><span class="linenum">1111</span></a>          <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('numposts')" href="_variables/numposts.html">$numposts</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>, &quot;post_count&quot;);
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>          if(<a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('numposts')" href="_variables/numposts.html">$numposts</a> &gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage'])
<a name="l1114"><span class="linenum">1114</span></a>          {
<a name="l1115"><span class="linenum">1115</span></a>              <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('numposts')" href="_variables/numposts.html">$numposts</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage'];
<a name="l1116"><span class="linenum">1116</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_review_more')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_review_more.html">thread_review_more</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_review_more')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_review_more.html">thread_review_more</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage'], <a class="function" onClick="logFunction('get_thread_link')" href="_functions/get_thread_link.html" onMouseOver="funcPopup(event,'get_thread_link')">get_thread_link</a>(<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>));
<a name="l1117"><span class="linenum">1117</span></a>              eval(&quot;\<a class="var it1084" onMouseOver="hilite(1084)" onMouseOut="lolite()" onClick="logVariable('reviewmore')" href="_variables/reviewmore.html">$reviewmore</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_threadreview_more&quot;).&quot;\&quot;;&quot;);
<a name="l1118"><span class="linenum">1118</span></a>          }
<a name="l1119"><span class="linenum">1119</span></a>  
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;pid&quot;, &quot;tid='{<a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('tid')" href="_variables/tid.html">$tid</a>}' AND {<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('visibility')" href="_variables/visibility.html">$visibility</a>}&quot;, array(&quot;order_by&quot; =&gt; &quot;dateline&quot;, &quot;order_dir&quot; =&gt; &quot;desc&quot;, &quot;limit&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['postsperpage']));
<a name="l1121"><span class="linenum">1121</span></a>          while(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l1122"><span class="linenum">1122</span></a>          {
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('pidin')" href="_variables/pidin.html">$pidin</a>[] = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'];
<a name="l1124"><span class="linenum">1124</span></a>          }
<a name="l1125"><span class="linenum">1125</span></a>  
<a name="l1126"><span class="linenum">1126</span></a>          <a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('pidin')" href="_variables/pidin.html">$pidin</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('pidin')" href="_variables/pidin.html">$pidin</a>);
<a name="l1127"><span class="linenum">1127</span></a>  
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">        // Fetch attachments</span>
<a name="l1129"><span class="linenum">1129</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;*&quot;, &quot;pid IN (<a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('pidin')" href="_variables/pidin.html">$pidin</a>)&quot;);
<a name="l1130"><span class="linenum">1130</span></a>          while(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l1131"><span class="linenum">1131</span></a>          {
<a name="l1132"><span class="linenum">1132</span></a>              <a class="var it214" onMouseOver="hilite(214)" onMouseOut="lolite()" onClick="logVariable('attachcache')" href="_variables/attachcache.html">$attachcache</a>[<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['pid']][<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['aid']] = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>;
<a name="l1133"><span class="linenum">1133</span></a>          }
<a name="l1134"><span class="linenum">1134</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('query')" href="_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;
<a name="l1135"><span class="linenum">1135</span></a>              SELECT p.*, u.username AS userusername
<a name="l1136"><span class="linenum">1136</span></a>              FROM &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts p
<a name="l1137"><span class="linenum">1137</span></a>              LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users u <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (p.uid=u.uid)
<a name="l1138"><span class="linenum">1138</span></a>              WHERE pid IN (<a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('pidin')" href="_variables/pidin.html">$pidin</a>)
<a name="l1139"><span class="linenum">1139</span></a>              ORDER BY dateline DESC
<a name="l1140"><span class="linenum">1140</span></a>          &quot;);
<a name="l1141"><span class="linenum">1141</span></a>          <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('postsdone')" href="_variables/postsdone.html">$postsdone</a> = 0;
<a name="l1142"><span class="linenum">1142</span></a>          <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow1&quot;;
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it1087" onMouseOver="hilite(1087)" onMouseOut="lolite()" onClick="logVariable('reviewbits')" href="_variables/reviewbits.html">$reviewbits</a> = '';
<a name="l1144"><span class="linenum">1144</span></a>          while(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l1145"><span class="linenum">1145</span></a>          {
<a name="l1146"><span class="linenum">1146</span></a>              if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['userusername'])
<a name="l1147"><span class="linenum">1147</span></a>              {
<a name="l1148"><span class="linenum">1148</span></a>                  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'] = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['userusername'];
<a name="l1149"><span class="linenum">1149</span></a>              }
<a name="l1150"><span class="linenum">1150</span></a>              <a class="var it1088" onMouseOver="hilite(1088)" onMouseOut="lolite()" onClick="logVariable('reviewpostdate')" href="_variables/reviewpostdate.html">$reviewpostdate</a> = <a class="function" onClick="logFunction('my_date')" href="_functions/my_date.html" onMouseOver="funcPopup(event,'my_date')">my_date</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['dateformat'], <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['dateline']);
<a name="l1151"><span class="linenum">1151</span></a>              <a class="var it1089" onMouseOver="hilite(1089)" onMouseOut="lolite()" onClick="logVariable('reviewposttime')" href="_variables/reviewposttime.html">$reviewposttime</a> = <a class="function" onClick="logFunction('my_date')" href="_functions/my_date.html" onMouseOver="funcPopup(event,'my_date')">my_date</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['timeformat'], <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['dateline']);
<a name="l1152"><span class="linenum">1152</span></a>              <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a> = array(
<a name="l1153"><span class="linenum">1153</span></a>                  &quot;allow_html&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowhtml'],
<a name="l1154"><span class="linenum">1154</span></a>                  &quot;allow_mycode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowmycode'],
<a name="l1155"><span class="linenum">1155</span></a>                  &quot;allow_smilies&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowsmilies'],
<a name="l1156"><span class="linenum">1156</span></a>                  &quot;allow_imgcode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowimgcode'],
<a name="l1157"><span class="linenum">1157</span></a>                  &quot;allow_videocode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowvideocode'],
<a name="l1158"><span class="linenum">1158</span></a>                  &quot;me_username&quot; =&gt; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'],
<a name="l1159"><span class="linenum">1159</span></a>                  &quot;filter_badwords&quot; =&gt; 1
<a name="l1160"><span class="linenum">1160</span></a>              );
<a name="l1161"><span class="linenum">1161</span></a>              if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['smilieoff'] == 1)
<a name="l1162"><span class="linenum">1162</span></a>              {
<a name="l1163"><span class="linenum">1163</span></a>                  <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a>['allow_smilies'] = 0;
<a name="l1164"><span class="linenum">1164</span></a>              }
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>              if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['visible'] != 1)
<a name="l1167"><span class="linenum">1167</span></a>              {
<a name="l1168"><span class="linenum">1168</span></a>                  <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow_shaded&quot;;
<a name="l1169"><span class="linenum">1169</span></a>              }
<a name="l1170"><span class="linenum">1170</span></a>  
<a name="l1171"><span class="linenum">1171</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'] = <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a>-&gt;<a class="function" onClick="logFunction('parse_message')" href="_functions/parse_message.html" onMouseOver="funcPopup(event,'parse_message')">parse_message</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'], <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a>);
<a name="l1172"><span class="linenum">1172</span></a>              <a class="function" onClick="logFunction('get_post_attachments')" href="_functions/get_post_attachments.html" onMouseOver="funcPopup(event,'get_post_attachments')">get_post_attachments</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'], <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l1173"><span class="linenum">1173</span></a>              <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('reviewmessage')" href="_variables/reviewmessage.html">$reviewmessage</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'];
<a name="l1174"><span class="linenum">1174</span></a>              eval(&quot;\<a class="var it1087" onMouseOver="hilite(1087)" onMouseOut="lolite()" onClick="logVariable('reviewbits')" href="_variables/reviewbits.html">$reviewbits</a> .= \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_threadreview_post&quot;).&quot;\&quot;;&quot;);
<a name="l1175"><span class="linenum">1175</span></a>              if(<a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> == &quot;trow1&quot;)
<a name="l1176"><span class="linenum">1176</span></a>              {
<a name="l1177"><span class="linenum">1177</span></a>                  <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow2&quot;;
<a name="l1178"><span class="linenum">1178</span></a>              }
<a name="l1179"><span class="linenum">1179</span></a>              else
<a name="l1180"><span class="linenum">1180</span></a>              {
<a name="l1181"><span class="linenum">1181</span></a>                  <a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('altbg')" href="_variables/altbg.html">$altbg</a> = &quot;trow1&quot;;
<a name="l1182"><span class="linenum">1182</span></a>              }
<a name="l1183"><span class="linenum">1183</span></a>          }
<a name="l1184"><span class="linenum">1184</span></a>          eval(&quot;\<a class="var it1091" onMouseOver="hilite(1091)" onMouseOut="lolite()" onClick="logVariable('threadreview')" href="_variables/threadreview.html">$threadreview</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_threadreview&quot;).&quot;\&quot;;&quot;);
<a name="l1185"><span class="linenum">1185</span></a>      }
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">    // Can we disable smilies or are they disabled already?</span>
<a name="l1187"><span class="linenum">1187</span></a>      if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowsmilies'] != 0)
<a name="l1188"><span class="linenum">1188</span></a>      {
<a name="l1189"><span class="linenum">1189</span></a>          eval(&quot;\<a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('disablesmilies')" href="_variables/disablesmilies.html">$disablesmilies</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_disablesmilies&quot;).&quot;\&quot;;&quot;);
<a name="l1190"><span class="linenum">1190</span></a>      }
<a name="l1191"><span class="linenum">1191</span></a>      else
<a name="l1192"><span class="linenum">1192</span></a>      {
<a name="l1193"><span class="linenum">1193</span></a>          <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('disablesmilies')" href="_variables/disablesmilies.html">$disablesmilies</a> = &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;postoptions[disablesmilies]\&quot; value=\&quot;no\&quot; /&gt;&quot;;
<a name="l1194"><span class="linenum">1194</span></a>      }
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment">    // Show the moderator options.</span>
<a name="l1196"><span class="linenum">1196</span></a>      if(<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('fid')" href="_variables/fid.html">$fid</a>))
<a name="l1197"><span class="linenum">1197</span></a>      {
<a name="l1198"><span class="linenum">1198</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['processed'])
<a name="l1199"><span class="linenum">1199</span></a>          {
<a name="l1200"><span class="linenum">1200</span></a>              <a class="var it1092" onMouseOver="hilite(1092)" onMouseOut="lolite()" onClick="logVariable('closed')" href="_variables/closed.html">$closed</a> = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['modoptions']['closethread']);
<a name="l1201"><span class="linenum">1201</span></a>              <a class="var it1093" onMouseOver="hilite(1093)" onMouseOut="lolite()" onClick="logVariable('stuck')" href="_variables/stuck.html">$stuck</a> = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['modoptions']['stickthread']);
<a name="l1202"><span class="linenum">1202</span></a>          }
<a name="l1203"><span class="linenum">1203</span></a>          else
<a name="l1204"><span class="linenum">1204</span></a>          {
<a name="l1205"><span class="linenum">1205</span></a>              <a class="var it1092" onMouseOver="hilite(1092)" onMouseOut="lolite()" onClick="logVariable('closed')" href="_variables/closed.html">$closed</a> = <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['closed'];
<a name="l1206"><span class="linenum">1206</span></a>              <a class="var it1093" onMouseOver="hilite(1093)" onMouseOut="lolite()" onClick="logVariable('stuck')" href="_variables/stuck.html">$stuck</a> = <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['sticky'];
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>          
<a name="l1209"><span class="linenum">1209</span></a>          if(<a class="var it1092" onMouseOver="hilite(1092)" onMouseOut="lolite()" onClick="logVariable('closed')" href="_variables/closed.html">$closed</a>)
<a name="l1210"><span class="linenum">1210</span></a>          {
<a name="l1211"><span class="linenum">1211</span></a>              <a class="var it1094" onMouseOver="hilite(1094)" onMouseOut="lolite()" onClick="logVariable('closecheck')" href="_variables/closecheck.html">$closecheck</a> = ' checked=&quot;checked&quot;';
<a name="l1212"><span class="linenum">1212</span></a>          }
<a name="l1213"><span class="linenum">1213</span></a>          else
<a name="l1214"><span class="linenum">1214</span></a>          {
<a name="l1215"><span class="linenum">1215</span></a>              <a class="var it1094" onMouseOver="hilite(1094)" onMouseOut="lolite()" onClick="logVariable('closecheck')" href="_variables/closecheck.html">$closecheck</a> = '';
<a name="l1216"><span class="linenum">1216</span></a>          }
<a name="l1217"><span class="linenum">1217</span></a>  
<a name="l1218"><span class="linenum">1218</span></a>          if(<a class="var it1093" onMouseOver="hilite(1093)" onMouseOut="lolite()" onClick="logVariable('stuck')" href="_variables/stuck.html">$stuck</a>)
<a name="l1219"><span class="linenum">1219</span></a>          {
<a name="l1220"><span class="linenum">1220</span></a>              <a class="var it1095" onMouseOver="hilite(1095)" onMouseOut="lolite()" onClick="logVariable('stickycheck')" href="_variables/stickycheck.html">$stickycheck</a> = ' checked=&quot;checked&quot;';
<a name="l1221"><span class="linenum">1221</span></a>          }
<a name="l1222"><span class="linenum">1222</span></a>          else
<a name="l1223"><span class="linenum">1223</span></a>          {
<a name="l1224"><span class="linenum">1224</span></a>              <a class="var it1095" onMouseOver="hilite(1095)" onMouseOut="lolite()" onClick="logVariable('stickycheck')" href="_variables/stickycheck.html">$stickycheck</a> = '';
<a name="l1225"><span class="linenum">1225</span></a>          }
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>          eval(&quot;\<a class="var it1096" onMouseOver="hilite(1096)" onMouseOut="lolite()" onClick="logVariable('modoptions')" href="_variables/modoptions.html">$modoptions</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply_modoptions&quot;).&quot;\&quot;;&quot;);
<a name="l1228"><span class="linenum">1228</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('bgcolor')" href="_variables/bgcolor.html">$bgcolor</a> = &quot;trow1&quot;;
<a name="l1229"><span class="linenum">1229</span></a>      }
<a name="l1230"><span class="linenum">1230</span></a>      else
<a name="l1231"><span class="linenum">1231</span></a>      {
<a name="l1232"><span class="linenum">1232</span></a>          <a class="var it190" onMouseOver="hilite(190)" onMouseOut="lolite()" onClick="logVariable('bgcolor')" href="_variables/bgcolor.html">$bgcolor</a> = &quot;trow2&quot;;
<a name="l1233"><span class="linenum">1233</span></a>      }
<a name="l1234"><span class="linenum">1234</span></a>      
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">    // Fetch subscription select box</span>
<a name="l1236"><span class="linenum">1236</span></a>      eval(&quot;\<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('subscriptionmethod')" href="_variables/subscriptionmethod.html">$subscriptionmethod</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;post_subscription_method&quot;).&quot;\&quot;;&quot;);
<a name="l1237"><span class="linenum">1237</span></a>      
<a name="l1238"><span class="linenum">1238</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('post_reply_to')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/post_reply_to.html">post_reply_to</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('post_reply_to')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/post_reply_to.html">post_reply_to</a>, <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject']);
<a name="l1239"><span class="linenum">1239</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('reply_to')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/reply_to.html">reply_to</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('reply_to')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/reply_to.html">reply_to</a>, <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['subject']);
<a name="l1240"><span class="linenum">1240</span></a>  
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">    // Do we have any forum rules to show for this forum?</span>
<a name="l1242"><span class="linenum">1242</span></a>      <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('forumrules')" href="_variables/forumrules.html">$forumrules</a> = '';
<a name="l1243"><span class="linenum">1243</span></a>      if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rulestype'] &gt;= 2 &amp;&amp; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rules'])
<a name="l1244"><span class="linenum">1244</span></a>      {
<a name="l1245"><span class="linenum">1245</span></a>          if(!<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rulestitle'])
<a name="l1246"><span class="linenum">1246</span></a>          {
<a name="l1247"><span class="linenum">1247</span></a>              <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rulestitle'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('forum_rules')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/forum_rules.html">forum_rules</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['name']);
<a name="l1248"><span class="linenum">1248</span></a>          }
<a name="l1249"><span class="linenum">1249</span></a>  
<a name="l1250"><span class="linenum">1250</span></a>          if(!<a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a>)
<a name="l1251"><span class="linenum">1251</span></a>          {
<a name="l1252"><span class="linenum">1252</span></a>              <span class="keyword">require_once</span> <a class="filename" href="inc/class_parser.php.html" onMouseOver="reqPopup(event, 'class_parser.php', 'inc/class_parser.php')"> MYBB_ROOT.'inc/class_parser.php'</a>;
<a name="l1253"><span class="linenum">1253</span></a>              <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a> = <span class="keyword">new </span><a class="class" onClick="logClass('postParser')" href="_classes/postparser.html" onMouseOver="classPopup(event,'postparser')">postParser</a>;
<a name="l1254"><span class="linenum">1254</span></a>          }
<a name="l1255"><span class="linenum">1255</span></a>  
<a name="l1256"><span class="linenum">1256</span></a>          <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('rules_parser')" href="_variables/rules_parser.html">$rules_parser</a> = array(
<a name="l1257"><span class="linenum">1257</span></a>              &quot;allow_html&quot; =&gt; 1,
<a name="l1258"><span class="linenum">1258</span></a>              &quot;allow_mycode&quot; =&gt; 1,
<a name="l1259"><span class="linenum">1259</span></a>              &quot;allow_smilies&quot; =&gt; 1,
<a name="l1260"><span class="linenum">1260</span></a>              &quot;allow_imgcode&quot; =&gt; 1
<a name="l1261"><span class="linenum">1261</span></a>          );
<a name="l1262"><span class="linenum">1262</span></a>  
<a name="l1263"><span class="linenum">1263</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rules'] = <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a>-&gt;<a class="function" onClick="logFunction('parse_message')" href="_functions/parse_message.html" onMouseOver="funcPopup(event,'parse_message')">parse_message</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rules'], <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('rules_parser')" href="_variables/rules_parser.html">$rules_parser</a>);
<a name="l1264"><span class="linenum">1264</span></a>          <a class="var it1102" onMouseOver="hilite(1102)" onMouseOut="lolite()" onClick="logVariable('foruminfo')" href="_variables/foruminfo.html">$foruminfo</a> = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>;
<a name="l1265"><span class="linenum">1265</span></a>  
<a name="l1266"><span class="linenum">1266</span></a>          if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rulestype'] == 3)
<a name="l1267"><span class="linenum">1267</span></a>          {
<a name="l1268"><span class="linenum">1268</span></a>              eval(&quot;\<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('forumrules')" href="_variables/forumrules.html">$forumrules</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;forumdisplay_rules&quot;).&quot;\&quot;;&quot;);
<a name="l1269"><span class="linenum">1269</span></a>          }
<a name="l1270"><span class="linenum">1270</span></a>          else if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['rulestype'] == 2)
<a name="l1271"><span class="linenum">1271</span></a>          {
<a name="l1272"><span class="linenum">1272</span></a>              eval(&quot;\<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('forumrules')" href="_variables/forumrules.html">$forumrules</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;forumdisplay_rules_link&quot;).&quot;\&quot;;&quot;);
<a name="l1273"><span class="linenum">1273</span></a>          }
<a name="l1274"><span class="linenum">1274</span></a>      }
<a name="l1275"><span class="linenum">1275</span></a>  
<a name="l1276"><span class="linenum">1276</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="_variables/plugins.html">$plugins</a>-&gt;<a class="function" onClick="logFunction('run_hooks')" href="_functions/run_hooks.html" onMouseOver="funcPopup(event,'run_hooks')">run_hooks</a>(&quot;newreply_end&quot;);
<a name="l1277"><span class="linenum">1277</span></a>      
<a name="l1278"><span class="linenum">1278</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['name'] = <a class="phpfunction" onClick="logFunction('strip_tags')" href="_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['name']);
<a name="l1279"><span class="linenum">1279</span></a>  
<a name="l1280"><span class="linenum">1280</span></a>      eval(&quot;\<a class="var it1103" onMouseOver="hilite(1103)" onMouseOut="lolite()" onClick="logVariable('newreply')" href="_variables/newreply.html">$newreply</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;newreply&quot;).&quot;\&quot;;&quot;);
<a name="l1281"><span class="linenum">1281</span></a>      <a class="function" onClick="logFunction('output_page')" href="_functions/output_page.html" onMouseOver="funcPopup(event,'output_page')">output_page</a>(<a class="var it1103" onMouseOver="hilite(1103)" onMouseOut="lolite()" onClick="logVariable('newreply')" href="_variables/newreply.html">$newreply</a>);
<a name="l1282"><span class="linenum">1282</span></a>  }
<a name="l1283"><span class="linenum">1283</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'remove_message_quotes': ['remove_message_quotes', 'Selectively removes quote tags from a message, depending on its nested depth.  This is to be used with reply with quote functions. For malformed quote tag structures, will try to simulate how MyBB\'s parser handles the issue, but is slightly inaccurate. Examples, with a cutoff depth of 2: #1. INPUT:  [quote]a[quote=me]b[quote]c[/quote][/quote][/quote] OUTPUT:  [quote]a[quote=me]b[/quote][/quote] #2. INPUT:  [quote=a][quote=b][quote=c][quote=d][/quote][quote=e][/quote][/quote][quote=f][/quote][/quote] OUTPUT:  [quote=a][quote=b][/quote][quote=f][/quote][/quote] ', [['inc','functions_posting.php',12]], 3],
'get_thread_link': ['get_thread_link', 'Build the thread link. ', [['inc','functions.php',4728]], 106],
'get_post_icons': ['get_post_icons', 'Generate a list of the posticons. ', [['inc','functions.php',1576]], 5],
'verify_subject': ['verify_subject', 'Verifies a private message subject. ', [['inc/datahandlers','pm.php',57],['inc/datahandlers','post.php',137]], 5],
'get_forum': ['get_forum', 'Get the forum of a specific forum id. ', [['inc','functions.php',4890]], 51],
'mark_thread_read': ['mark_thread_read', 'Mark a particular thread as read for the current user. ', [['inc','functions_indicators.php',12]], 3],
'on': ['on', '', [['jscripts','prototype.js',5765]], 318],
'my_setcookie': ['my_setcookie', 'MyBB setcookie() wrapper. ', [['inc','functions.php',1629]], 53],
'validate_post': ['validate_post', 'Validate a post. ', [['inc/datahandlers','post.php',580]], 7],
'my_unsetcookie': ['my_unsetcookie', 'Unset a cookie set by MyBB. ', [['inc','functions.php',1691]], 28],
'load': ['load', 'Load all plugins. ', [['inc','class_plugins.php',29],['inc','class_language.php',118]], 70],
'build_forum_breadcrumb': ['build_forum_breadcrumb', 'Build the forum breadcrumb nagiation (the navigation to a specific forum including all parent forums) ', [['inc','functions.php',3284]], 15],
'error_no_permission': ['error_no_permission', 'Presents the user with a "no permission" page ', [['inc','functions.php',713]], 163],
'get_friendly_size': ['get_friendly_size', 'Fetch the friendly size (GB, MB, KB, B) for a specified file size. ', [['inc','functions.php',2989]], 40],
'simple_select': ['simple_select', 'Performs a simple select query. ', [['inc','db_sqlite.php',563],['inc','db_mysql.php',674],['inc','db_mysqli.php',684],['inc','db_pgsql.php',677]], 1010],
'verify_message': ['verify_message', 'Verifies if a message for a PM is valid. ', [['inc/datahandlers','pm.php',81],['inc/datahandlers','post.php',220]], 5],
'upload_attachment': ['upload_attachment', 'Upload an attachment in to the file system ', [['inc','functions_upload.php',337]], 3],
'build_clickable_smilies': ['build_clickable_smilies', 'Build the javascript clickable smilie inserter ', [['inc','functions.php',2497]], 10],
'insert_post': ['insert_post', 'Insert a post into the database. ', [['inc/datahandlers','post.php',653]], 3],
'insert_query': ['insert_query', 'Build an insert query from an array. ', [['inc','db_sqlite.php',604],['inc','db_mysql.php',709],['inc','db_mysqli.php',724],['inc','db_pgsql.php',715]], 155],
'get_post_link': ['get_post_link', 'Build the post link. ', [['inc','functions.php',4769]], 36],
'inline_error': ['inline_error', 'Produce an error message for displaying inline on a page ', [['inc','functions.php',672]], 31],
'get_extension': ['get_extension', 'Returns the extension of a file. ', [['inc','functions.php',2343]], 31],
'run_hooks': ['run_hooks', 'Run the hooks that have plugins. ', [['inc','class_plugins.php',74]], 924],
'remove_attachment': ['remove_attachment', 'Remove an attachment from a specific post ', [['inc','functions_upload.php',13]], 11],
'build_mycode_inserter': ['build_mycode_inserter', 'Build the javascript based MyCode inserter ', [['inc','functions.php',2410]], 12],
'error': ['error', 'Output a database error. ', [['inc','db_sqlite.php',385],['inc','functions.php',632],['inc','db_mysql.php',522],['inc','db_mysqli.php',529],['inc','class_error.php',135],['inc','db_pgsql.php',531]], 364],
'output_page': ['output_page', 'Outputs a page directly to the browser, parsing anything which needs to be parsed. ', [['inc','functions.php',12]], 140],
'set_data': ['set_data', 'Sets the data to be used for the data handler ', [['inc','datahandler.php',75]], 26],
'observe': ['observe', '', [['jscripts','prototype.js',5632]], 119],
'random_str': ['random_str', 'Generates a random string. ', [['inc','functions.php',2354]], 33],
'escape_string': ['escape_string', 'Escape a string ', [['inc','db_sqlite.php',717],['inc','db_pdo.php',207],['inc','db_mysql.php',839],['inc','db_mysqli.php',848],['inc','db_pgsql.php',843]], 901],
'verify_post_check': ['verify_post_check', 'Verifies a POST check code is valid, if not shows an error (silently returns false on silent parameter) ', [['inc','functions.php',476]], 114],
'login_attempt_check': ['login_attempt_check', 'Checks to make sure a user has not tried to login more times than permitted Will stop execution with call to error() unless ', [['inc','functions.php',5032]], 6],
'build_postbit': ['build_postbit', 'Build a post bit ', [['inc','functions_post.php',12]], 9],
'my_strtolower': ['my_strtolower', 'lowers the case of a string, mb strings accounted for ', [['inc','functions.php',4493]], 90],
'htmlspecialchars_uni': ['htmlspecialchars_uni', 'Custom function for htmlspecialchars which takes in to account unicode ', [['inc','functions.php',4063]], 553],
'get_post_attachments': ['get_post_attachments', 'Fetch the attachments for a specific post and parse inline [attachment=id] code. Note: assumes you have $attachcache, an array of attachments set up. ', [['inc','functions_post.php',652]], 3],
'fetch_array': ['fetch_array', 'Return a result array for a query. ', [['inc','db_sqlite.php',276],['inc','db_pdo.php',75],['inc','db_mysql.php',410],['inc','db_mysqli.php',419],['inc','db_pgsql.php',401]], 965],
'add_breadcrumb': ['add_breadcrumb', 'Add a breadcrumb menu item to the list. ', [['inc','functions.php',3269]], 137],
'update_query': ['update_query', 'Build an update query from an array. ', [['inc','db_sqlite.php',658],['inc','db_mysql.php',763],['inc','db_mysqli.php',778],['inc','db_pgsql.php',779]], 445],
'unset': ['unset', '', [['jscripts','prototype.js',1229]], 157],
'build_hidden_captcha': ['build_hidden_captcha', '', [['inc','class_captcha.php',168]], 2],
'get_unviewable_forums': ['get_unviewable_forums', 'Get a list of the unviewable forums for the current user ', [['inc','functions.php',3110]], 10],
'get_ip': ['get_ip', 'Fetch the IP address of the current user. ', [['inc','functions.php',2932]], 16],
'get_friendly_errors': ['get_friendly_errors', 'Returns the error(s) that occurred when handling data in a format that MyBB can handle. ', [['inc','datahandler.php',113]], 22],
'parse_quoted_message': ['parse_quoted_message', 'Performs cleanup of a quoted message, such as replacing /me commands, before presenting quoted post to the user. ', [['inc','functions_posting.php',169]], 2],
'parse_message': ['parse_message', 'Parses a message with the specified options. ', [['inc','class_parser.php',75]], 30],
'num_rows': ['num_rows', 'Return the number of rows resulting from a query. ', [['inc','db_sqlite.php',317],['inc','db_pdo.php',116],['admin/inc','class_table.php',125],['inc','db_mysql.php',454],['admin/inc','class_form.php',939],['inc','db_mysqli.php',460],['inc','db_pgsql.php',445]], 114],
'check_forum_password': ['check_forum_password', 'Check the password given on a certain forum for validity ', [['inc','functions.php',1306]], 13],
'get_forum_link': ['get_forum_link', 'Build the forum link. ', [['inc','functions.php',4706]], 59],
'my_date': ['my_date', 'Turn a unix timestamp in to a "friendly" date/time format for the user. ', [['inc','functions.php',303]], 324],
'redirect': ['redirect', 'Redirect the user to a given URL with a given message ', [['inc','functions.php',776]], 107],
'validate_captcha': ['validate_captcha', '', [['inc','class_captcha.php',199]], 5],
'get': ['get', 'Gets templates. ', [['inc','class_templates.php',57],['jscripts','prototype.js',1224]], 736],
'is_moderator': ['is_moderator', 'Checks if a moderator has permissions to perform an action in a specific forum ', [['inc','functions.php',1504]], 129],
'empty': ['empty', '', [['jscripts','prototype.js',715]], 368],
'sprintf': ['sprintf', '', [['inc','class_language.php',166]], 464],
'query': ['query', 'Query the database. ', [['inc','db_sqlite.php',150],['inc','db_pdo.php',57],['inc','db_mysql.php',278],['inc','db_mysqli.php',288],['inc','db_pgsql.php',273]], 309],
'forum_permissions': ['forum_permissions', 'Build the forum permissions for a specific forum, user or group ', [['inc','functions.php',1146]], 64],
'get_errors': ['get_errors', 'Returns the error(s) that occurred when handling data. ', [['inc','datahandler.php',103],['inc','class_captcha.php',302]], 16],
'validate_password_from_username': ['validate_password_from_username', 'Checks a password with a supplied username. ', [['inc','functions_user.php',56]], 7],
'get_attachment_icon': ['get_attachment_icon', 'Get the attachment icon for a specific file extension ', [['inc','functions.php',3056]], 10],
'username_exists': ['username_exists', 'Checks if $username already exists in the database. ', [['inc','functions_user.php',33]], 5],
'fetch_field': ['fetch_field', 'Return a specific field from a query. ', [['inc','db_sqlite.php',289],['inc','db_mysql.php',423],['inc','db_mysqli.php',432],['inc','db_pgsql.php',414]], 258],
'intval': ['intval', '', [], 1305],
'explode': ['explode', '', [], 340],
'htmlspecialchars': ['htmlspecialchars', '', [], 55],
'is_array': ['is_array', '', [], 550],
'preg_replace': ['preg_replace', '', [], 153],
'implode': ['implode', '', [], 346],
'count': ['count', '', [], 499],
'strip_tags': ['strip_tags', '', [], 19],
'define': ['define', '', [], 164],
'in_array': ['in_array', '', [], 132],
'header': ['header', '', [], 103]};
CLASS_DATA={
'postdatahandler': ['postdatahandler', 'Post handling class, provides common structure to handle post data. ', [['inc/datahandlers','post.php',32]], 10],
'captcha': ['captcha', 'MyBB 1.6 Copyright 2010 MyBB Group, All Rights Reserved ', [['inc','class_captcha.php',2]], 9],
'postparser': ['postparser', '', [['inc','class_parser.php',25]], 37]};
CONST_DATA={
'TABLE_PREFIX': ['TABLE_PREFIX', '', [['inc','functions.php',180],['install','upgrade.php',92],['inc','init.php',138],['install','index.php',2246]], 1488],
'THIS_SCRIPT': ['THIS_SCRIPT', '', [['','editpost.php',13],['','printthread.php',13],['','portal.php',14],['','newreply.php',13],['','modcp.php',13],['','task.php',18],['','private.php',14],['','xmlhttp.php',27],['','css.php',14],['','misc.php',13],['','warnings.php',13],['','reputation.php',13],['','memberlist.php',13],['','usercp.php',13],['','showteam.php',13],['','sendthread.php',13],['','showthread.php',13],['','calendar.php',13],['','online.php',13],['','global.php',35],['','forumdisplay.php',13],['','newthread.php',13],['','member.php',13],['','report.php',13],['','ratethread.php',13],['','attachment.php',13],['','polls.php',13],['','usercp2.php',13],['','syndication.php',15],['','stats.php',13],['','moderation.php',13],['','managegroup.php',13],['','search.php',15],['','announcements.php',13],['','captcha.php',14],['','index.php',13]], 42],
'TIME_NOW': ['TIME_NOW', '', [['inc','db_sqlite.php',1046],['install','upgrade.php',29],['inc','init.php',51],['install','index.php',31]], 409],
'IN_MYBB': ['IN_MYBB', '', [['','editpost.php',12],['','printthread.php',12],['','portal.php',12],['','newreply.php',12],['','modcp.php',12],['','task.php',15],['','private.php',12],['','xmlhttp.php',22],['archive','index.php',12],['','css.php',12],['','misc.php',12],['','warnings.php',12],['','reputation.php',12],['','memberlist.php',12],['install','upgrade.php',30],['','usercp.php',12],['','showteam.php',12],['','sendthread.php',12],['','showthread.php',12],['','calendar.php',12],['','online.php',12],['','forumdisplay.php',12],['','newthread.php',12],['','member.php',12],['','report.php',12],['','ratethread.php',12],['','attachment.php',12],['','polls.php',12],['','usercp2.php',12],['admin','index.php',12],['','syndication.php',12],['','stats.php',12],['','moderation.php',12],['install','index.php',32],['','managegroup.php',12],['','search.php',13],['','announcements.php',12],['','captcha.php',12],['','index.php',12]], 179]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Jun  4 13:54:24 2012</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
