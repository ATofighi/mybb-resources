<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : MyBB 1.6.8 : /xmlhttp.php source</title>
    <link rel="stylesheet" href="sample.css" type="text/css">
    <link rel="stylesheet" href="sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of MyBB 1.6.8</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Jun  4 13:54:24 2012 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='';
subdir='';
filename='xmlhttp.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/</a> -> <a href="xmlhttp.php.html">xmlhttp.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="xmlhttp.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="xmlhttp.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * MyBB 1.6</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * Copyright 2010 MyBB Group, All Rights Reserved</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * Website: http://mybb.com</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * License: http://mybb.com/about/license</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * $Id: xmlhttp.php 5641 2011-10-26 09:36:44Z Tomm $</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> */</span>
<a name="l11"><span class="linenum">  11</span></a>  
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">/**</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * The deal with this file is that it handles all of the XML HTTP Requests for MyBB.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> *</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * It contains a stripped down version of the MyBB core which does not load things</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> * such as themes, who's online data, all of the language packs and more.</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> *</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This is done to make response times when using XML HTTP Requests faster and</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * less intense on the server.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> */</span>
<a name="l21"><span class="linenum">  21</span></a>   
<a name="l22"><span class="linenum">  22</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('IN_MYBB')" href="_constants/IN_MYBB.html" onMouseOver="constPopup(event,'IN_MYBB')">IN_MYBB</a>&quot;, 1);
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">// We don't want visits here showing up on the Who's Online</span>
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('NO_ONLINE')" href="_constants/NO_ONLINE.html" onMouseOver="constPopup(event,'NO_ONLINE')">NO_ONLINE</a>&quot;, 1);
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('THIS_SCRIPT')" href="_constants/THIS_SCRIPT.html" onMouseOver="constPopup(event,'THIS_SCRIPT')">THIS_SCRIPT</a>', '<a class="filename" href="xmlhttp.php.html">xmlhttp.php</a>');
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">// Load MyBB core files</span>
<a name="l30"><span class="linenum">  30</span></a>  require_once <a class="phpfunction" onClick="logFunction('dirname')" href="_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__)."<a class="filename" href="inc/init.php.html">/inc/init.php</a>";
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('shutdown_queries')" href="_variables/shutdown_queries.html">$shutdown_queries</a> = array();
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">// Load some of the stock caches we'll be using.</span>
<a name="l35"><span class="linenum">  35</span></a>  <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="_variables/groupscache.html">$groupscache</a> = <a class="var it258" onMouseOver="hilite(258)" onMouseOut="lolite()" onClick="logVariable('cache')" href="_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('read')" href="_functions/read.html" onMouseOver="funcPopup(event,'read')">read</a>(&quot;usergroups&quot;);
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  if(!<a class="phpfunction" onClick="logFunction('is_array')" href="_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="_variables/groupscache.html">$groupscache</a>))
<a name="l38"><span class="linenum">  38</span></a>  {
<a name="l39"><span class="linenum">  39</span></a>      <a class="var it258" onMouseOver="hilite(258)" onMouseOut="lolite()" onClick="logVariable('cache')" href="_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('update_usergroups')" href="_functions/update_usergroups.html" onMouseOver="funcPopup(event,'update_usergroups')">update_usergroups</a>();
<a name="l40"><span class="linenum">  40</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="_variables/groupscache.html">$groupscache</a> = <a class="var it258" onMouseOver="hilite(258)" onMouseOut="lolite()" onClick="logVariable('cache')" href="_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('read')" href="_functions/read.html" onMouseOver="funcPopup(event,'read')">read</a>(&quot;usergroups&quot;);
<a name="l41"><span class="linenum">  41</span></a>  }
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">// Send no cache headers</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Expires: Sat, 1 Jan 2000 01:00:00 GMT&quot;);
<a name="l45"><span class="linenum">  45</span></a>  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Last-Modified: &quot; . <a class="phpfunction" onClick="logFunction('gmdate')" href="_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>(&quot;D, d M Y H:i:s&quot;) . &quot; GMT&quot;);
<a name="l46"><span class="linenum">  46</span></a>  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Cache-Control: no-cache, must-revalidate&quot;);
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Pragma: no-cache&quot;);
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">// Create the session</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="keyword">require_once</span> <a class="filename" href="inc/class_session.php.html" onMouseOver="reqPopup(event, 'class_session.php', 'inc/class_session.php')"> MYBB_ROOT.&quot;inc/class_session.php&quot;</a>;
<a name="l51"><span class="linenum">  51</span></a>  <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('session')" href="_variables/session.html">$session</a> = <span class="keyword">new </span><a class="class" onClick="logClass('session')" href="_classes/session.html" onMouseOver="classPopup(event,'session')">session</a>;
<a name="l52"><span class="linenum">  52</span></a>  <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('session')" href="_variables/session.html">$session</a>-&gt;<a class="function" onClick="logFunction('init')" href="_functions/init.html" onMouseOver="funcPopup(event,'init')">init</a>();
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">// Load the language we'll be using</span>
<a name="l55"><span class="linenum">  55</span></a>  if(!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage']))
<a name="l56"><span class="linenum">  56</span></a>  {
<a name="l57"><span class="linenum">  57</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage'] = &quot;english&quot;;
<a name="l58"><span class="linenum">  58</span></a>  }
<a name="l59"><span class="linenum">  59</span></a>  if(isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language']) &amp;&amp; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('language_exists')" href="_functions/language_exists.html" onMouseOver="funcPopup(event,'language_exists')">language_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language']))
<a name="l60"><span class="linenum">  60</span></a>  {
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language'];
<a name="l62"><span class="linenum">  62</span></a>  }
<a name="l63"><span class="linenum">  63</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('set_language')" href="_functions/set_language.html" onMouseOver="funcPopup(event,'set_language')">set_language</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage']);
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  if(<a class="phpfunction" onClick="logFunction('function_exists')" href="_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_internal_encoding') &amp;&amp; !<a class="function" onClick="logFunction('empty')" href="_functions/empty.html" onMouseOver="funcPopup(event,'empty')">empty</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset']))
<a name="l66"><span class="linenum">  66</span></a>  {
<a name="l67"><span class="linenum">  67</span></a>      @<a class="phpfunction" onClick="logFunction('mb_internal_encoding')" href="_functions/mb_internal_encoding.html" onMouseOver="phpfuncPopup(event,'mb_internal_encoding')">mb_internal_encoding</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset']);
<a name="l68"><span class="linenum">  68</span></a>  }
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">// Load the language pack for this file.</span>
<a name="l71"><span class="linenum">  71</span></a>  if(isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['style']) &amp;&amp; <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['style']) != 0)
<a name="l72"><span class="linenum">  72</span></a>  {
<a name="l73"><span class="linenum">  73</span></a>      <a class="var it1605" onMouseOver="hilite(1605)" onMouseOut="lolite()" onClick="logVariable('loadstyle')" href="_variables/loadstyle.html">$loadstyle</a> = &quot;tid='&quot;.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['style'].&quot;'&quot;;
<a name="l74"><span class="linenum">  74</span></a>  }
<a name="l75"><span class="linenum">  75</span></a>  else
<a name="l76"><span class="linenum">  76</span></a>  {
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it1605" onMouseOver="hilite(1605)" onMouseOut="lolite()" onClick="logVariable('loadstyle')" href="_variables/loadstyle.html">$loadstyle</a> = &quot;def=1&quot;;
<a name="l78"><span class="linenum">  78</span></a>  }
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">// Load basic theme information that we could be needing.</span>
<a name="l81"><span class="linenum">  81</span></a>  <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;themes&quot;, &quot;name, tid, properties&quot;, <a class="var it1605" onMouseOver="hilite(1605)" onMouseOut="lolite()" onClick="logVariable('loadstyle')" href="_variables/loadstyle.html">$loadstyle</a>);
<a name="l82"><span class="linenum">  82</span></a>  <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l83"><span class="linenum">  83</span></a>  <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a> = @<a class="phpfunction" onClick="logFunction('array_merge')" href="_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>, <a class="phpfunction" onClick="logFunction('unserialize')" href="_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['properties']));
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">// Set the appropriate image language directory for this theme.</span>
<a name="l86"><span class="linenum">  86</span></a>  if(!<a class="function" onClick="logFunction('empty')" href="_functions/empty.html" onMouseOver="funcPopup(event,'empty')">empty</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_dir')" href="_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imgdir'].'/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language']))
<a name="l87"><span class="linenum">  87</span></a>  {
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imglangdir'] = <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imgdir'].'/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['language'];
<a name="l89"><span class="linenum">  89</span></a>  }
<a name="l90"><span class="linenum">  90</span></a>  else
<a name="l91"><span class="linenum">  91</span></a>  {
<a name="l92"><span class="linenum">  92</span></a>      if(<a class="phpfunction" onClick="logFunction('is_dir')" href="_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imgdir'].'/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage']))
<a name="l93"><span class="linenum">  93</span></a>      {
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imglangdir'] = <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imgdir'].'/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['bblanguage'];
<a name="l95"><span class="linenum">  95</span></a>      }
<a name="l96"><span class="linenum">  96</span></a>      else
<a name="l97"><span class="linenum">  97</span></a>      {
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imglangdir'] = <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('theme')" href="_variables/theme.html">$theme</a>['imgdir'];
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  }
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>  if(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset'])
<a name="l103"><span class="linenum"> 103</span></a>  {
<a name="l104"><span class="linenum"> 104</span></a>      <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('settings')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['charset'];
<a name="l105"><span class="linenum"> 105</span></a>  }
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">// If not, revert to UTF-8</span>
<a name="l107"><span class="linenum"> 107</span></a>  else
<a name="l108"><span class="linenum"> 108</span></a>  {
<a name="l109"><span class="linenum"> 109</span></a>      <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a> = &quot;UTF-8&quot;;
<a name="l110"><span class="linenum"> 110</span></a>  }
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('load')" href="_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(&quot;global&quot;);
<a name="l113"><span class="linenum"> 113</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('load')" href="_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(&quot;xmlhttp&quot;);
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="_variables/plugins.html">$plugins</a>-&gt;<a class="function" onClick="logFunction('run_hooks')" href="_functions/run_hooks.html" onMouseOver="funcPopup(event,'run_hooks')">run_hooks</a>(&quot;xmlhttp&quot;);
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">// Fetch a list of usernames beginning with a certain string (used for auto completion)</span>
<a name="l118"><span class="linenum"> 118</span></a>  if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;get_users&quot;)
<a name="l119"><span class="linenum"> 119</span></a>  {
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">    // If the string is less than 3 characters, quit.</span>
<a name="l121"><span class="linenum"> 121</span></a>      if(<a class="function" onClick="logFunction('my_strlen')" href="_functions/my_strlen.html" onMouseOver="funcPopup(event,'my_strlen')">my_strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']) &lt; 3)
<a name="l122"><span class="linenum"> 122</span></a>      {
<a name="l123"><span class="linenum"> 123</span></a>          exit;
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>      
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l127"><span class="linenum"> 127</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">    // Sanitize the input.</span>
<a name="l130"><span class="linenum"> 130</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query'] = <a class="phpfunction" onClick="logFunction('str_replace')" href="_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;%&quot;, &quot;_&quot;), array(&quot;\\%&quot;, &quot;\\_&quot;), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']);
<a name="l131"><span class="linenum"> 131</span></a>      
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">    // Query for any matching users.</span>
<a name="l133"><span class="linenum"> 133</span></a>      <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a> = array(
<a name="l134"><span class="linenum"> 134</span></a>          &quot;order_by&quot; =&gt; &quot;username&quot;,
<a name="l135"><span class="linenum"> 135</span></a>          &quot;order_dir&quot; =&gt; &quot;asc&quot;,
<a name="l136"><span class="linenum"> 136</span></a>          &quot;limit_start&quot; =&gt; 0,
<a name="l137"><span class="linenum"> 137</span></a>          &quot;limit&quot; =&gt; 15
<a name="l138"><span class="linenum"> 138</span></a>      );
<a name="l139"><span class="linenum"> 139</span></a>      
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;users&quot;, &quot;uid, username&quot;, &quot;username LIKE '&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']).&quot;%'&quot;, <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a>);
<a name="l141"><span class="linenum"> 141</span></a>      while(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l142"><span class="linenum"> 142</span></a>      {
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a>['username'] = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a>['username']);
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Send the result to the browser for this user.</span>
<a name="l145"><span class="linenum"> 145</span></a>          echo &quot;&lt;div&gt;\n&quot;;
<a name="l146"><span class="linenum"> 146</span></a>          echo &quot;&lt;span class=\&quot;username\&quot;&gt;{<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a>['username']}&lt;/span&gt;\n&quot;;
<a name="l147"><span class="linenum"> 147</span></a>          echo &quot;&lt;/div&gt;\n&quot;;
<a name="l148"><span class="linenum"> 148</span></a>      }
<a name="l149"><span class="linenum"> 149</span></a>  }
<a name="l150"><span class="linenum"> 150</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;get_usergroups&quot;)
<a name="l151"><span class="linenum"> 151</span></a>  {
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">    // If the string is less than 3 characters, quit.</span>
<a name="l153"><span class="linenum"> 153</span></a>      if(<a class="function" onClick="logFunction('my_strlen')" href="_functions/my_strlen.html" onMouseOver="funcPopup(event,'my_strlen')">my_strlen</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']) &lt; 3)
<a name="l154"><span class="linenum"> 154</span></a>      {
<a name="l155"><span class="linenum"> 155</span></a>          exit;
<a name="l156"><span class="linenum"> 156</span></a>      }
<a name="l157"><span class="linenum"> 157</span></a>      
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l159"><span class="linenum"> 159</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">    // Sanitize the input.</span>
<a name="l162"><span class="linenum"> 162</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query'] = <a class="phpfunction" onClick="logFunction('str_replace')" href="_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;%&quot;, &quot;_&quot;), array(&quot;\\%&quot;, &quot;\\_&quot;), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']);
<a name="l163"><span class="linenum"> 163</span></a>      
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">    // Query for any matching usergroups.</span>
<a name="l165"><span class="linenum"> 165</span></a>      <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a> = array(
<a name="l166"><span class="linenum"> 166</span></a>          &quot;order_by&quot; =&gt; &quot;title&quot;,
<a name="l167"><span class="linenum"> 167</span></a>          &quot;order_dir&quot; =&gt; &quot;asc&quot;,
<a name="l168"><span class="linenum"> 168</span></a>          &quot;limit_start&quot; =&gt; 0,
<a name="l169"><span class="linenum"> 169</span></a>          &quot;limit&quot; =&gt; 15
<a name="l170"><span class="linenum"> 170</span></a>      );
<a name="l171"><span class="linenum"> 171</span></a>      
<a name="l172"><span class="linenum"> 172</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;usergroups&quot;, &quot;gid, title&quot;, &quot;title LIKE '&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['query']).&quot;%'&quot;, <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a>);
<a name="l173"><span class="linenum"> 173</span></a>      while(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('group')" href="_variables/group.html">$group</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l174"><span class="linenum"> 174</span></a>      {
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('group')" href="_variables/group.html">$group</a>['title'] = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('group')" href="_variables/group.html">$group</a>['title']);
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // Send the result to the browser for this usergroup.</span>
<a name="l177"><span class="linenum"> 177</span></a>          echo &quot;&lt;div&gt;\n&quot;;
<a name="l178"><span class="linenum"> 178</span></a>          echo &quot;&lt;span class=\&quot;usergroup\&quot;&gt;{<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('group')" href="_variables/group.html">$group</a>['title']} ({<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('usergroup')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/usergroup.html">usergroup</a>} {<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('group')" href="_variables/group.html">$group</a>['gid']})&lt;/span&gt;\n&quot;;
<a name="l179"><span class="linenum"> 179</span></a>          echo &quot;&lt;/div&gt;\n&quot;;
<a name="l180"><span class="linenum"> 180</span></a>      }
<a name="l181"><span class="linenum"> 181</span></a>  }
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">// This action provides editing of thread/post subjects from within their respective list pages.</span>
<a name="l183"><span class="linenum"> 183</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;edit_subject&quot; &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('request_method')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/request_method.html">request_method</a> == &quot;post&quot;)
<a name="l184"><span class="linenum"> 184</span></a>  {
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">    // Verify POST request</span>
<a name="l186"><span class="linenum"> 186</span></a>      if(!<a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key'], true))
<a name="l187"><span class="linenum"> 187</span></a>      {
<a name="l188"><span class="linenum"> 188</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_post_code')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_post_code.html">invalid_post_code</a>);
<a name="l189"><span class="linenum"> 189</span></a>      }
<a name="l190"><span class="linenum"> 190</span></a>      
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">    // Editing a post subject.</span>
<a name="l192"><span class="linenum"> 192</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'])
<a name="l193"><span class="linenum"> 193</span></a>      {
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // Fetch the post from the database.</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="function" onClick="logFunction('get_post')" href="_functions/get_post.html" onMouseOver="funcPopup(event,'get_post')">get_post</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid']);
<a name="l196"><span class="linenum"> 196</span></a>          
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">        // No result, die.</span>
<a name="l198"><span class="linenum"> 198</span></a>          if(!<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'])
<a name="l199"><span class="linenum"> 199</span></a>          {
<a name="l200"><span class="linenum"> 200</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('post_doesnt_exist')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/post_doesnt_exist.html">post_doesnt_exist</a>);
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>          
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        // Fetch the thread associated with this post.</span>
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a> = <a class="function" onClick="logFunction('get_thread')" href="_functions/get_thread.html" onMouseOver="funcPopup(event,'get_thread')">get_thread</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['tid']);
<a name="l205"><span class="linenum"> 205</span></a>      }
<a name="l206"><span class="linenum"> 206</span></a>      
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">    // We're editing a thread subject.</span>
<a name="l208"><span class="linenum"> 208</span></a>      else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid'])
<a name="l209"><span class="linenum"> 209</span></a>      {
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">        // Fetch the thread.</span>
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a> = <a class="function" onClick="logFunction('get_thread')" href="_functions/get_thread.html" onMouseOver="funcPopup(event,'get_thread')">get_thread</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid']);
<a name="l212"><span class="linenum"> 212</span></a>          
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">        // Fetch some of the information from the first post of this thread.</span>
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a> = array(
<a name="l215"><span class="linenum"> 215</span></a>              &quot;order_by&quot; =&gt; &quot;dateline&quot;,
<a name="l216"><span class="linenum"> 216</span></a>              &quot;order_dir&quot; =&gt; &quot;asc&quot;,
<a name="l217"><span class="linenum"> 217</span></a>          );
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;posts&quot;, &quot;pid,uid,dateline&quot;, &quot;tid='&quot;.<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'].&quot;'&quot;, <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a>);
<a name="l219"><span class="linenum"> 219</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l220"><span class="linenum"> 220</span></a>      }
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">    // Fetch the specific forum this thread/post is in.</span>
<a name="l222"><span class="linenum"> 222</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a> = <a class="function" onClick="logFunction('get_forum')" href="_functions/get_forum.html" onMouseOver="funcPopup(event,'get_forum')">get_forum</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['fid']);
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">    // Missing thread, invalid forum? Error.</span>
<a name="l225"><span class="linenum"> 225</span></a>      if(!<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'] || !<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid'] || <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['type'] != &quot;f&quot;)
<a name="l226"><span class="linenum"> 226</span></a>      {
<a name="l227"><span class="linenum"> 227</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_doesnt_exist')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_doesnt_exist.html">thread_doesnt_exist</a>);
<a name="l228"><span class="linenum"> 228</span></a>      }
<a name="l229"><span class="linenum"> 229</span></a>      
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">    // Fetch forum permissions.</span>
<a name="l231"><span class="linenum"> 231</span></a>      <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a> = <a class="function" onClick="logFunction('forum_permissions')" href="_functions/forum_permissions.html" onMouseOver="funcPopup(event,'forum_permissions')">forum_permissions</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid']);
<a name="l232"><span class="linenum"> 232</span></a>      
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">    // If this user is not a moderator with &quot;caneditposts&quot; permissions.</span>
<a name="l234"><span class="linenum"> 234</span></a>      if(!<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid'], &quot;caneditposts&quot;))
<a name="l235"><span class="linenum"> 235</span></a>      {
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">        // Thread is closed - no editing allowed.</span>
<a name="l237"><span class="linenum"> 237</span></a>          if(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['closed'] == 1)
<a name="l238"><span class="linenum"> 238</span></a>          {
<a name="l239"><span class="linenum"> 239</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_closed_edit_subjects')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_closed_edit_subjects.html">thread_closed_edit_subjects</a>);
<a name="l240"><span class="linenum"> 240</span></a>          }
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">        // Forum is not open, user doesn't have permission to edit, or author doesn't match this user - don't allow editing.</span>
<a name="l242"><span class="linenum"> 242</span></a>          else if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['open'] == 0 || <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['caneditposts'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] != <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['uid'] || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] == 0)
<a name="l243"><span class="linenum"> 243</span></a>          {
<a name="l244"><span class="linenum"> 244</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('no_permission_edit_subject')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/no_permission_edit_subject.html">no_permission_edit_subject</a>);
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">        // If we're past the edit time limit - don't allow editing.</span>
<a name="l247"><span class="linenum"> 247</span></a>          else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit'] != 0 &amp;&amp; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['dateline'] &lt; (<a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>-(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit']*60)))
<a name="l248"><span class="linenum"> 248</span></a>          {
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit']);
<a name="l250"><span class="linenum"> 250</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a>);
<a name="l251"><span class="linenum"> 251</span></a>          }
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> = false;
<a name="l253"><span class="linenum"> 253</span></a>      }
<a name="l254"><span class="linenum"> 254</span></a>      else
<a name="l255"><span class="linenum"> 255</span></a>      {
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> = true;
<a name="l257"><span class="linenum"> 257</span></a>      }
<a name="l258"><span class="linenum"> 258</span></a>      <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'];
<a name="l259"><span class="linenum"> 259</span></a>      if(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>) != &quot;utf-8&quot;)
<a name="l260"><span class="linenum"> 260</span></a>      {
<a name="l261"><span class="linenum"> 261</span></a>          if(<a class="phpfunction" onClick="logFunction('function_exists')" href="_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(&quot;iconv&quot;))
<a name="l262"><span class="linenum"> 262</span></a>          {
<a name="l263"><span class="linenum"> 263</span></a>              <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = iconv(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>, &quot;UTF-8//IGNORE&quot;, <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>);
<a name="l264"><span class="linenum"> 264</span></a>          }
<a name="l265"><span class="linenum"> 265</span></a>          else if(<a class="phpfunction" onClick="logFunction('function_exists')" href="_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(&quot;mb_convert_encoding&quot;))
<a name="l266"><span class="linenum"> 266</span></a>          {
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = @<a class="phpfunction" onClick="logFunction('mb_convert_encoding')" href="_functions/mb_convert_encoding.html" onMouseOver="phpfuncPopup(event,'mb_convert_encoding')">mb_convert_encoding</a>(<a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>, <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>, &quot;UTF-8&quot;);
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>          else if(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>) == &quot;iso-8859-1&quot;)
<a name="l270"><span class="linenum"> 270</span></a>          {
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a> = <a class="phpfunction" onClick="logFunction('utf8_decode')" href="_functions/utf8_decode.html" onMouseOver="phpfuncPopup(event,'utf8_decode')">utf8_decode</a>(<a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>);
<a name="l272"><span class="linenum"> 272</span></a>          }
<a name="l273"><span class="linenum"> 273</span></a>      }    
<a name="l274"><span class="linenum"> 274</span></a>      
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    // Set up posthandler.</span>
<a name="l276"><span class="linenum"> 276</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/datahandlers/post.php.html" onMouseOver="reqPopup(event, 'post.php', 'inc/datahandlers/post.php')"> MYBB_ROOT.&quot;inc/datahandlers/post.php&quot;</a>;
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PostDataHandler')" href="_classes/postdatahandler.html" onMouseOver="classPopup(event,'postdatahandler')">PostDataHandler</a>(&quot;update&quot;);
<a name="l278"><span class="linenum"> 278</span></a>      <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a onClick="logVariable('action')" class="var it8057" onMouseOver="hilite(8057)" onMouseOut="lolite()" href="_variables/action.html">action</a> = &quot;post&quot;;
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">    // Set the post data that came from the input to the $post array.</span>
<a name="l281"><span class="linenum"> 281</span></a>      <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('updatepost')" href="_variables/updatepost.html">$updatepost</a> = array(
<a name="l282"><span class="linenum"> 282</span></a>          &quot;pid&quot; =&gt; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'],
<a name="l283"><span class="linenum"> 283</span></a>          &quot;tid&quot; =&gt; <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'],
<a name="l284"><span class="linenum"> 284</span></a>          &quot;subject&quot; =&gt; <a class="var it206" onMouseOver="hilite(206)" onMouseOut="lolite()" onClick="logVariable('subject')" href="_variables/subject.html">$subject</a>,
<a name="l285"><span class="linenum"> 285</span></a>          &quot;edit_uid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid']
<a name="l286"><span class="linenum"> 286</span></a>      );
<a name="l287"><span class="linenum"> 287</span></a>      <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('updatepost')" href="_variables/updatepost.html">$updatepost</a>);
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">    // Now let the post handler do all the hard work.</span>
<a name="l290"><span class="linenum"> 290</span></a>      if(!<a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('validate_post')" href="_functions/validate_post.html" onMouseOver="funcPopup(event,'validate_post')">validate_post</a>())
<a name="l291"><span class="linenum"> 291</span></a>      {
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('get_friendly_errors')" href="_functions/get_friendly_errors.html" onMouseOver="funcPopup(event,'get_friendly_errors')">get_friendly_errors</a>();
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n\n&quot;, <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>);
<a name="l294"><span class="linenum"> 294</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a>);
<a name="l295"><span class="linenum"> 295</span></a>      }
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">    // No errors were found, we can call the update method.</span>
<a name="l297"><span class="linenum"> 297</span></a>      else
<a name="l298"><span class="linenum"> 298</span></a>      {
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('update_post')" href="_functions/update_post.html" onMouseOver="funcPopup(event,'update_post')">update_post</a>();
<a name="l300"><span class="linenum"> 300</span></a>          if(<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ismod')" href="_variables/ismod.html">$ismod</a> == true)
<a name="l301"><span class="linenum"> 301</span></a>          {
<a name="l302"><span class="linenum"> 302</span></a>              <a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('modlogdata')" href="_variables/modlogdata.html">$modlogdata</a> = array(
<a name="l303"><span class="linenum"> 303</span></a>                  &quot;tid&quot; =&gt; <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'],
<a name="l304"><span class="linenum"> 304</span></a>                  &quot;pid&quot; =&gt; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'],
<a name="l305"><span class="linenum"> 305</span></a>                  &quot;fid&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid']
<a name="l306"><span class="linenum"> 306</span></a>              );
<a name="l307"><span class="linenum"> 307</span></a>              <a class="function" onClick="logFunction('log_moderator_action')" href="_functions/log_moderator_action.html" onMouseOver="funcPopup(event,'log_moderator_action')">log_moderator_action</a>(<a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('modlogdata')" href="_variables/modlogdata.html">$modlogdata</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edited_post')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edited_post.html">edited_post</a>);
<a name="l308"><span class="linenum"> 308</span></a>          }
<a name="l309"><span class="linenum"> 309</span></a>      }
<a name="l310"><span class="linenum"> 310</span></a>      
<a name="l311"><span class="linenum"> 311</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/class_parser.php.html" onMouseOver="reqPopup(event, 'class_parser.php', 'inc/class_parser.php')"> MYBB_ROOT.&quot;inc/class_parser.php&quot;</a>;
<a name="l312"><span class="linenum"> 312</span></a>      <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a> = <span class="keyword">new </span><a class="class" onClick="logClass('postParser')" href="_classes/postparser.html" onMouseOver="classPopup(event,'postparser')">postParser</a>;
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l315"><span class="linenum"> 315</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l316"><span class="linenum"> 316</span></a>      
<a name="l317"><span class="linenum"> 317</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'] = <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a>-&gt;<a class="function" onClick="logFunction('parse_badwords')" href="_functions/parse_badwords.html" onMouseOver="funcPopup(event,'parse_badwords')">parse_badwords</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value']);
<a name="l318"><span class="linenum"> 318</span></a>      
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">    // Spit the subject back to the browser.</span>
<a name="l320"><span class="linenum"> 320</span></a>      echo <a class="phpfunction" onClick="logFunction('substr')" href="_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'], 0, 120); <span class="comment">// 120 is the varchar length for the subject column</span>
<a name="l321"><span class="linenum"> 321</span></a>      
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">    // Close the connection.</span>
<a name="l323"><span class="linenum"> 323</span></a>      exit;
<a name="l324"><span class="linenum"> 324</span></a>  }
<a name="l325"><span class="linenum"> 325</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;edit_post&quot;)
<a name="l326"><span class="linenum"> 326</span></a>  {    
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">    // Fetch the post from the database.</span>
<a name="l328"><span class="linenum"> 328</span></a>      <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a> = <a class="function" onClick="logFunction('get_post')" href="_functions/get_post.html" onMouseOver="funcPopup(event,'get_post')">get_post</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid']);
<a name="l329"><span class="linenum"> 329</span></a>          
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">    // No result, die.</span>
<a name="l331"><span class="linenum"> 331</span></a>      if(!<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'])
<a name="l332"><span class="linenum"> 332</span></a>      {
<a name="l333"><span class="linenum"> 333</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('post_doesnt_exist')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/post_doesnt_exist.html">post_doesnt_exist</a>);
<a name="l334"><span class="linenum"> 334</span></a>      }
<a name="l335"><span class="linenum"> 335</span></a>      
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">    // Fetch the thread associated with this post.</span>
<a name="l337"><span class="linenum"> 337</span></a>      <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a> = <a class="function" onClick="logFunction('get_thread')" href="_functions/get_thread.html" onMouseOver="funcPopup(event,'get_thread')">get_thread</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['tid']);
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">    // Fetch the specific forum this thread/post is in.</span>
<a name="l340"><span class="linenum"> 340</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a> = <a class="function" onClick="logFunction('get_forum')" href="_functions/get_forum.html" onMouseOver="funcPopup(event,'get_forum')">get_forum</a>(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['fid']);
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">    // Missing thread, invalid forum? Error.</span>
<a name="l343"><span class="linenum"> 343</span></a>      if(!<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['tid'] || !<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid'] || <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['type'] != &quot;f&quot;)
<a name="l344"><span class="linenum"> 344</span></a>      {
<a name="l345"><span class="linenum"> 345</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_doesnt_exist')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_doesnt_exist.html">thread_doesnt_exist</a>);
<a name="l346"><span class="linenum"> 346</span></a>      }
<a name="l347"><span class="linenum"> 347</span></a>      
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">    // Fetch forum permissions.</span>
<a name="l349"><span class="linenum"> 349</span></a>      <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a> = <a class="function" onClick="logFunction('forum_permissions')" href="_functions/forum_permissions.html" onMouseOver="funcPopup(event,'forum_permissions')">forum_permissions</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid']);
<a name="l350"><span class="linenum"> 350</span></a>      
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">    // If this user is not a moderator with &quot;caneditposts&quot; permissions.</span>
<a name="l352"><span class="linenum"> 352</span></a>      if(!<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['fid'], &quot;caneditposts&quot;))
<a name="l353"><span class="linenum"> 353</span></a>      {
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">        // Thread is closed - no editing allowed.</span>
<a name="l355"><span class="linenum"> 355</span></a>          if(<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('thread')" href="_variables/thread.html">$thread</a>['closed'] == 1)
<a name="l356"><span class="linenum"> 356</span></a>          {
<a name="l357"><span class="linenum"> 357</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('thread_closed_edit_message')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/thread_closed_edit_message.html">thread_closed_edit_message</a>);
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">        // Forum is not open, user doesn't have permission to edit, or author doesn't match this user - don't allow editing.</span>
<a name="l360"><span class="linenum"> 360</span></a>          else if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['open'] == 0 || <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('forumpermissions')" href="_variables/forumpermissions.html">$forumpermissions</a>['caneditposts'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] != <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['uid'] || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['suspendposting'] == 1)
<a name="l361"><span class="linenum"> 361</span></a>          {
<a name="l362"><span class="linenum"> 362</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('no_permission_edit_post')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/no_permission_edit_post.html">no_permission_edit_post</a>);
<a name="l363"><span class="linenum"> 363</span></a>          }
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">        // If we're past the edit time limit - don't allow editing.</span>
<a name="l365"><span class="linenum"> 365</span></a>          else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit'] != 0 &amp;&amp; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['dateline'] &lt; (<a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>-(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit']*60)))
<a name="l366"><span class="linenum"> 366</span></a>          {
<a name="l367"><span class="linenum"> 367</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['edittimelimit']);
<a name="l368"><span class="linenum"> 368</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('edit_time_limit')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/edit_time_limit.html">edit_time_limit</a>);
<a name="l369"><span class="linenum"> 369</span></a>          }
<a name="l370"><span class="linenum"> 370</span></a>      }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">    // Forum is closed - no editing allowed (for anyone)</span>
<a name="l373"><span class="linenum"> 373</span></a>      if(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['open'] == 0)
<a name="l374"><span class="linenum"> 374</span></a>      {
<a name="l375"><span class="linenum"> 375</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('no_permission_edit_post')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/no_permission_edit_post.html">no_permission_edit_post</a>);
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['do'] == &quot;get_post&quot;)
<a name="l379"><span class="linenum"> 379</span></a>      {
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">        // Send our headers.</span>
<a name="l381"><span class="linenum"> 381</span></a>          <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l382"><span class="linenum"> 382</span></a>          
<a name="l383"><span class="linenum"> 383</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'] = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message']);
<a name="l384"><span class="linenum"> 384</span></a>          
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">        // Send the contents of the post.</span>
<a name="l386"><span class="linenum"> 386</span></a>          eval(&quot;\<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('inline_editor')" href="_variables/inline_editor.html">$inline_editor</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;xmlhttp_inline_post_editor&quot;).&quot;\&quot;;&quot;);
<a name="l387"><span class="linenum"> 387</span></a>          echo &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;{<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}\&quot;?&quot;.&quot;&gt;&quot;;
<a name="l388"><span class="linenum"> 388</span></a>          echo &quot;&lt;form&gt;&quot;.<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('inline_editor')" href="_variables/inline_editor.html">$inline_editor</a>.&quot;&lt;/form&gt;&quot;;
<a name="l389"><span class="linenum"> 389</span></a>          exit;
<a name="l390"><span class="linenum"> 390</span></a>      }
<a name="l391"><span class="linenum"> 391</span></a>      else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['do'] == &quot;update_post&quot;)
<a name="l392"><span class="linenum"> 392</span></a>      {
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">        // Verify POST request</span>
<a name="l394"><span class="linenum"> 394</span></a>          if(!<a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key'], true))
<a name="l395"><span class="linenum"> 395</span></a>          {
<a name="l396"><span class="linenum"> 396</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_post_code')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_post_code.html">invalid_post_code</a>);
<a name="l397"><span class="linenum"> 397</span></a>          }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = (string)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'];
<a name="l400"><span class="linenum"> 400</span></a>          if(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>) != &quot;utf-8&quot;)
<a name="l401"><span class="linenum"> 401</span></a>          {
<a name="l402"><span class="linenum"> 402</span></a>              if(<a class="phpfunction" onClick="logFunction('function_exists')" href="_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(&quot;iconv&quot;))
<a name="l403"><span class="linenum"> 403</span></a>              {
<a name="l404"><span class="linenum"> 404</span></a>                  <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = iconv(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>, &quot;UTF-8//IGNORE&quot;, <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>);
<a name="l405"><span class="linenum"> 405</span></a>              }
<a name="l406"><span class="linenum"> 406</span></a>              else if(<a class="phpfunction" onClick="logFunction('function_exists')" href="_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(&quot;mb_convert_encoding&quot;))
<a name="l407"><span class="linenum"> 407</span></a>              {
<a name="l408"><span class="linenum"> 408</span></a>                  <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = @<a class="phpfunction" onClick="logFunction('mb_convert_encoding')" href="_functions/mb_convert_encoding.html" onMouseOver="phpfuncPopup(event,'mb_convert_encoding')">mb_convert_encoding</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>, <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>, &quot;UTF-8&quot;);
<a name="l409"><span class="linenum"> 409</span></a>              }
<a name="l410"><span class="linenum"> 410</span></a>              else if(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>) == &quot;iso-8859-1&quot;)
<a name="l411"><span class="linenum"> 411</span></a>              {
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="phpfunction" onClick="logFunction('utf8_decode')" href="_functions/utf8_decode.html" onMouseOver="phpfuncPopup(event,'utf8_decode')">utf8_decode</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>);
<a name="l413"><span class="linenum"> 413</span></a>              }
<a name="l414"><span class="linenum"> 414</span></a>          }
<a name="l415"><span class="linenum"> 415</span></a>          
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">        // Set up posthandler.</span>
<a name="l417"><span class="linenum"> 417</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/datahandlers/post.php.html" onMouseOver="reqPopup(event, 'post.php', 'inc/datahandlers/post.php')"> MYBB_ROOT.&quot;inc/datahandlers/post.php&quot;</a>;
<a name="l418"><span class="linenum"> 418</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PostDataHandler')" href="_classes/postdatahandler.html" onMouseOver="classPopup(event,'postdatahandler')">PostDataHandler</a>(&quot;update&quot;);
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a onClick="logVariable('action')" class="var it8057" onMouseOver="hilite(8057)" onMouseOut="lolite()" href="_variables/action.html">action</a> = &quot;post&quot;;
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">        // Set the post data that came from the input to the $post array.</span>
<a name="l422"><span class="linenum"> 422</span></a>          <a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('updatepost')" href="_variables/updatepost.html">$updatepost</a> = array(
<a name="l423"><span class="linenum"> 423</span></a>              &quot;pid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['pid'],
<a name="l424"><span class="linenum"> 424</span></a>              &quot;message&quot; =&gt; <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>,
<a name="l425"><span class="linenum"> 425</span></a>              &quot;edit_uid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid']
<a name="l426"><span class="linenum"> 426</span></a>          );
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it1612" onMouseOver="hilite(1612)" onMouseOut="lolite()" onClick="logVariable('updatepost')" href="_variables/updatepost.html">$updatepost</a>);
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">        // Now let the post handler do all the hard work.</span>
<a name="l430"><span class="linenum"> 430</span></a>          if(!<a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('validate_post')" href="_functions/validate_post.html" onMouseOver="funcPopup(event,'validate_post')">validate_post</a>())
<a name="l431"><span class="linenum"> 431</span></a>          {
<a name="l432"><span class="linenum"> 432</span></a>              <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('get_friendly_errors')" href="_functions/get_friendly_errors.html" onMouseOver="funcPopup(event,'get_friendly_errors')">get_friendly_errors</a>();
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n\n&quot;, <a class="var it176" onMouseOver="hilite(176)" onMouseOut="lolite()" onClick="logVariable('post_errors')" href="_variables/post_errors.html">$post_errors</a>);
<a name="l434"><span class="linenum"> 434</span></a>              <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('errors')" href="_variables/errors.html">$errors</a>);
<a name="l435"><span class="linenum"> 435</span></a>          }
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">        // No errors were found, we can call the update method.</span>
<a name="l437"><span class="linenum"> 437</span></a>          else
<a name="l438"><span class="linenum"> 438</span></a>          {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('postinfo')" href="_variables/postinfo.html">$postinfo</a> = <a class="var it174" onMouseOver="hilite(174)" onMouseOut="lolite()" onClick="logVariable('posthandler')" href="_variables/posthandler.html">$posthandler</a>-&gt;<a class="function" onClick="logFunction('update_post')" href="_functions/update_post.html" onMouseOver="funcPopup(event,'update_post')">update_post</a>();
<a name="l440"><span class="linenum"> 440</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> = <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('postinfo')" href="_variables/postinfo.html">$postinfo</a>['visible'];
<a name="l441"><span class="linenum"> 441</span></a>              if(<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('visible')" href="_variables/visible.html">$visible</a> == 0 &amp;&amp; !<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>())
<a name="l442"><span class="linenum"> 442</span></a>              {
<a name="l443"><span class="linenum"> 443</span></a>                  echo &quot;&lt;p&gt;\n&quot;;
<a name="l444"><span class="linenum"> 444</span></a>                  echo <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('post_moderation')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/post_moderation.html">post_moderation</a>;
<a name="l445"><span class="linenum"> 445</span></a>                  echo &quot;&lt;/p&gt;\n&quot;;
<a name="l446"><span class="linenum"> 446</span></a>                  exit;
<a name="l447"><span class="linenum"> 447</span></a>              }
<a name="l448"><span class="linenum"> 448</span></a>          }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/class_parser.php.html" onMouseOver="reqPopup(event, 'class_parser.php', 'inc/class_parser.php')"> MYBB_ROOT.&quot;inc/class_parser.php&quot;</a>;
<a name="l451"><span class="linenum"> 451</span></a>          <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a> = <span class="keyword">new </span><a class="class" onClick="logClass('postParser')" href="_classes/postparser.html" onMouseOver="classPopup(event,'postparser')">postParser</a>;
<a name="l452"><span class="linenum"> 452</span></a>          
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a> = array(
<a name="l454"><span class="linenum"> 454</span></a>              &quot;allow_html&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowhtml'],
<a name="l455"><span class="linenum"> 455</span></a>              &quot;allow_mycode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowmycode'],
<a name="l456"><span class="linenum"> 456</span></a>              &quot;allow_smilies&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowsmilies'],
<a name="l457"><span class="linenum"> 457</span></a>              &quot;allow_imgcode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowimgcode'],
<a name="l458"><span class="linenum"> 458</span></a>              &quot;allow_videocode&quot; =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('forum')" href="_variables/forum.html">$forum</a>['allowvideocode'],
<a name="l459"><span class="linenum"> 459</span></a>              &quot;me_username&quot; =&gt; <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['username'],
<a name="l460"><span class="linenum"> 460</span></a>              &quot;filter_badwords&quot; =&gt; 1
<a name="l461"><span class="linenum"> 461</span></a>          );
<a name="l462"><span class="linenum"> 462</span></a>          
<a name="l463"><span class="linenum"> 463</span></a>          if(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['smilieoff'] == 1)
<a name="l464"><span class="linenum"> 464</span></a>          {
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a>['allow_smilies'] = 0;
<a name="l466"><span class="linenum"> 466</span></a>          }
<a name="l467"><span class="linenum"> 467</span></a>      
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'] = <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a>-&gt;<a class="function" onClick="logFunction('parse_message')" href="_functions/parse_message.html" onMouseOver="funcPopup(event,'parse_message')">parse_message</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>, <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('parser_options')" href="_variables/parser_options.html">$parser_options</a>);
<a name="l469"><span class="linenum"> 469</span></a>          
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">        // Now lets fetch all of the attachments for these posts.</span>
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;attachments&quot;, &quot;*&quot;, &quot;pid='{<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid']}'&quot;);
<a name="l472"><span class="linenum"> 472</span></a>          while(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l473"><span class="linenum"> 473</span></a>          {
<a name="l474"><span class="linenum"> 474</span></a>              <a class="var it214" onMouseOver="hilite(214)" onMouseOut="lolite()" onClick="logVariable('attachcache')" href="_variables/attachcache.html">$attachcache</a>[<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['pid']][<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>['aid']] = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="_variables/attachment.html">$attachment</a>;
<a name="l475"><span class="linenum"> 475</span></a>          }
<a name="l476"><span class="linenum"> 476</span></a>          
<a name="l477"><span class="linenum"> 477</span></a>          <span class="keyword">require_once</span> <a class="filename" href="inc/functions_post.php.html" onMouseOver="reqPopup(event, 'functions_post.php', 'inc/functions_post.php')"> MYBB_ROOT.&quot;inc/functions_post.php&quot;</a>;
<a name="l478"><span class="linenum"> 478</span></a>          
<a name="l479"><span class="linenum"> 479</span></a>          <a class="function" onClick="logFunction('get_post_attachments')" href="_functions/get_post_attachments.html" onMouseOver="funcPopup(event,'get_post_attachments')">get_post_attachments</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['pid'], <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">        // Figure out if we need to show an &quot;edited by&quot; message</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">        // Only show if at least one of &quot;showeditedby&quot; or &quot;showeditedbyadmin&quot; is enabled</span>
<a name="l483"><span class="linenum"> 483</span></a>          if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['showeditedby'] != 0 &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['showeditedbyadmin'] != 0)
<a name="l484"><span class="linenum"> 484</span></a>          {
<a name="l485"><span class="linenum"> 485</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['editdate'] = <a class="function" onClick="logFunction('my_date')" href="_functions/my_date.html" onMouseOver="funcPopup(event,'my_date')">my_date</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['dateformat'], <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>);
<a name="l486"><span class="linenum"> 486</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['edittime'] = <a class="function" onClick="logFunction('my_date')" href="_functions/my_date.html" onMouseOver="funcPopup(event,'my_date')">my_date</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['timeformat'], <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>);
<a name="l487"><span class="linenum"> 487</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['editnote'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('postbit_edited')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/postbit_edited.html">postbit_edited</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['editdate'], <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['edittime']);
<a name="l488"><span class="linenum"> 488</span></a>              <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['editedprofilelink'] = <a class="function" onClick="logFunction('build_profile_link')" href="_functions/build_profile_link.html" onMouseOver="funcPopup(event,'build_profile_link')">build_profile_link</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['username'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['uid']);
<a name="l489"><span class="linenum"> 489</span></a>              eval(&quot;\<a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('editedmsg')" href="_variables/editedmsg.html">$editedmsg</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;postbit_editedby&quot;).&quot;\&quot;;&quot;);
<a name="l490"><span class="linenum"> 490</span></a>          }
<a name="l491"><span class="linenum"> 491</span></a>          
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">        // Send our headers.</span>
<a name="l493"><span class="linenum"> 493</span></a>          <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l494"><span class="linenum"> 494</span></a>          echo &quot;&lt;p&gt;\n&quot;;
<a name="l495"><span class="linenum"> 495</span></a>          echo <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>['message'];
<a name="l496"><span class="linenum"> 496</span></a>          echo &quot;&lt;/p&gt;\n&quot;;
<a name="l497"><span class="linenum"> 497</span></a>          if(<a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('editedmsg')" href="_variables/editedmsg.html">$editedmsg</a>)
<a name="l498"><span class="linenum"> 498</span></a>          {
<a name="l499"><span class="linenum"> 499</span></a>              echo <a class="phpfunction" onClick="logFunction('str_replace')" href="_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(&quot;\r&quot;, &quot;\n&quot;), &quot;&quot;, &quot;&lt;editedmsg&gt;{<a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('editedmsg')" href="_variables/editedmsg.html">$editedmsg</a>}&lt;/editedmsg&gt;&quot;);
<a name="l500"><span class="linenum"> 500</span></a>          }
<a name="l501"><span class="linenum"> 501</span></a>      }
<a name="l502"><span class="linenum"> 502</span></a>  }
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">// Fetch the list of multiquoted posts which are not in a specific thread</span>
<a name="l504"><span class="linenum"> 504</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;get_multiquoted&quot;)
<a name="l505"><span class="linenum"> 505</span></a>  {
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">    // If the cookie does not exist, exit</span>
<a name="l507"><span class="linenum"> 507</span></a>      if(!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(&quot;multiquote&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>))
<a name="l508"><span class="linenum"> 508</span></a>      {
<a name="l509"><span class="linenum"> 509</span></a>          exit;
<a name="l510"><span class="linenum"> 510</span></a>      }
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">    // Divide up the cookie using our delimeter</span>
<a name="l512"><span class="linenum"> 512</span></a>      <a class="var it1061" onMouseOver="hilite(1061)" onMouseOut="lolite()" onClick="logVariable('multiquoted')" href="_variables/multiquoted.html">$multiquoted</a> = <a class="phpfunction" onClick="logFunction('explode')" href="_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;|&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('cookies')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/cookies.html">cookies</a>['multiquote']);
<a name="l513"><span class="linenum"> 513</span></a>      
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">    // No values - exit</span>
<a name="l515"><span class="linenum"> 515</span></a>      if(!<a class="phpfunction" onClick="logFunction('is_array')" href="_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1061" onMouseOver="hilite(1061)" onMouseOut="lolite()" onClick="logVariable('multiquoted')" href="_variables/multiquoted.html">$multiquoted</a>))
<a name="l516"><span class="linenum"> 516</span></a>      {
<a name="l517"><span class="linenum"> 517</span></a>          exit;
<a name="l518"><span class="linenum"> 518</span></a>      }
<a name="l519"><span class="linenum"> 519</span></a>      
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">    // Loop through each post ID and sanitize it before querying</span>
<a name="l521"><span class="linenum"> 521</span></a>      foreach(<a class="var it1061" onMouseOver="hilite(1061)" onMouseOut="lolite()" onClick="logVariable('multiquoted')" href="_variables/multiquoted.html">$multiquoted</a> as <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>)
<a name="l522"><span class="linenum"> 522</span></a>      {
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>[<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>] = <a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('post')" href="_variables/post.html">$post</a>);
<a name="l524"><span class="linenum"> 524</span></a>      }
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">    // Join the post IDs back together</span>
<a name="l527"><span class="linenum"> 527</span></a>      <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;,&quot;, <a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>);
<a name="l528"><span class="linenum"> 528</span></a>      
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">    // Fetch unviewable forums</span>
<a name="l530"><span class="linenum"> 530</span></a>      <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a> = <a class="function" onClick="logFunction('get_unviewable_forums')" href="_functions/get_unviewable_forums.html" onMouseOver="funcPopup(event,'get_unviewable_forums')">get_unviewable_forums</a>();
<a name="l531"><span class="linenum"> 531</span></a>      if(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>)
<a name="l532"><span class="linenum"> 532</span></a>      {
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a> = &quot;AND t.fid NOT IN ({<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>})&quot;;
<a name="l534"><span class="linenum"> 534</span></a>      }
<a name="l535"><span class="linenum"> 535</span></a>      <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = '';
<a name="l536"><span class="linenum"> 536</span></a>      
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">    // Are we loading all quoted posts or only those not in the current thread?</span>
<a name="l538"><span class="linenum"> 538</span></a>      if(!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['load_all'])
<a name="l539"><span class="linenum"> 539</span></a>      {
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('from_tid')" href="_variables/from_tid.html">$from_tid</a> = &quot;p.tid != '&quot;.<a class="phpfunction" onClick="logFunction('intval')" href="_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['tid']).&quot;' AND &quot;;
<a name="l541"><span class="linenum"> 541</span></a>      }
<a name="l542"><span class="linenum"> 542</span></a>      else
<a name="l543"><span class="linenum"> 543</span></a>      {
<a name="l544"><span class="linenum"> 544</span></a>          <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('from_tid')" href="_variables/from_tid.html">$from_tid</a> = '';
<a name="l545"><span class="linenum"> 545</span></a>      }
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/class_parser.php.html" onMouseOver="reqPopup(event, 'class_parser.php', 'inc/class_parser.php')"> MYBB_ROOT.&quot;inc/class_parser.php&quot;</a>;
<a name="l548"><span class="linenum"> 548</span></a>      <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('parser')" href="_variables/parser.html">$parser</a> = <span class="keyword">new </span><a class="class" onClick="logClass('postParser')" href="_classes/postparser.html" onMouseOver="classPopup(event,'postparser')">postParser</a>;
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/functions_posting.php.html" onMouseOver="reqPopup(event, 'functions_posting.php', 'inc/functions_posting.php')"> MYBB_ROOT.&quot;inc/functions_posting.php&quot;</a>;
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">    // Query for any posts in the list which are not within the specified thread</span>
<a name="l553"><span class="linenum"> 553</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('query')" href="_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(&quot;
<a name="l554"><span class="linenum"> 554</span></a>          SELECT p.subject, p.message, p.pid, p.tid, p.username, p.dateline, t.fid, p.visible, u.username AS userusername
<a name="l555"><span class="linenum"> 555</span></a>          FROM &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;posts p
<a name="l556"><span class="linenum"> 556</span></a>          LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;threads t <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (t.tid=p.tid)
<a name="l557"><span class="linenum"> 557</span></a>          LEFT JOIN &quot;.<a class="constant" onClick="logConstant('TABLE_PREFIX')" href="_constants/TABLE_PREFIX.html" onMouseOver="constPopup(event,'TABLE_PREFIX')">TABLE_PREFIX</a>.&quot;users u <a class="function" onClick="logFunction('ON')" href="_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.uid=p.uid)
<a name="l558"><span class="linenum"> 558</span></a>          WHERE {<a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('from_tid')" href="_variables/from_tid.html">$from_tid</a>}p.pid IN (<a class="var it1060" onMouseOver="hilite(1060)" onMouseOut="lolite()" onClick="logVariable('quoted_posts')" href="_variables/quoted_posts.html">$quoted_posts</a>) {<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('unviewable_forums')" href="_variables/unviewable_forums.html">$unviewable_forums</a>}
<a name="l559"><span class="linenum"> 559</span></a>      &quot;);
<a name="l560"><span class="linenum"> 560</span></a>      while(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l561"><span class="linenum"> 561</span></a>      {
<a name="l562"><span class="linenum"> 562</span></a>          if(!<a class="function" onClick="logFunction('is_moderator')" href="_functions/is_moderator.html" onMouseOver="funcPopup(event,'is_moderator')">is_moderator</a>(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['fid']) &amp;&amp; <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>['visible'] == 0)
<a name="l563"><span class="linenum"> 563</span></a>          {
<a name="l564"><span class="linenum"> 564</span></a>              continue;
<a name="l565"><span class="linenum"> 565</span></a>          }
<a name="l566"><span class="linenum"> 566</span></a>          
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> .= <a class="function" onClick="logFunction('parse_quoted_message')" href="_functions/parse_quoted_message.html" onMouseOver="funcPopup(event,'parse_quoted_message')">parse_quoted_message</a>(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('quoted_post')" href="_variables/quoted_post.html">$quoted_post</a>, false);
<a name="l568"><span class="linenum"> 568</span></a>      }
<a name="l569"><span class="linenum"> 569</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['maxquotedepth'] != '0')
<a name="l570"><span class="linenum"> 570</span></a>      {
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a> = <a class="function" onClick="logFunction('remove_message_quotes')" href="_functions/remove_message_quotes.html" onMouseOver="funcPopup(event,'remove_message_quotes')">remove_message_quotes</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>);
<a name="l572"><span class="linenum"> 572</span></a>      }
<a name="l573"><span class="linenum"> 573</span></a>      
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l575"><span class="linenum"> 575</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l576"><span class="linenum"> 576</span></a>      echo <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>;
<a name="l577"><span class="linenum"> 577</span></a>      exit;    
<a name="l578"><span class="linenum"> 578</span></a>  }
<a name="l579"><span class="linenum"> 579</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;refresh_captcha&quot;)
<a name="l580"><span class="linenum"> 580</span></a>  {
<a name="l581"><span class="linenum"> 581</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['imagehash']);
<a name="l582"><span class="linenum"> 582</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;captcha&quot;, &quot;dateline&quot;, &quot;imagehash='<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>'&quot;);
<a name="l583"><span class="linenum"> 583</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('num_rows')" href="_functions/num_rows.html" onMouseOver="funcPopup(event,'num_rows')">num_rows</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>) == 0)
<a name="l584"><span class="linenum"> 584</span></a>      {
<a name="l585"><span class="linenum"> 585</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('captcha_not_exists')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/captcha_not_exists.html">captcha_not_exists</a>);
<a name="l586"><span class="linenum"> 586</span></a>      }
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('delete_query')" href="_functions/delete_query.html" onMouseOver="funcPopup(event,'delete_query')">delete_query</a>(&quot;captcha&quot;, &quot;imagehash='<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>'&quot;);
<a name="l588"><span class="linenum"> 588</span></a>      <a class="var it1046" onMouseOver="hilite(1046)" onMouseOut="lolite()" onClick="logVariable('randomstr')" href="_variables/randomstr.html">$randomstr</a> = <a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>(5);
<a name="l589"><span class="linenum"> 589</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a> = md5(<a class="function" onClick="logFunction('random_str')" href="_functions/random_str.html" onMouseOver="funcPopup(event,'random_str')">random_str</a>(12));
<a name="l590"><span class="linenum"> 590</span></a>      <a class="var it1621" onMouseOver="hilite(1621)" onMouseOut="lolite()" onClick="logVariable('regimagearray')" href="_variables/regimagearray.html">$regimagearray</a> = array(
<a name="l591"><span class="linenum"> 591</span></a>          &quot;imagehash&quot; =&gt; <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>,
<a name="l592"><span class="linenum"> 592</span></a>          &quot;imagestring&quot; =&gt; <a class="var it1046" onMouseOver="hilite(1046)" onMouseOut="lolite()" onClick="logVariable('randomstr')" href="_variables/randomstr.html">$randomstr</a>,
<a name="l593"><span class="linenum"> 593</span></a>          &quot;dateline&quot; =&gt; <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a>
<a name="l594"><span class="linenum"> 594</span></a>      );
<a name="l595"><span class="linenum"> 595</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('insert_query')" href="_functions/insert_query.html" onMouseOver="funcPopup(event,'insert_query')">insert_query</a>(&quot;captcha&quot;, <a class="var it1621" onMouseOver="hilite(1621)" onMouseOut="lolite()" onClick="logVariable('regimagearray')" href="_variables/regimagearray.html">$regimagearray</a>);
<a name="l596"><span class="linenum"> 596</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l597"><span class="linenum"> 597</span></a>      echo <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>;
<a name="l598"><span class="linenum"> 598</span></a>  }
<a name="l599"><span class="linenum"> 599</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;validate_captcha&quot;)
<a name="l600"><span class="linenum"> 600</span></a>  {
<a name="l601"><span class="linenum"> 601</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l602"><span class="linenum"> 602</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['imagehash']);
<a name="l603"><span class="linenum"> 603</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;captcha&quot;, &quot;imagestring&quot;, &quot;imagehash='<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('imagehash')" href="_variables/imagehash.html">$imagehash</a>'&quot;);
<a name="l604"><span class="linenum"> 604</span></a>      if(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('num_rows')" href="_functions/num_rows.html" onMouseOver="funcPopup(event,'num_rows')">num_rows</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>) == 0)
<a name="l605"><span class="linenum"> 605</span></a>      {
<a name="l606"><span class="linenum"> 606</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('captcha_valid_not_exists')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/captcha_valid_not_exists.html">captcha_valid_not_exists</a>}&lt;/fail&gt;&quot;;
<a name="l607"><span class="linenum"> 607</span></a>          exit;
<a name="l608"><span class="linenum"> 608</span></a>      }
<a name="l609"><span class="linenum"> 609</span></a>      <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('imagestring')" href="_variables/imagestring.html">$imagestring</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_field')" href="_functions/fetch_field.html" onMouseOver="funcPopup(event,'fetch_field')">fetch_field</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>, 'imagestring');
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      if(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('imagestring')" href="_variables/imagestring.html">$imagestring</a>) == <a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value']))
<a name="l612"><span class="linenum"> 612</span></a>      {
<a name="l613"><span class="linenum"> 613</span></a>          echo &quot;&lt;success&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('captcha_matches')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/captcha_matches.html">captcha_matches</a>}&lt;/success&gt;&quot;;
<a name="l614"><span class="linenum"> 614</span></a>          exit;
<a name="l615"><span class="linenum"> 615</span></a>      }
<a name="l616"><span class="linenum"> 616</span></a>      else
<a name="l617"><span class="linenum"> 617</span></a>      {
<a name="l618"><span class="linenum"> 618</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('captcha_does_not_match')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/captcha_does_not_match.html">captcha_does_not_match</a>}&lt;/fail&gt;&quot;;
<a name="l619"><span class="linenum"> 619</span></a>          exit;
<a name="l620"><span class="linenum"> 620</span></a>      }
<a name="l621"><span class="linenum"> 621</span></a>  }
<a name="l622"><span class="linenum"> 622</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;complex_password&quot;)
<a name="l623"><span class="linenum"> 623</span></a>  {
<a name="l624"><span class="linenum"> 624</span></a>      <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('password')" href="_variables/password.html">$password</a> = <a class="phpfunction" onClick="logFunction('trim')" href="_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value']);
<a name="l625"><span class="linenum"> 625</span></a>      <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('password')" href="_variables/password.html">$password</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(<a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(160), <a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(173), <a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(0xCA), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8238), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8237), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8203)), array(&quot; &quot;, &quot;-&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;), <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('password')" href="_variables/password.html">$password</a>);
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l628"><span class="linenum"> 628</span></a>      if(!<a class="phpfunction" onClick="logFunction('preg_match')" href="_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^.*(?=.{&quot;.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['minpasswordlength'].&quot;,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/&quot;, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('password')" href="_variables/password.html">$password</a>))
<a name="l629"><span class="linenum"> 629</span></a>      {
<a name="l630"><span class="linenum"> 630</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('complex_password_fails')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/complex_password_fails.html">complex_password_fails</a>}&lt;/fail&gt;&quot;;
<a name="l631"><span class="linenum"> 631</span></a>      }
<a name="l632"><span class="linenum"> 632</span></a>      else
<a name="l633"><span class="linenum"> 633</span></a>      {
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">        // Return nothing but an OK password if passes regex</span>
<a name="l635"><span class="linenum"> 635</span></a>          echo &quot;&lt;success&gt;&lt;/success&gt;&quot;;
<a name="l636"><span class="linenum"> 636</span></a>      }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>      exit;
<a name="l639"><span class="linenum"> 639</span></a>  }
<a name="l640"><span class="linenum"> 640</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;username_availability&quot;)
<a name="l641"><span class="linenum"> 641</span></a>  {
<a name="l642"><span class="linenum"> 642</span></a>      if(!<a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key'], true))
<a name="l643"><span class="linenum"> 643</span></a>      {
<a name="l644"><span class="linenum"> 644</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_post_code')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_post_code.html">invalid_post_code</a>);
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/functions_user.php.html" onMouseOver="reqPopup(event, 'functions_user.php', 'inc/functions_user.php')"> MYBB_ROOT.&quot;inc/functions_user.php&quot;</a>;
<a name="l648"><span class="linenum"> 648</span></a>      <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'];
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">    // Fix bad characters</span>
<a name="l651"><span class="linenum"> 651</span></a>      <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="phpfunction" onClick="logFunction('trim')" href="_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>);
<a name="l652"><span class="linenum"> 652</span></a>      <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array(<a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(160), <a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(173), <a class="function" onClick="logFunction('unichr')" href="_functions/unichr.html" onMouseOver="funcPopup(event,'unichr')">unichr</a>(0xCA), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8238), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8237), <a class="function" onClick="logFunction('dec_to_utf8')" href="_functions/dec_to_utf8.html" onMouseOver="funcPopup(event,'dec_to_utf8')">dec_to_utf8</a>(8203)), array(&quot; &quot;, &quot;-&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;), <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>);
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">    // Remove multiple spaces from the username</span>
<a name="l655"><span class="linenum"> 655</span></a>      <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;#\s{2,}<span class="comment">#&quot;, &quot; &quot;, $username);</span>
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>      if(<a class="function" onClick="logFunction('empty')" href="_functions/empty.html" onMouseOver="funcPopup(event,'empty')">empty</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>))
<a name="l660"><span class="linenum"> 660</span></a>      {
<a name="l661"><span class="linenum"> 661</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('banned_characters_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/banned_characters_username.html">banned_characters_username</a>}&lt;/fail&gt;&quot;;
<a name="l662"><span class="linenum"> 662</span></a>          exit;
<a name="l663"><span class="linenum"> 663</span></a>      }
<a name="l664"><span class="linenum"> 664</span></a>      
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">    // Check if the username belongs to the list of banned usernames.</span>
<a name="l666"><span class="linenum"> 666</span></a>      <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('banned_username')" href="_variables/banned_username.html">$banned_username</a> = <a class="function" onClick="logFunction('is_banned_username')" href="_functions/is_banned_username.html" onMouseOver="funcPopup(event,'is_banned_username')">is_banned_username</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, true);
<a name="l667"><span class="linenum"> 667</span></a>      if(<a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('banned_username')" href="_variables/banned_username.html">$banned_username</a>)
<a name="l668"><span class="linenum"> 668</span></a>      {
<a name="l669"><span class="linenum"> 669</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('banned_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/banned_username.html">banned_username</a>}&lt;/fail&gt;&quot;;
<a name="l670"><span class="linenum"> 670</span></a>          exit;
<a name="l671"><span class="linenum"> 671</span></a>      }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">    // Check for certain characters in username (&lt;, &gt;, &amp;, and slashes)</span>
<a name="l674"><span class="linenum"> 674</span></a>      if(<a class="phpfunction" onClick="logFunction('strpos')" href="_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, &quot;&lt;&quot;) !== false || <a class="phpfunction" onClick="logFunction('strpos')" href="_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, &quot;&gt;&quot;) !== false || <a class="phpfunction" onClick="logFunction('strpos')" href="_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, &quot;&amp;&quot;) !== false || <a class="function" onClick="logFunction('my_strpos')" href="_functions/my_strpos.html" onMouseOver="funcPopup(event,'my_strpos')">my_strpos</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, &quot;\\&quot;) !== false || <a class="phpfunction" onClick="logFunction('strpos')" href="_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>, &quot;;&quot;) !== false)
<a name="l675"><span class="linenum"> 675</span></a>      {
<a name="l676"><span class="linenum"> 676</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('banned_characters_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/banned_characters_username.html">banned_characters_username</a>}&lt;/fail&gt;&quot;;
<a name="l677"><span class="linenum"> 677</span></a>          exit;
<a name="l678"><span class="linenum"> 678</span></a>      }
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">    // Check if the username is actually already in use</span>
<a name="l681"><span class="linenum"> 681</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;users&quot;, &quot;uid&quot;, &quot;LOWER(username)='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>)).&quot;'&quot;);
<a name="l682"><span class="linenum"> 682</span></a>      <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>      if(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a>['uid'])
<a name="l685"><span class="linenum"> 685</span></a>      {
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_taken')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_taken.html">username_taken</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_taken')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_taken.html">username_taken</a>, <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>));
<a name="l687"><span class="linenum"> 687</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_taken')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_taken.html">username_taken</a>}&lt;/fail&gt;&quot;;
<a name="l688"><span class="linenum"> 688</span></a>          exit;        
<a name="l689"><span class="linenum"> 689</span></a>      }
<a name="l690"><span class="linenum"> 690</span></a>      else
<a name="l691"><span class="linenum"> 691</span></a>      {
<a name="l692"><span class="linenum"> 692</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_available')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_available.html">username_available</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_available')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_available.html">username_available</a>, <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>));
<a name="l693"><span class="linenum"> 693</span></a>          echo &quot;&lt;success&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('username_available')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/username_available.html">username_available</a>}&lt;/success&gt;&quot;;
<a name="l694"><span class="linenum"> 694</span></a>          exit;
<a name="l695"><span class="linenum"> 695</span></a>      }
<a name="l696"><span class="linenum"> 696</span></a>  }
<a name="l697"><span class="linenum"> 697</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;username_exists&quot;)
<a name="l698"><span class="linenum"> 698</span></a>  {
<a name="l699"><span class="linenum"> 699</span></a>      if(!<a class="function" onClick="logFunction('verify_post_check')" href="_functions/verify_post_check.html" onMouseOver="funcPopup(event,'verify_post_check')">verify_post_check</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['my_post_key'], true))
<a name="l700"><span class="linenum"> 700</span></a>      {
<a name="l701"><span class="linenum"> 701</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_post_code')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_post_code.html">invalid_post_code</a>);
<a name="l702"><span class="linenum"> 702</span></a>      }
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>      <span class="keyword">require_once</span> <a class="filename" href="inc/functions_user.php.html" onMouseOver="reqPopup(event, 'functions_user.php', 'inc/functions_user.php')"> MYBB_ROOT.&quot;inc/functions_user.php&quot;</a>;
<a name="l705"><span class="linenum"> 705</span></a>      <a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['value'];
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>      if(!<a class="phpfunction" onClick="logFunction('trim')" href="_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>))
<a name="l710"><span class="linenum"> 710</span></a>      {
<a name="l711"><span class="linenum"> 711</span></a>          echo &quot;&lt;success&gt;&lt;/success&gt;&quot;;
<a name="l712"><span class="linenum"> 712</span></a>          exit;
<a name="l713"><span class="linenum"> 713</span></a>      }
<a name="l714"><span class="linenum"> 714</span></a>  
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">    // Check if the username actually exists</span>
<a name="l716"><span class="linenum"> 716</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;users&quot;, &quot;uid&quot;, &quot;LOWER(username)='&quot;.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('escape_string')" href="_functions/escape_string.html" onMouseOver="funcPopup(event,'escape_string')">escape_string</a>(<a class="function" onClick="logFunction('my_strtolower')" href="_functions/my_strtolower.html" onMouseOver="funcPopup(event,'my_strtolower')">my_strtolower</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>)).&quot;'&quot;);
<a name="l717"><span class="linenum"> 717</span></a>      <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>);
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>      if(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('user')" href="_variables/user.html">$user</a>['uid'])
<a name="l720"><span class="linenum"> 720</span></a>      {
<a name="l721"><span class="linenum"> 721</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('valid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/valid_username.html">valid_username</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('valid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/valid_username.html">valid_username</a>, <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>));
<a name="l722"><span class="linenum"> 722</span></a>          echo &quot;&lt;success&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('valid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/valid_username.html">valid_username</a>}&lt;/success&gt;&quot;;
<a name="l723"><span class="linenum"> 723</span></a>          exit;
<a name="l724"><span class="linenum"> 724</span></a>      }
<a name="l725"><span class="linenum"> 725</span></a>      else
<a name="l726"><span class="linenum"> 726</span></a>      {
<a name="l727"><span class="linenum"> 727</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_username.html">invalid_username</a> = <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a class="function" onClick="logFunction('sprintf')" href="_functions/sprintf.html" onMouseOver="funcPopup(event,'sprintf')">sprintf</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_username.html">invalid_username</a>, <a class="function" onClick="logFunction('htmlspecialchars_uni')" href="_functions/htmlspecialchars_uni.html" onMouseOver="funcPopup(event,'htmlspecialchars_uni')">htmlspecialchars_uni</a>(<a class="var it735" onMouseOver="hilite(735)" onMouseOut="lolite()" onClick="logVariable('username')" href="_variables/username.html">$username</a>)));
<a name="l728"><span class="linenum"> 728</span></a>          echo &quot;&lt;fail&gt;{<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('invalid_username')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/invalid_username.html">invalid_username</a>}&lt;/fail&gt;&quot;;
<a name="l729"><span class="linenum"> 729</span></a>          exit;
<a name="l730"><span class="linenum"> 730</span></a>      }
<a name="l731"><span class="linenum"> 731</span></a>  }
<a name="l732"><span class="linenum"> 732</span></a>  else if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('input')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/input.html">input</a>['action'] == &quot;get_buddyselect&quot;)
<a name="l733"><span class="linenum"> 733</span></a>  {
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l735"><span class="linenum"> 735</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/plain; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l736"><span class="linenum"> 736</span></a>  
<a name="l737"><span class="linenum"> 737</span></a>      if(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['buddylist'] != &quot;&quot;)
<a name="l738"><span class="linenum"> 738</span></a>      {
<a name="l739"><span class="linenum"> 739</span></a>          <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a> = array(
<a name="l740"><span class="linenum"> 740</span></a>              &quot;order_by&quot; =&gt; &quot;username&quot;,
<a name="l741"><span class="linenum"> 741</span></a>              &quot;order_dir&quot; =&gt; &quot;asc&quot;
<a name="l742"><span class="linenum"> 742</span></a>          );
<a name="l743"><span class="linenum"> 743</span></a>          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('timecut')" href="_variables/timecut.html">$timecut</a> = <a class="constant" onClick="logConstant('TIME_NOW')" href="_constants/TIME_NOW.html" onMouseOver="constPopup(event,'TIME_NOW')">TIME_NOW</a> - <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('settings')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/settings.html">settings</a>['wolcutoff'];        
<a name="l744"><span class="linenum"> 744</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('simple_select')" href="_functions/simple_select.html" onMouseOver="funcPopup(event,'simple_select')">simple_select</a>(&quot;users&quot;, &quot;uid, username, usergroup, displaygroup, lastactive, lastvisit, invisible&quot;, &quot;uid IN ({<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['buddylist']})&quot;, <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('query_options')" href="_variables/query_options.html">$query_options</a>);
<a name="l745"><span class="linenum"> 745</span></a>          <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('online')" href="_variables/online.html">$online</a> = array();
<a name="l746"><span class="linenum"> 746</span></a>          <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('offline')" href="_variables/offline.html">$offline</a> = array();
<a name="l747"><span class="linenum"> 747</span></a>          while(<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('db')" href="_variables/db.html">$db</a>-&gt;<a class="function" onClick="logFunction('fetch_array')" href="_functions/fetch_array.html" onMouseOver="funcPopup(event,'fetch_array')">fetch_array</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('query')" href="_variables/query.html">$query</a>))
<a name="l748"><span class="linenum"> 748</span></a>          {
<a name="l749"><span class="linenum"> 749</span></a>              <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('buddy_name')" href="_variables/buddy_name.html">$buddy_name</a> = <a class="function" onClick="logFunction('format_name')" href="_functions/format_name.html" onMouseOver="funcPopup(event,'format_name')">format_name</a>(<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['username'], <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['usergroup'], <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['displaygroup']);
<a name="l750"><span class="linenum"> 750</span></a>              <a class="var it1203" onMouseOver="hilite(1203)" onMouseOut="lolite()" onClick="logVariable('profile_link')" href="_variables/profile_link.html">$profile_link</a> = <a class="function" onClick="logFunction('build_profile_link')" href="_functions/build_profile_link.html" onMouseOver="funcPopup(event,'build_profile_link')">build_profile_link</a>(<a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('buddy_name')" href="_variables/buddy_name.html">$buddy_name</a>, <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['uid'], '_blank');
<a name="l751"><span class="linenum"> 751</span></a>              if(<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['lastactive'] &gt; <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('timecut')" href="_variables/timecut.html">$timecut</a> &amp;&amp; (<a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['invisible'] == 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('mybb')" href="_variables/mybb.html">$mybb</a>-&gt;<a onClick="logVariable('user')" class="var it8056" onMouseOver="hilite(8056)" onMouseOut="lolite()" href="_variables/user.html">user</a>['usergroup'] == 4) &amp;&amp; <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['lastvisit'] != <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('buddy')" href="_variables/buddy.html">$buddy</a>['lastactive'])
<a name="l752"><span class="linenum"> 752</span></a>              {
<a name="l753"><span class="linenum"> 753</span></a>                  eval(&quot;\<a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('online')" href="_variables/online.html">$online</a>[] = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;xmlhttp_buddyselect_online&quot;).&quot;\&quot;;&quot;);
<a name="l754"><span class="linenum"> 754</span></a>              }
<a name="l755"><span class="linenum"> 755</span></a>              else
<a name="l756"><span class="linenum"> 756</span></a>              {
<a name="l757"><span class="linenum"> 757</span></a>                  eval(&quot;\<a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('offline')" href="_variables/offline.html">$offline</a>[] = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;xmlhttp_buddyselect_offline&quot;).&quot;\&quot;;&quot;);
<a name="l758"><span class="linenum"> 758</span></a>              }
<a name="l759"><span class="linenum"> 759</span></a>          }
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('online')" href="_variables/online.html">$online</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;&quot;, <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('online')" href="_variables/online.html">$online</a>);
<a name="l761"><span class="linenum"> 761</span></a>          <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('offline')" href="_variables/offline.html">$offline</a> = <a class="phpfunction" onClick="logFunction('implode')" href="_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;&quot;, <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('offline')" href="_variables/offline.html">$offline</a>);
<a name="l762"><span class="linenum"> 762</span></a>          eval(&quot;\<a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('buddy_select')" href="_variables/buddy_select.html">$buddy_select</a> = \&quot;&quot;.<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('templates')" href="_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('get')" href="_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(&quot;xmlhttp_buddyselect&quot;).&quot;\&quot;;&quot;);
<a name="l763"><span class="linenum"> 763</span></a>          echo <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('buddy_select')" href="_variables/buddy_select.html">$buddy_select</a>;
<a name="l764"><span class="linenum"> 764</span></a>      }
<a name="l765"><span class="linenum"> 765</span></a>      else
<a name="l766"><span class="linenum"> 766</span></a>      {
<a name="l767"><span class="linenum"> 767</span></a>          <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('lang')" href="_variables/lang.html">$lang</a>-&gt;<a onClick="logVariable('buddylist_error')" class="var it8055" onMouseOver="hilite(8055)" onMouseOut="lolite()" href="_variables/buddylist_error.html">buddylist_error</a>);
<a name="l768"><span class="linenum"> 768</span></a>      }
<a name="l769"><span class="linenum"> 769</span></a>  }
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">/**</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment"> * Spits an XML Http based error message back to the browser</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment"> *</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment"> * @param string The message to send back.</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment"> */</span>
<a name="l776"><span class="linenum"> 776</span></a>  function <a class="function" onClick="logFunction('xmlhttp_error')" href="_functions/xmlhttp_error.html" onMouseOver="funcPopup(event,'xmlhttp_error')">xmlhttp_error</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>)
<a name="l777"><span class="linenum"> 777</span></a>  {
<a name="l778"><span class="linenum"> 778</span></a>      global <a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>;
<a name="l779"><span class="linenum"> 779</span></a>      
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">    // Send our headers.</span>
<a name="l781"><span class="linenum"> 781</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(&quot;Content-type: text/xml; charset={<a class="var it535" onMouseOver="hilite(535)" onMouseOut="lolite()" onClick="logVariable('charset')" href="_variables/charset.html">$charset</a>}&quot;);
<a name="l782"><span class="linenum"> 782</span></a>      
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">    // Send the error message.</span>
<a name="l784"><span class="linenum"> 784</span></a>      echo &quot;&lt;error&gt;&quot;.<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('message')" href="_variables/message.html">$message</a>.&quot;&lt;/error&gt;&quot;;
<a name="l785"><span class="linenum"> 785</span></a>      
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">    // Exit</span>
<a name="l787"><span class="linenum"> 787</span></a>      exit;
<a name="l788"><span class="linenum"> 788</span></a>  }
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'remove_message_quotes': ['remove_message_quotes', 'Selectively removes quote tags from a message, depending on its nested depth.  This is to be used with reply with quote functions. For malformed quote tag structures, will try to simulate how MyBB\'s parser handles the issue, but is slightly inaccurate. Examples, with a cutoff depth of 2: #1. INPUT:  [quote]a[quote=me]b[quote]c[/quote][/quote][/quote] OUTPUT:  [quote]a[quote=me]b[/quote][/quote] #2. INPUT:  [quote=a][quote=b][quote=c][quote=d][/quote][quote=e][/quote][/quote][quote=f][/quote][/quote] OUTPUT:  [quote=a][quote=b][/quote][quote=f][/quote][/quote] ', [['inc','functions_posting.php',12]], 3],
'get_forum': ['get_forum', 'Get the forum of a specific forum id. ', [['inc','functions.php',4890]], 51],
'set_language': ['set_language', 'Set the language for an area. ', [['inc','class_language.php',65]], 9],
'xmlhttp_error': ['xmlhttp_error', 'Spits an XML Http based error message back to the browser ', [['','xmlhttp.php',771]], 19],
'build_profile_link': ['build_profile_link', 'Build the profile link. ', [['inc','functions.php',4666]], 107],
'init': ['init', 'Initialize a session ', [['inc','class_session.php',22]], 9],
'on': ['on', '', [['jscripts','prototype.js',5765]], 318],
'get_post': ['get_post', 'Get the post of a post id. ', [['inc','functions.php',4964]], 12],
'validate_post': ['validate_post', 'Validate a post. ', [['inc/datahandlers','post.php',580]], 7],
'load': ['load', 'Load all plugins. ', [['inc','class_plugins.php',29],['inc','class_language.php',118]], 70],
'simple_select': ['simple_select', 'Performs a simple select query. ', [['inc','db_sqlite.php',563],['inc','db_mysql.php',674],['inc','db_mysqli.php',684],['inc','db_pgsql.php',677]], 1010],
'log_moderator_action': ['log_moderator_action', 'Log the actions of a moderator. ', [['inc','functions.php',2814]], 48],
'insert_query': ['insert_query', 'Build an insert query from an array. ', [['inc','db_sqlite.php',604],['inc','db_mysql.php',709],['inc','db_mysqli.php',724],['inc','db_pgsql.php',715]], 155],
'run_hooks': ['run_hooks', 'Run the hooks that have plugins. ', [['inc','class_plugins.php',74]], 924],
'dec_to_utf8': ['dec_to_utf8', 'Converts a decimal reference of a character to its UTF-8 equivalent (Code by Anne van Kesteren, http://annevankesteren.nl/2005/05/character-references) ', [['inc','functions.php',5337]], 16],
'set_data': ['set_data', 'Sets the data to be used for the data handler ', [['inc','datahandler.php',75]], 26],
'random_str': ['random_str', 'Generates a random string. ', [['inc','functions.php',2354]], 33],
'update_post': ['update_post', 'Updates a post that is already in the database. ', [['inc/datahandlers','post.php',1479]], 3],
'language_exists': ['language_exists', 'Check if a specific language exists. ', [['inc','class_language.php',46]], 11],
'get_thread': ['get_thread', 'Get the thread of a thread id. ', [['inc','functions.php',4930]], 30],
'verify_post_check': ['verify_post_check', 'Verifies a POST check code is valid, if not shows an error (silently returns false on silent parameter) ', [['inc','functions.php',476]], 114],
'escape_string': ['escape_string', 'Escape a string ', [['inc','db_sqlite.php',717],['inc','db_pdo.php',207],['inc','db_mysql.php',839],['inc','db_mysqli.php',848],['inc','db_pgsql.php',843]], 901],
'my_strtolower': ['my_strtolower', 'lowers the case of a string, mb strings accounted for ', [['inc','functions.php',4493]], 90],
'htmlspecialchars_uni': ['htmlspecialchars_uni', 'Custom function for htmlspecialchars which takes in to account unicode ', [['inc','functions.php',4063]], 553],
'read': ['read', 'Read cache from files or db. ', [['inc','class_datacache.php',88]], 113],
'my_strpos': ['my_strpos', 'Finds a needle in a haystack and returns it position, mb strings accounted for ', [['inc','functions.php',4513]], 47],
'delete_query': ['delete_query', 'Build a delete query. ', [['inc','db_sqlite.php',698],['inc','db_mysql.php',811],['inc','db_mysqli.php',826],['inc','db_pgsql.php',820]], 262],
'get_post_attachments': ['get_post_attachments', 'Fetch the attachments for a specific post and parse inline [attachment=id] code. Note: assumes you have $attachcache, an array of attachments set up. ', [['inc','functions_post.php',652]], 3],
'fetch_array': ['fetch_array', 'Return a result array for a query. ', [['inc','db_sqlite.php',276],['inc','db_pdo.php',75],['inc','db_mysql.php',410],['inc','db_mysqli.php',419],['inc','db_pgsql.php',401]], 965],
'format_name': ['format_name', 'Formats a username based on their display group ', [['inc','functions.php',2374]], 50],
'update_usergroups': ['update_usergroups', 'Update the usergroups cache. ', [['inc','class_datacache.php',322]], 9],
'parse_badwords': ['parse_badwords', 'Parses a list of filtered/badwords in the specified message. ', [['inc','class_parser.php',501]], 64],
'get_unviewable_forums': ['get_unviewable_forums', 'Get a list of the unviewable forums for the current user ', [['inc','functions.php',3110]], 10],
'get_friendly_errors': ['get_friendly_errors', 'Returns the error(s) that occurred when handling data in a format that MyBB can handle. ', [['inc','datahandler.php',113]], 22],
'is_banned_username': ['is_banned_username', 'Checks if a username has been disallowed for registration/use. ', [['inc','functions.php',5382]], 2],
'parse_quoted_message': ['parse_quoted_message', 'Performs cleanup of a quoted message, such as replacing /me commands, before presenting quoted post to the user. ', [['inc','functions_posting.php',169]], 2],
'num_rows': ['num_rows', 'Return the number of rows resulting from a query. ', [['inc','db_sqlite.php',317],['inc','db_pdo.php',116],['admin/inc','class_table.php',125],['inc','db_mysql.php',454],['admin/inc','class_form.php',939],['inc','db_mysqli.php',460],['inc','db_pgsql.php',445]], 114],
'parse_message': ['parse_message', 'Parses a message with the specified options. ', [['inc','class_parser.php',75]], 30],
'my_date': ['my_date', 'Turn a unix timestamp in to a "friendly" date/time format for the user. ', [['inc','functions.php',303]], 324],
'unichr': ['unichr', 'Returns any ascii to it\'s character (utf-8 safe). ', [['inc','functions.php',4579]], 11],
'get': ['get', 'Gets templates. ', [['inc','class_templates.php',57],['jscripts','prototype.js',1224]], 736],
'is_moderator': ['is_moderator', 'Checks if a moderator has permissions to perform an action in a specific forum ', [['inc','functions.php',1504]], 129],
'my_strlen': ['my_strlen', 'Checks for the length of a string, mb strings accounted for ', [['inc','functions.php',4413]], 54],
'empty': ['empty', '', [['jscripts','prototype.js',715]], 368],
'sprintf': ['sprintf', '', [['inc','class_language.php',166]], 464],
'query': ['query', 'Query the database. ', [['inc','db_sqlite.php',150],['inc','db_pdo.php',57],['inc','db_mysql.php',278],['inc','db_mysqli.php',288],['inc','db_pgsql.php',273]], 309],
'forum_permissions': ['forum_permissions', 'Build the forum permissions for a specific forum, user or group ', [['inc','functions.php',1146]], 64],
'fetch_field': ['fetch_field', 'Return a specific field from a query. ', [['inc','db_sqlite.php',289],['inc','db_mysql.php',423],['inc','db_mysqli.php',432],['inc','db_pgsql.php',414]], 258],
'gmdate': ['gmdate', '', [], 150],
'array_key_exists': ['array_key_exists', '', [], 118],
'function_exists': ['function_exists', '', [], 101],
'mb_convert_encoding': ['mb_convert_encoding', '', [], 3],
'intval': ['intval', '', [], 1305],
'explode': ['explode', '', [], 340],
'substr': ['substr', '', [], 156],
'is_dir': ['is_dir', '', [], 36],
'is_array': ['is_array', '', [], 550],
'utf8_decode': ['utf8_decode', '', [], 3],
'mb_internal_encoding': ['mb_internal_encoding', '', [], 4],
'preg_replace': ['preg_replace', '', [], 153],
'strpos': ['strpos', '', [], 91],
'implode': ['implode', '', [], 346],
'array_merge': ['array_merge', '', [], 37],
'trim': ['trim', '', [], 269],
'dirname': ['dirname', '', [], 16],
'preg_match': ['preg_match', '', [], 85],
'define': ['define', '', [], 164],
'unserialize': ['unserialize', '', [], 93],
'str_replace': ['str_replace', '', [], 323],
'header': ['header', '', [], 103]};
CLASS_DATA={
'session': ['session', 'MyBB 1.6 Copyright 2010 MyBB Group, All Rights Reserved ', [['inc','class_session.php',2]], 4],
'postdatahandler': ['postdatahandler', 'Post handling class, provides common structure to handle post data. ', [['inc/datahandlers','post.php',32]], 10],
'postparser': ['postparser', '', [['inc','class_parser.php',25]], 37]};
CONST_DATA={
'TABLE_PREFIX': ['TABLE_PREFIX', '', [['inc','functions.php',180],['install','upgrade.php',92],['inc','init.php',138],['install','index.php',2246]], 1488],
'THIS_SCRIPT': ['THIS_SCRIPT', '', [['','editpost.php',13],['','printthread.php',13],['','portal.php',14],['','newreply.php',13],['','modcp.php',13],['','task.php',18],['','private.php',14],['','xmlhttp.php',27],['','css.php',14],['','misc.php',13],['','warnings.php',13],['','reputation.php',13],['','memberlist.php',13],['','usercp.php',13],['','showteam.php',13],['','sendthread.php',13],['','showthread.php',13],['','calendar.php',13],['','online.php',13],['','global.php',35],['','forumdisplay.php',13],['','newthread.php',13],['','member.php',13],['','report.php',13],['','ratethread.php',13],['','attachment.php',13],['','polls.php',13],['','usercp2.php',13],['','syndication.php',15],['','stats.php',13],['','moderation.php',13],['','managegroup.php',13],['','search.php',15],['','announcements.php',13],['','captcha.php',14],['','index.php',13]], 42],
'TIME_NOW': ['TIME_NOW', '', [['inc','db_sqlite.php',1046],['install','upgrade.php',29],['inc','init.php',51],['install','index.php',31]], 409],
'IN_MYBB': ['IN_MYBB', '', [['','editpost.php',12],['','printthread.php',12],['','portal.php',12],['','newreply.php',12],['','modcp.php',12],['','task.php',15],['','private.php',12],['','xmlhttp.php',22],['archive','index.php',12],['','css.php',12],['','misc.php',12],['','warnings.php',12],['','reputation.php',12],['','memberlist.php',12],['install','upgrade.php',30],['','usercp.php',12],['','showteam.php',12],['','sendthread.php',12],['','showthread.php',12],['','calendar.php',12],['','online.php',12],['','forumdisplay.php',12],['','newthread.php',12],['','member.php',12],['','report.php',12],['','ratethread.php',12],['','attachment.php',12],['','polls.php',12],['','usercp2.php',12],['admin','index.php',12],['','syndication.php',12],['','stats.php',12],['','moderation.php',12],['install','index.php',32],['','managegroup.php',12],['','search.php',13],['','announcements.php',12],['','captcha.php',12],['','index.php',12]], 179],
'NO_ONLINE': ['NO_ONLINE', '', [['','task.php',16],['','xmlhttp.php',25],['','css.php',13],['','global.php',49],['','syndication.php',14],['','captcha.php',13]], 9]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Jun  4 13:54:24 2012</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
