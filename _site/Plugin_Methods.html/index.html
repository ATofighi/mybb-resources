<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>MyBB Documentation - Plugin Methods</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="author" content="MyBB Group" />
	<meta name="copyright" content="Copyright MyBB Group." />
	<meta name="description" content="The official documentation for MyBB, a free PHP and MySQL based discussion system." />
	<link rel="stylesheet" type="text/css" href="http://mybb.com/assets/screen.css?xmas" />
	<!--[if lt IE 8]>
	<link rel="stylesheet" type="text/css" href="http://mybb.com/assets/screen_ie.css?zz" />
	<![endif]-->

	<script type="text/javascript" src="http://mybb.com/jscripts/prototype.lite.js"></script>
	<script type="text/javascript" src="http://mybb.com/jscripts/general.js"></script>
	<script type="text/javascript" src="http://mybb.com/jscripts/moo.ajax.js"></script>
	<script type="text/javascript" src="http://mybb.com/jscripts/lightbox.js"></script>
	<!--[if lt IE 7]>
	<script defer type="text/javascript" src="http://mybb.com/assets/pngfix.js"></script>
	<![endif]-->
</head>
<body>
	<div id="shadow">
		<div id="container">
			<!--search:no_index-->
			<h1><span class="invisible">MyBB</span></h1>
			<div id="header">
			<a class="link" href="/"></a>
				<div id="search">
					<form action="/search" method="get"><fieldset><label for="search_box"><span id="search_left">&nbsp;</span></label><input type="text" name="query" id="search_box" title="Enter your search keywords" /><input type="submit" value="Search" name="submit-search" id="search_button" /></fieldset></form>
				</div>
				<div id="menu">
				<ul>
					<li class="default"><a href="/">Home</a></li>
					<li class="default"><a href="/about">About</a></li>
					<li class="default"><a href="/features">Features</a></li>
					<li class="default"><a href="/downloads">Downloads</a></li>
					<li class="default"><a href="http://community.mybb.com/">Community Forum</a></li>
					<li class="default"><a href="/get-involved">Get Involved</a></li>
					<li class="default"><a href="http://ideas.mybb.com/">Ideas</a></li>
					<li class="default"><a href="http://mods.mybb.com/">Mods</a></li>
					<li class="active"><a href="http://wiki.mybb.com/">Wiki</a></li>
					<li class="default"><a href="http://blog.mybb.com/">Blog</a></li>

				</ul>
				</div>
			</div>
			
			
			<!--/search:no_index-->
			<div id="content">
				<div id="sidebar">
					<div class="item">
					<div class="sidebar_top"><div class="right"></div></div>
						<h3>Categories</h3>
						<ul>
						
														
						</ul>
					<div class="sidebar_bottom"><div class="right"></div></div>
					</div>
				</div>
				
				<div id="page">
					<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Common_Global_Objects_and_Methods_to_Use_in_Plugins"><span class="tocnumber">1</span> <span class="toctext">Common Global Objects and Methods to Use in Plugins</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#MyBB_Global_Objects"><span class="tocnumber">1.1</span> <span class="toctext">MyBB Global Objects</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#.24db"><span class="tocnumber">1.1.1</span> <span class="toctext">$db</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#.24lang"><span class="tocnumber">1.1.2</span> <span class="toctext">$lang</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#.24mybb"><span class="tocnumber">1.1.3</span> <span class="toctext">$mybb</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#.24templates"><span class="tocnumber">1.1.4</span> <span class="toctext">$templates</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#.24thread"><span class="tocnumber">1.1.5</span> <span class="toctext">$thread</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#.24tids"><span class="tocnumber">1.1.6</span> <span class="toctext">$tids</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#MyBB_Global_Methods"><span class="tocnumber">1.2</span> <span class="toctext">MyBB Global Methods</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#cache_themes.28.29"><span class="tocnumber">1.2.1</span> <span class="toctext">cache_themes()</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#find_replace_templatesets.28.24templatename.2C_.24string.2C_.24replacement_string.29"><span class="tocnumber">1.2.2</span> <span class="toctext">find_replace_templatesets($templatename, $string, $replacement_string)</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table>

<p>When developing plugins, you can use predefined MyBB methods and objects.
</p>

<p>Some of these objects may be available or not, depending on what hook your plugin code is run by. For example, <code>$forum</code> is available only in <code>build_forumbits_forum</code> hooks, if it wsa passed as a parameter.
</p><p>To explore the properties of an object, use the PHP function <a rel="nofollow" class="external text" href="http://php.net/manual/en/function.print-r.php">print_r</a>.
</p>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=3" title="Edit section: $db">edit</a>]</span> <span class="mw-headline" id=".24db"> $db </span></h3>
<p>MyBB uses the $db variable to perform various database functions. These range from writing to deleting queries. For a full list of available methods, see the <a href="http://mybb.github.com/MyBB-Resources/Database_Methods.html" title="Database Methods">Database Methods</a> page.
</p>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=4" title="Edit section: $lang">edit</a>]</span> <span class="mw-headline" id=".24lang"> $lang </span></h3>
<p>$lang calls on language settings. If you're creating a plugin, or creating custom code that you plan on redistributing, you should always use language variables. This allows your coding to be translated into the many languages MyBB users speak. Language files are found in ./inc/languages/{language_pack}/. To create your own language file, simply make a standard PHP file (with <i>&lt;?php</i> tags) and use variables like this:
</p>
<pre>$l['isloggedin'] = &quot;This user is logged in.&quot;;
$l['isnotloggedin'] = &quot;This user is not logged in.&quot;;</pre>
<p>Save your file in this format: "foobar.lang.php". To be able to use your language files, you need to load them first. You do this like so:
</p>
<pre>
function foo_dosomethingcool()
{
	global $lang, $mybb;
	$lang-&gt;load(&quot;foobar&quot;);
		if($mybb-&gt;user['uid'])
		{
			return $lang-&gt;isloggedin;
		}
		else
		{
			return $lang-&gt;isnotloggedin;
		}
}
</pre>
<p>So basically, if this function is used then it will load the "foobar.lang.php" language file and if a user is logged in, it will return the <i>isloggedin</i> text. If not, it will return the <i>isnotloggedin</i> text. We can also use the <a rel="nofollow" class="external text" href="http://php.net/sprintf/">PHP Sprintf function</a> in the $lang variable too. This lets us format a certain language string in the way we want to. For example, a language variable of
</p>
<pre>$l['welcome_back'] = &quot;&lt;strong&gt;Welcome back, {1}&lt;/strong&gt;. You last visited: {2}&quot;;</pre>
<p>We can format this string by using $lang-&gt;sprintf:
</p>
<pre>$lang-&gt;welcome_back = $lang-&gt;sprintf($lang-&gt;welcome_back, $mybb-&gt;user['username'], $lastvisit);</pre>
<p>$mybb-&gt;user['username'] will replace the {1}, and $lastvisit (the time of the user's last visit) will replace the {2}. That means the string will read: <i>Welcome back, <b>User</b>. You last visited: Yesterday, 12:32pm</i> (for example).
</p><p>If you're stuck with language settings, you can get help at the <a rel="nofollow" class="external text" href="http://community.mybboard.net/forum-72.html">MyBB Community Forum</a>.
</p>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=5" title="Edit section: $mybb">edit</a>]</span> <span class="mw-headline" id=".24mybb"> $mybb </span></h3>
<p>The $mybb object can be used (amoung other things) to access cookies, user and usergroup details and settings.
</p>
<dl><dd><b>$mybb-&gt;cookies['cookiename']</b>
<dl><dd>Replace 'cookiename' with the name of a cookie (example: <i>mybbuser</i> will return the contents of the mybbuser cookie).
</dd></dl>
</dd></dl>
<dl><dd><b>$mybb-&gt;user['fieldname']</b>
<dl><dd>Replace 'fieldname' with the name of a field in the <a href="Database_Tables/mybb_users" title="Database Tables/mybb users">Users Table</a> in the database (example: <i>username</i> will return the contents of the username field in the database).
</dd></dl>
</dd></dl>
<dl><dd><b>$mybb-&gt;usergroup['fieldname']</b>
<dl><dd>Replace 'fieldname' with the name of a field in the <a href="Database_Tables/mybb_usergroups" title="Database Tables/mybb usergroups">Usergroups Table</a> in the database (example: <i>issupermod</i> will be able to tell you if the user is a Super Moderator or not (returns 1 if true, 0 if false).
</dd></dl>
</dd></dl>
<dl><dd><b>$mybb-&gt;settings['fieldname']</b>
<dl><dd>Replace 'fieldname' with the name (not title) of a setting (example: <i>bburl</i> will return the board URL).
</dd></dl>
</dd></dl>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=6" title="Edit section: $templates">edit</a>]</span> <span class="mw-headline" id=".24templates"> $templates </span></h3>
<p>Returns the templates manager. The standard idiom for evaluating a template is:
</p>
<pre>
eval(&quot;\$string_our_plugin_exports = \&quot;&quot;.$templates-&gt;get(&quot;our_plugin_template&quot;).&quot;\&quot;;&quot;);
</pre>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=7" title="Edit section: $thread">edit</a>]</span> <span class="mw-headline" id=".24thread"> $thread </span></h3>
<p>Returns the current thread object.
</p>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=8" title="Edit section: $tids">edit</a>]</span> <span class="mw-headline" id=".24tids"> $tids </span></h3>
<p>Comma-separated list of thread IDs, constructed by <code>forumdisplay.php</code>.
</p><p><b>TBD</b> - which thread IDs are these? those visible in the current page of the same forum as the current thread?
</p><p><br />
</p>

<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=10" title="Edit section: cache themes()">edit</a>]</span> <span class="mw-headline" id="cache_themes.28.29"> cache_themes() </span></h3>
<h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Plugin_Methods&amp;action=edit&amp;section=11" title="Edit section: find replace templatesets($templatename, $string, $replacement string)">edit</a>]</span> <span class="mw-headline" id="find_replace_templatesets.28.24templatename.2C_.24string.2C_.24replacement_string.29"> find_replace_templatesets($templatename, $string, $replacement_string) </span></h3>
<p>Replaces text inside templates. Useful to insert your own variables.
</p><p>Example (from the <a rel="nofollow" class="external text" href="http://mods.mybb.com/view/i-m-subscribed">I'm Subscribed plugin</a>):
</p>
<pre>
('forumdisplay_thread', '#{\$attachment_count}#', '{$subscription}{\$attachment_count}');
</pre>
<div style="border: 1px solid #ddd; background-color: #f5f5f5; padding: 5px; margin: 5px;">
<div style="text-align: center; font-size: 18px; margin-bottom: 5px;"><b><a href="http://mybb.github.com/MyBB-Resources/Customization.html" title="Customization">MyBB Customization</a></b></div>
<table cellpadding="3" cellspacing="3" style="font-size: 95%; line-spacing:1; border: 1px solid #ddd; width: 100%; margin-bottom: 5px; background: #fff;">
<tr>
<td style="vertical-align: middle; font-size: 14px;"><b><a href="http://mybb.github.com/MyBB-Resources/Templates_and_Themes.html" title="Templates and Themes">Templates/Themes</a></b>
</td>
<td style="vertical-align: middle; width: 75%;"><a href="http://mybb.github.com/MyBB-Resources/Authoring_Templates_and_Themes.html" title="Authoring Templates and Themes">Authoring</a> - <a href="http://mybb.github.com/MyBB-Resources/Admin_CP_Templates.html" title="Admin CP Templates">Template Management</a> - <a href="http://mybb.github.com/MyBB-Resources/Admin_CP_Themes.html" title="Admin CP Themes">Theme Management</a> - <a rel="nofollow" class="external text" href="http://mods.mybb.com/themes">User-created</a>
</td></tr></table>
<table cellpadding="3" cellspacing="3" style="font-size: 95%; line-spacing:1; border: 1px solid #ddd; width: 100%; margin-bottom: 5px; background: #fff;">
<tr>
<td style="vertical-align: middle; font-size: 14px;"><b><a href="http://mybb.github.com/MyBB-Resources/Plugins.html" title="Plugins">Plugins</a></b>
</td>
<td style="vertical-align: middle; width: 75%;"><a href="http://mybb.github.com/MyBB-Resources/Authoring_Plugins.html" title="Authoring Plugins">Authoring</a> - <a href="http://mybb.github.com/MyBB-Resources/MyBB_Plugin_Hooks.html" title="MyBB Plugin Hooks">Plugin Hooks</a> - <a href="http://mybb.github.com/MyBB-Resources/Admin_CP_Config_Plugins.html" title="Admin CP Config Plugins">Plugin Management</a> - <a rel="nofollow" class="external text" href="http://mods.mybb.com/mods">User-created</a>
</td></tr></table>
<table cellpadding="3" cellspacing="3" style="font-size: 95%; line-spacing:1; border: 1px solid #ddd; width: 100%; margin-bottom: 5px; background: #fff;">
<tr>
<td style="vertical-align: middle; font-size: 14px;"><b><a href="http://mybb.github.com/MyBB-Resources/Translations.html" title="Translations">Translations</a></b>
</td>
<td style="vertical-align: middle; width: 75%;"><a href="http://mybb.github.com/MyBB-Resources/Admin_CP_Config_Languages.html" title="Admin CP Config Languages">Language Management</a> - <a rel="nofollow" class="external text" href="http://community.mybb.com/thread-114917.html">Download</a>
</td></tr></table>
<table cellpadding="3" cellspacing="3" style="font-size: 95%; line-spacing:1; border: 1px solid #ddd; width: 100%; margin-bottom: 5px; background: #fff;">
<tr>
<td style="vertical-align: middle; font-size: 14px;"><b>Links</b>
</td>
<td style="vertical-align: middle; width: 75%;"><a rel="nofollow" class="external text" href="http://mods.mybb.com/">MyBB Mods</a>
</td></tr></table>
</div>





					
					Last updated on: 2012-06-02 00:00:00 -0700.
				</div>
			</div>
		</div>
		
		<div id="footer">
				<script type="text/javascript" src="http://mybb.com/footer_credit.js"></script>
				<p>Copyright &copy; 2010 MyBB Group. All rights reserved.</p>
				<p><a href="/contact">Contact</a> MyBB Group &mdash; <em>for support with MyBB, visit <a href="/support">support</a></em></p><br />
			</div>
		</div>  
	</div>
	
	<div id="shadow_footer"></div>

	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-11443733-2']);
	  _gaq.push(['_setDomainName', 'none']);
	  _gaq.push(['_setAllowLinker', true]);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</body>
</html>

